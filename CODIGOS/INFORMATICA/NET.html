<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>.NET</title>
    <!-- Enlace a Tailwind CSS para las clases de la estructura HTML -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS completo para el estilo del quiz -->
    <style>
        /* Estilos generales del cuerpo */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }

        /* Contenedor principal del quiz */
        .container {
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 30px;
            max-width: 800px;
            width: 100%;
            margin-top: 20px;
        }

        /* Tarjeta de la pregunta */
        .question-card {
            background-color: #f8fafc;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease-in-out;
        }

        /* Estilo para la tarjeta de pregunta correcta */
        .question-card.correct {
            background-color: #d4edda;
            border-color: #28a745;
        }

        /* Estilo para la tarjeta de pregunta incorrecta */
        .question-card.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
        }

        /* Texto de la pregunta */
        .question-text {
            font-size: 1.15rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        /* Botones de opciones */
        .option-button {
            display: block;
            width: 100%;
            text-align: left;
            padding: 12px 18px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid #cbd5e0;
            background-color: #ffffff;
            color: #4a5568;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        /* Efecto hover para los botones de opciones */
        .option-button:hover:not(.disabled) {
            background-color: #e2e8f0;
            border-color: #a0aec0;
        }

        /* Estilo para el botón de opción seleccionado */
        .option-button.selected {
            border-color: #4299e1;
            background-color: #ebf8ff;
            font-weight: 600;
        }

        /* Estilo para la respuesta correcta */
        .option-button.correct-answer {
            background-color: #28a745;
            color: #ffffff;
            border-color: #28a745;
            font-weight: 700;
        }

        /* Estilo para la respuesta incorrecta */
        .option-button.incorrect-answer {
            background-color: #dc3545;
            color: #ffffff;
            border-color: #dc3545;
            font-weight: 700;
        }

        /* Estilo para los botones deshabilitados */
        .option-button.disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }

        /* Contenedor de la solución */
        .solution {
            margin-top: 15px;
            padding: 10px 15px;
            border-radius: 8px;
            background-color: #e0f2f7;
            color: #2c5282;
            font-size: 0.95rem;
            font-weight: 500;
            border: 1px solid #90cdf4;
        }

        /* Contenedor del feedback (correcto/incorrecto) */
        .feedback {
            margin-top: 15px;
            font-weight: 600;
            font-size: 1rem;
            text-align: center;
        }

        /* Estilo para feedback correcto */
        .feedback.correct {
            color: #28a745;
        }

        /* Estilo para feedback incorrecto */
        .feedback.incorrect {
            color: #dc3545;
        }

        /* Contenedor de los botones de navegación */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }

        /* Estilo base para los botones de navegación */
        .nav-button {
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            flex-grow: 1;
            text-align: center;
        }

        /* Estilo para el botón "Anterior" */
        .nav-button.prev {
            background-color: #6b7280;
            color: #ffffff;
        }
        .nav-button.prev:hover:not(:disabled) {
            background-color: #4b5563;
            transform: translateY(-2px);
        }

        /* Estilo para el botón "Siguiente" */
        .nav-button.next {
            background-color: #4299e1;
            color: #ffffff;
        }
        .nav-button.next:hover:not(:disabled) {
            background-color: #3182ce;
            transform: translateY(-2px);
        }

        /* Estilo para el botón de reinicio en línea */
        .nav-button.restart-inline {
            background-color: #f50b0b;
            color: #ffffff;
        }
        .nav-button.restart-inline:hover:not(:disabled) {
            background-color: #ac0505;
            transform: translateY(-2px);
        }

        /* Estilo para los botones deshabilitados */
        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Barra de progreso */
        .progress-bar-container {
            width: 100%;
            background-color: #e2e8f0;
            border-radius: 5px;
            height: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: #4299e1;
            width: 0%;
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        /* Visualización de la puntuación final */
        .score-display {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: #2d3748;
            margin-top: 20px;
        }

        /* Resumen de resultados */
        .results-summary {
            margin-top: 20px;
            padding: 20px;
            background-color: #f8fafc;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
        }

        .results-summary p {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #2d3748;
        }

        .results-summary p strong {
            font-weight: 700;
        }

        /* Botón de reinicio final */
        .restart-button {
            display: block;
            width: fit-content;
            margin: 20px auto 0 auto;
            padding: 12px 30px;
            background-color: #48bb78;
            color: #ffffff;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .restart-button:hover {
            background-color: #38a169;
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
         <h1 style="color: #003366; font-family: 'Georgia', serif; font-size: 2rem; text-align: center; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);">.NET</h1>

        <!-- Barra de progreso -->
        <div class="progress-bar-container">
            <div id="progressBar" class="progress-bar"></div>
        </div>

        <!-- Contenedor principal de las preguntas -->
        <div id="quizContainer">
            <!-- Las preguntas se cargarán dinámicamente aquí -->
        </div>

        <!-- Botones de navegación -->
        <div class="navigation-buttons">
            <button id="prevBtn" class="nav-button prev" disabled>Anterior</button>
            <button id="restartInlineBtn" class="nav-button restart-inline">Reiniciar Test</button>
            <button id="nextBtn" class="nav-button next">Siguiente</button>
        </div>

        <!-- Contenedor de la puntuación final -->
        <div id="finalScore" class="hidden">
            <div class="score-display"></div>
            <div class="results-summary">
                <p><strong>Preguntas Correctas:</strong> <span id="correctCount">0</span></p>
                <p><strong>Preguntas Incorrectas:</strong> <span id="incorrectCount">0</span></p>
                <p><strong>Preguntas Sin Contestar:</strong> <span id="unansweredCount">0</span></p>
            </div>
            <button id="restartBtn" class="restart-button">Reiniciar Test</button>
        </div>
    </div>

    <script>
        const quizData = [
            {
                question: "¿Cuál de las siguientes afirmaciones describe mejor el .NET Framework?",
                options: [
                    "a) Un entorno de ejecución para Java.",
                    "b) El corazón de la plataforma .NET.",
                    "c) Una herramienta de compilación para C++.",
                    "d) Un sistema operativo."
                ],
                correctAnswer: "b) El corazón de la plataforma .NET."
            },
            {
                question: "¿Qué formato pueden adoptar los Assembly en .NET?",
                options: [
                    "a) .txt o .pdf",
                    "b) .zip o .rar",
                    "c) .dll o .exe",
                    "d) .jpg o .png"
                ],
                correctAnswer: "c) .dll o .exe"
            },
            {
                question: "¿Con qué utilidad se puede visualizar el contenido de un Assembly?",
                options: [
                    "a) javap",
                    "b) ildasm.exe",
                    "c) gdb",
                    "d) debugger.exe"
                ],
                correctAnswer: "b) ildasm.exe"
            },
            {
                question: "¿Qué componente de .NET es responsable de transformar el bytecode en código nativo?",
                options: [
                    "a) C# compiler",
                    "b) CLR",
                    "c) JIT",
                    "d) CIL"
                ],
                correctAnswer: "c) JIT"
            },
            {
                question: "¿Qué significan las siglas CLI en el contexto de .NET?",
                options: [
                    "a) Common Language Interpreter",
                    "b) Common Library Interface",
                    "c) Common Language Infrastructure",
                    "d) Compiled Language Integration"
                ],
                correctAnswer: "c) Common Language Infrastructure"
            },
            {
                question: "¿Cuál es la implementación de VES (Virtual Execution System)?",
                options: [
                    "a) JDK",
                    "b) JRE",
                    "c) CLR",
                    "d) CIL"
                ],
                correctAnswer: "c) CLR"
            },
            {
                question: "¿Cuál de las siguientes tareas NO es realizada por el CLR (Common Language Runtime)?",
                options: [
                    "a) Gestión de hilos",
                    "b) Gestión de excepciones",
                    "c) Recolección de basura",
                    "d) Diseño de interfaces gráficas de usuario"
                ],
                correctAnswer: "d) Diseño de interfaces gráficas de usuario"
            },
            {
                question: "¿Cuál era el nombre anterior de CIL (Common Intermediate Language)?",
                options: [
                    "a) MSVC",
                    "b) MSIL",
                    "c) .NET IL",
                    "d) JIL"
                ],
                correctAnswer: "b) MSIL"
            },
            {
                question: "¿Qué define el CTS (Common Type System) en .NET?",
                options: [
                    "a) La sintaxis de los lenguajes compatibles.",
                    "b) La estructura de tipos compatibles (clases, Value Types, Interfaces, Delegates).",
                    "c) Las reglas de seguridad de la plataforma.",
                    "d) Los estándares de comunicación en red."
                ],
                correctAnswer: "b) La estructura de tipos compatibles (clases, Value Types, Interfaces, Delegates)."
            },
            {
                question: "¿Qué especifica la CLS (Common Language Specification)?",
                options: [
                    "a) Las bibliotecas de clases base.",
                    "b) Las características de los lenguajes compatibles.",
                    "c) El formato de los ficheros ejecutables.",
                    "d) La gestión de la memoria."
                ],
                correctAnswer: "b) Las características de los lenguajes compatibles."
            },
            {
                question: "¿En qué año Microsoft hizo de .NET un estándar ECMA 335/ISO 23271?",
                options: [
                    "a) 1999",
                    "b) 2000",
                    "c) 2001",
                    "d) 2002"
                ],
                correctAnswer: "c) 2001"
            },
            {
                question: "¿Qué versión de .NET fue la primera multiplataforma, free y opensource?",
                options: [
                    "a) .NET Framework",
                    "b) .NET Standard",
                    "c) .NET Core",
                    "d) Mono"
                ],
                correctAnswer: "c) .NET Core"
            },
            {
                question: "¿Desde cuándo existe un único producto llamado .NET (convergencia)?",
                options: [
                    "a) 2016",
                    "b) 2018",
                    "c) 2020",
                    "d) 2022"
                ],
                correctAnswer: "c) 2020"
            },
            {
                question: "¿Cuál es el propósito de .NET STANDARD BCL?",
                options: [
                    "a) Unificar las versiones del CLR.",
                    "b) Evitar que las clases \"base\" difieran entre implementaciones de .NET.",
                    "c) Proporcionar un compilador para todos los lenguajes .NET.",
                    "d) Definir el formato de los Assembly."
                ],
                correctAnswer: "b) Evitar que las clases \"base\" difieran entre implementaciones de .NET."
            },
            {
                question: "¿Qué afirmación es correcta sobre las versiones del CLR y el Framework?",
                options: [
                    "a) Las versiones del CLR y el Framework siempre coinciden, como en Java.",
                    "b) El CLR ha evolucionado constantemente desde 2010.",
                    "c) Las versiones del CLR no se corresponden con las versiones del Framework.",
                    "d) El Framework se actualiza menos frecuentemente que el CLR."
                ],
                correctAnswer: "c) Las versiones del CLR no se corresponden con las versiones del Framework."
            },
            {
                question: "¿Qué palabra clave se utiliza en VB.NET para indicar que una clase no puede ser heredada?",
                options: [
                    "a) final",
                    "b) sealed",
                    "c) NotInheritable",
                    "d) abstract"
                ],
                correctAnswer: "c) NotInheritable"
            },
            {
                question: "¿Las estructuras en .NET permiten el concepto de herencia (inherits)?",
                options: [
                    "a) Sí, siempre.",
                    "b) No, nunca.",
                    "c) Sí, pero solo de otras estructuras.",
                    "d) Solo si implementan interfaces."
                ],
                correctAnswer: "b) No, nunca."
            },
            {
                question: "¿Cómo son por defecto todos los miembros de una estructura en .NET?",
                options: [
                    "a) Privados",
                    "b) Protegidos",
                    "c) Públicos",
                    "d) Internos"
                ],
                correctAnswer: "c) Públicos"
            },
            {
                question: "¿Cómo se pasan las estructuras en .NET?",
                options: [
                    "a) Por referencia",
                    "b) Por valor",
                    "c) Depende del tipo de datos",
                    "d) Siempre como punteros"
                ],
                correctAnswer: "b) Por valor"
            },
            {
                question: "¿Qué característica principal tienen los módulos en .NET respecto a sus miembros?",
                options: [
                    "a) Todos sus miembros son privados.",
                    "b) Todos sus miembros son shared o estáticos.",
                    "c) Requieren instanciación para usarse.",
                    "d) Pueden heredar de otras clases."
                ],
                correctAnswer: "b) Todos sus miembros son shared o estáticos."
            },
            {
                question: "¿Qué es una Property en .NET?",
                options: [
                    "a) Un campo de clase directamente accesible.",
                    "b) Un mecanismo para acceder a los campos usando Get y Set internamente.",
                    "c) Una función que devuelve un valor.",
                    "d) Un tipo de datos primitivo."
                ],
                correctAnswer: "b) Un mecanismo para acceder a los campos usando Get y Set internamente."
            },
            {
                question: "Si una Property en .NET no tiene Set ni Get, ¿qué modificador se debe usar para indicar que solo se puede leer?",
                options: [
                    "a) WriteOnly",
                    "b) ReadOnly",
                    "c) Internal",
                    "d) Protected"
                ],
                correctAnswer: "b) ReadOnly"
            },
            {
                question: "¿Qué tipo ha reemplazado a Currency en .NET?",
                options: [
                    "a) Float",
                    "b) Double",
                    "c) Decimal",
                    "d) Long"
                ],
                correctAnswer: "c) Decimal"
            },
            {
                question: "¿Cómo se pasan los strings en .NET?",
                options: [
                    "a) Por valor",
                    "b) Por referencia",
                    "c) Depende de su longitud",
                    "d) Son inmutables"
                ],
                correctAnswer: "b) Por referencia"
            },
            {
                question: "¿Cuál es el equivalente a un método void de Java en VB.NET?",
                options: [
                    "a) Function",
                    "b) Sub",
                    "c) Property",
                    "d) Delegate"
                ],
                correctAnswer: "b) Sub"
            },
            {
                question: "En VB.NET, ¿cuál es la sentencia para usar elementos de otro namespace?",
                options: [
                    "a) using",
                    "b) import",
                    "c) Imports",
                    "d) namespace"
                ],
                correctAnswer: "c) Imports"
            },
            {
                question: "¿Cómo se denomina el constructor en .NET?",
                options: [
                    "a) Init",
                    "b) Build",
                    "c) New",
                    "d) Constructor"
                ],
                correctAnswer: "c) New"
            },
            {
                question: "¿Qué sentencia de control de errores se utiliza en .NET?",
                options: [
                    "a) try-catch-finally",
                    "b) Throw-Catch-Finally",
                    "c) Try Catch Finally",
                    "d) Error-Handler"
                ],
                correctAnswer: "c) Try Catch Finally"
            },
            {
                question: "Para que la sentencia Using libere automáticamente recursos, ¿qué interfaz deberían tener implementados los objetos/recursos?",
                options: [
                    "a) ISerializable",
                    "b) IDisposable",
                    "c) ICloneable",
                    "d) IConvertible"
                ],
                correctAnswer: "b) IDisposable"
            },
            {
                question: "¿A qué hace referencia la palabra clave Me en VB.NET?",
                options: [
                    "a) La clase base",
                    "b) La instancia actual",
                    "c) Un método estático",
                    "d) Un módulo"
                ],
                correctAnswer: "b) La instancia actual"
            },
            {
                question: "¿Cuál es el concepto en .NET similar a un puntero a función?",
                options: [
                    "a) Event",
                    "b) Property",
                    "c) Delegate",
                    "d) Interface"
                ],
                correctAnswer: "c) Delegate"
            },
            {
                question: "¿Qué palabra clave se usa en C# para sobrescribir un método?",
                options: [
                    "a) virtual",
                    "b) sealed",
                    "c) override",
                    "d) abstract"
                ],
                correctAnswer: "c) override"
            },
            {
                question: "¿Qué significa sealed cuando se aplica a una clase en .NET?",
                options: [
                    "a) Que la clase puede ser heredada, pero sus métodos no sobrescritos.",
                    "b) Que la clase no permite que nadie herede de ella.",
                    "c) Que la clase es abstracta y debe ser implementada.",
                    "d) Que la clase solo puede ser instanciada una vez."
                ],
                correctAnswer: "b) Que la clase no permite que nadie herede de ella."
            },
            {
                question: "¿Qué tipo de clase NO puede ser sealed?",
                options: [
                    "a) Una clase genérica",
                    "b) Una clase abstracta",
                    "c) Una clase interna",
                    "d) Una clase estática"
                ],
                correctAnswer: "b) Una clase abstracta"
            },
            {
                question: "Si un método se declara con abstract, ¿qué implica para su codificación?",
                options: [
                    "a) Se debe codificar en la misma clase.",
                    "b) No se codifica en la clase actual y debe ser implementado por los hijos.",
                    "c) Puede ser opcionalmente codificado.",
                    "d) Solo puede ser llamado desde la misma clase."
                ],
                correctAnswer: "b) No se codifica en la clase actual y debe ser implementado por los hijos."
            },
            {
                question: "¿Cómo se declaran los miembros de clase que no necesitan ser instanciados en C#?",
                options: [
                    "a) shared",
                    "b) static",
                    "c) public",
                    "d) const"
                ],
                correctAnswer: "b) static"
            },
            {
                question: "¿Qué palabra clave se usa para indicar herencia entre clases o interfaces en .NET?",
                options: [
                    "a) Implements",
                    "b) Inherits",
                    "c) Extends",
                    "d) Derives"
                ],
                correctAnswer: "b) Inherits"
            },
            {
                question: "¿Qué significa NotOverridable en un método?",
                options: [
                    "a) Que se puede sobrescribir en los hijos.",
                    "b) Que se debe sobrescribir en los hijos.",
                    "c) Que no se puede sobrescribir.",
                    "d) Que solo se puede sobrescribir una vez."
                ],
                correctAnswer: "c) Que no se puede sobrescribir."
            },
            {
                question: "¿Cuál es el equivalente a break de Java en un bucle for en .NET?",
                options: [
                    "a) Continue",
                    "b) Return",
                    "c) Exit",
                    "d) Stop"
                ],
                correctAnswer: "c) Exit"
            },
            {
                question: "¿Qué significa que Dataset es un conjunto desconectado de datos en ADO.NET?",
                options: [
                    "a) Que no puede acceder a la base de datos.",
                    "b) Que no necesita una conexión activa para manipular los datos.",
                    "c) Que solo funciona en modo online.",
                    "d) Que no puede contener datos de varias tablas."
                ],
                correctAnswer: "b) Que no necesita una conexión activa para manipular los datos."
            },
            {
                question: "¿Cuál es el equivalente de ADO.NET en Java?",
                options: [
                    "a) JPA",
                    "b) JDBC",
                    "c) Hibernate",
                    "d) EJB"
                ],
                correctAnswer: "b) JDBC"
            },
            {
                question: "¿Qué componente de ADO.NET en modo online es similar a ResultSet de Java?",
                options: [
                    "a) Connection",
                    "b) Command",
                    "c) Parameter",
                    "d) DataReader"
                ],
                correctAnswer: "d) DataReader"
            },
            {
                question: "¿Qué es Entity Framework?",
                options: [
                    "a) Un API de bajo nivel para bases de datos.",
                    "b) Un ORM de alto nivel.",
                    "c) Un lenguaje de consulta de datos.",
                    "d) Una herramienta de diseño de bases de datos."
                ],
                correctAnswer: "b) Un ORM de alto nivel."
            },
            {
                question: "¿Quién se encarga de las consultas SQL al usar Entity Framework?",
                options: [
                    "a) El programador",
                    "b) Entity Framework",
                    "c) La base de datos directamente",
                    "d) LINQ"
                ],
                correctAnswer: "b) Entity Framework"
            },
            {
                question: "¿Qué característica principal tiene LINQ?",
                options: [
                    "a) Solo puede consultar bases de datos relacionales.",
                    "b) Es independiente de la fuente de datos.",
                    "c) Requiere una conexión activa a la base de datos.",
                    "d) Fue introducido en la versión 2.0 de .NET."
                ],
                correctAnswer: "b) Es independiente de la fuente de datos."
            },
            {
                question: "¿Sobre qué tipos de fuentes puede hacer consultas LINQ?",
                options: [
                    "a) Solo objetos en memoria.",
                    "b) Solo bases de datos relacionales.",
                    "c) Objetos en memoria, bases de datos relacionales o XML.",
                    "d) Solo XML."
                ],
                correctAnswer: "c) Objetos en memoria, bases de datos relacionales o XML."
            },
            {
                question: "¿Qué motor es necesario para que el CLR entienda páginas web?",
                options: [
                    "a) Motor JavaServer Faces",
                    "b) Motor PHP",
                    "c) Motor ASP.NET Core",
                    "d) Motor Node.js"
                ],
                correctAnswer: "c) Motor ASP.NET Core"
            },
            {
                question: "¿Para qué se utiliza el archivo global.asax en las aplicaciones web de ASP.NET?",
                options: [
                    "a) Para definir el estilo CSS de la aplicación.",
                    "b) Para declarar y manejar eventos y objetos a nivel de aplicación y sesión.",
                    "c) Para configurar las conexiones a la base de datos.",
                    "d) Para almacenar el código JavaScript del lado del cliente."
                ],
                correctAnswer: "b) Para declarar y manejar eventos y objetos a nivel de aplicación y sesión."
            },
            {
                question: "En las aplicaciones web de ASP.NET Web Forms, ¿qué extensión corresponde a páginas de servicios web?",
                options: [
                    "a) .aspx",
                    "b) .ashx",
                    "c) .asmx",
                    "d) .html"
                ],
                correctAnswer: "c) .asmx"
            },
            {
                question: "¿Qué mejora a las Master Page en ASP.NET, ofreciendo un modelo de plantilla?",
                options: [
                    "a) Web Parts",
                    "b) Razor",
                    "c) User Controls",
                    "d) Custom Controls"
                ],
                correctAnswer: "b) Razor"
            },
            {
                question: "¿Cuál es una desventaja de la arquitectura Web Forms mencionada en el documento?",
                options: [
                    "a) Es demasiado compleja de programar.",
                    "b) No hay división entre la lógica de negocio y la capa de presentación.",
                    "c) No soporta eventos de usuario.",
                    "d) Requiere código JavaScript para funcionar."
                ],
                correctAnswer: "b) No hay división entre la lógica de negocio y la capa de presentación."
            },
            {
                question: "En la arquitectura ASP.NET MVC, ¿qué componente coordina la lógica de negocio y la invocación a la Vista?",
                options: [
                    "a) El Modelo",
                    "b) La Vista",
                    "c) El Controlador",
                    "d) El Motor ASP.NET"
                ],
                correctAnswer: "c) El Controlador"
            },
            {
                question: "¿Qué se utiliza en ASP.NET MVC para implementar las Vistas como si fueran plantillas?",
                options: [
                    "a) Master Page",
                    "b) Web Forms",
                    "c) Razor",
                    "d) HTML Helpers"
                ],
                correctAnswer: "c) Razor"
            },
            {
                question: "¿Qué tipo de servicio web es un estándar de la W3C y está basado en XML?",
                options: [
                    "a) REST",
                    "b) JSON-RPC",
                    "c) SOAP",
                    "d) GraphQL"
                ],
                correctAnswer: "c) SOAP"
            },
            {
                question: "Para crear un servicio web SOAP, ¿de qué clase se debe heredar?",
                options: [
                    "a) System.Web.UI.Page",
                    "b) System.Web.Services.WebService",
                    "c) System.ServiceModel.ServiceContract",
                    "d) System.Object"
                ],
                correctAnswer: "b) System.Web.Services.WebService"
            },
            {
                question: "¿Qué atributo se usa para publicar operaciones en un servicio web SOAP?",
                options: [
                    "a) [ServiceContract]",
                    "b) [OperationContract]",
                    "c) [WebMethod]",
                    "d) [Route]"
                ],
                correctAnswer: "c) [WebMethod]"
            },
            {
                question: "¿En qué está basado REST (Representational State Transfer)?",
                options: [
                    "a) RPC y XML",
                    "b) Puro HTTP y JSON",
                    "c) TCP/IP y SOAP",
                    "d) RMI y CORBA"
                ],
                correctAnswer: "b) Puro HTTP y JSON"
            },
            {
                question: "¿Qué herramienta se puede usar para hacer pruebas de servicios REST sin desarrollar un cliente?",
                options: [
                    "a) Visual Studio",
                    "b) Eclipse",
                    "c) Postman",
                    "d) Wireshark"
                ],
                correctAnswer: "c) Postman"
            },
            {
                question: "¿De qué clase heredan los servicios REST-Web API?",
                options: [
                    "a) WebService",
                    "b) Page",
                    "c) ApiController",
                    "d) ServiceBase"
                ],
                correctAnswer: "c) ApiController"
            },
            {
                question: "¿Qué retornan los servicios REST-Web API en lugar de una vista?",
                options: [
                    "a) HTML y CSS",
                    "b) HTTP STATUS CODES (Ejemplo: 200 + JSON)",
                    "c) Objetos serializados a XML",
                    "d) Un flujo binario"
                ],
                correctAnswer: "b) HTTP STATUS CODES (Ejemplo: 200 + JSON)"
            },
            {
                question: "¿Qué es IIS (Internet Information Server)?",
                options: [
                    "a) Un servidor de bases de datos.",
                    "b) Un motor de ejecución de código .NET, un servidor estático y un servidor FTP.",
                    "c) Un compilador de .NET.",
                    "d) Una herramienta de desarrollo integrado."
                ],
                correctAnswer: "b) Un motor de ejecución de código .NET, un servidor estático y un servidor FTP."
            },
            {
                question: "¿Qué módulo debe activarse en IIS para que funcione una ASP.NET Core Application?",
                options: [
                    "a) ASP.NET 4.x",
                    "b) ASP.NET Core Module",
                    "c) FTP Server",
                    "d) Web Server (IIS) Support"
                ],
                correctAnswer: "b) ASP.NET Core Module"
            },
            {
                question: "¿Qué archivo leen IIS y el módulo de ASP.NET Core para configurar una aplicación hospedada en IIS?",
                options: [
                    "a) appsettings.json",
                    "b) program.cs",
                    "c) web.config",
                    "d) startup.cs"
                ],
                correctAnswer: "c) web.config"
            },
            {
                question: "¿Cuál es el equivalente del IIS en Linux para el entorno de ejecución web?",
                options: [
                    "a) Apache HTTP Server",
                    "b) Nginx",
                    "c) Kestrel Web Server",
                    "d) Tomcat"
                ],
                correctAnswer: "c) Kestrel Web Server"
            },
            {
                question: "¿Kestrel es multiplataforma?",
                options: [
                    "a) No, solo para Linux.",
                    "b) No, solo para Windows.",
                    "c) Sí.",
                    "d) Solo para macOS."
                ],
                correctAnswer: "c) Sí."
            },
            {
                question: "¿Cuál es el propósito principal de la herramienta de línea de comando dotnet?",
                options: [
                    "a) Depurar aplicaciones .NET.",
                    "b) Generar aplicaciones, compilar y ejecutar.",
                    "c) Administrar paquetes NuGet.",
                    "d) Visualizar Assemblies."
                ],
                correctAnswer: "b) Generar aplicaciones, compilar y ejecutar."
            },
            {
                question: "¿Qué comando de dotnet se utiliza para crear un nuevo proyecto?",
                options: [
                    "a) dotnet run",
                    "b) dotnet build",
                    "c) dotnet add",
                    "d) dotnet new"
                ],
                correctAnswer: "d) dotnet new"
            },
            {
                question: "¿Qué herramienta de automatización del desarrollo es el equivalente a los plugins de Maven para definir tareas de compilación y empaquetado?",
                options: [
                    "a) NuGet",
                    "b) MSBuild",
                    "c) GAC",
                    "d) CLR"
                ],
                correctAnswer: "b) MSBuild"
            },
            {
                question: "¿Qué herramienta de automatización del desarrollo es el equivalente a la gestión de dependencias en .NET?",
                options: [
                    "a) MSBuild",
                    "b) GAC",
                    "c) NuGet",
                    "d) CLI"
                ],
                correctAnswer: "c) NuGet"
            },
            {
                question: "¿Dónde están depositadas las librerías para descargar el Assembly con NuGet?",
                options: [
                    "a) En el GAC.",
                    "b) En repositorios centrales.",
                    "c) En el directorio de instalación de Visual Studio.",
                    "d) En el sistema de archivos local únicamente."
                ],
                correctAnswer: "b) En repositorios centrales."
            },
            {
                question: "Considerando el siguiente fragmento de código: Dim number As Integer = 8 Select Case number Case 1 To 5 Debug.WriteLine(\"Between 1 and 5, inclusive\") Case 6, 7, 8 Debug.WriteLine(\"Between 6 and 8, inclusive\") Case 9 To 10 Debug.WriteLine(\"Equal to 9 or 10\") Case Else Debug.WriteLine(\"Not between 1 and 10, inclusive\") End Select ¿Qué salida producirá este código?",
                options: [
                    "a) Equal to 9 or 10",
                    "b) Between 1 and 5, inclusive",
                    "c) Between 6 and 8, inclusive",
                    "d) Not between 1 and 10, inclusive"
                ],
                correctAnswer: "c) Between 6 and 8, inclusive"
            },
            {
                question: "¿Qué estructura de control se utiliza en el siguiente fragmento de código para iterar hasta que index sea mayor que 10? While index <= 10 Debug.Write(index.ToString & \"\") index += 1 End While",
                options: [
                    "a) For",
                    "b) Do Loop Until",
                    "c) While",
                    "d) For Each"
                ],
                correctAnswer: "c) While"
            },
            {
                question: "¿Cuál de las siguientes es una de las tareas realizadas por el CLR?",
                options: [
                    "a) Diseñar la interfaz de usuario.",
                    "b) Gestión de la interfaz de red.",
                    "c) Recolección de basura.",
                    "d) Compilación de código fuente a CIL."
                ],
                correctAnswer: "c) Recolección de basura."
            },
            {
                question: "¿Qué es GAC en .NET?",
                options: [
                    "a) Global Assembly Compiler",
                    "b) Global Application Cache",
                    "c) Global Assembly Cache",
                    "d) General Access Control"
                ],
                correctAnswer: "c) Global Assembly Cache"
            },
            {
                question: "Si un lenguaje cumple ciertas reglas (CTS y CLS), ¿qué permite crear?",
                options: [
                    "a) Un ejecutable directamente.",
                    "b) Un compilador a bytecode.",
                    "c) Un interfaz de usuario.",
                    "d) Un gestor de bases de datos."
                ],
                correctAnswer: "b) Un compilador a bytecode."
            },
            {
                question: "¿Cuál de los siguientes lenguajes NO es mencionado como soportado por .NET?",
                options: [
                    "a) C#",
                    "b) F#",
                    "c) Java",
                    "d) VB.NET"
                ],
                correctAnswer: "c) Java"
            },
            {
                question: "¿Qué se publica para evitar que las clases \"base\" difieran entre implementaciones de .NET?",
                options: [
                    "a) .NET Core",
                    "b) .NET Framework",
                    "c) .NET STANDARD BCL",
                    "d) CLR"
                ],
                correctAnswer: "c) .NET STANDARD BCL"
            },
            {
                question: "¿Qué palabra clave se usa para definir una clase en varios ficheros VB?",
                options: [
                    "a) partial",
                    "b) abstract",
                    "c) shared",
                    "d) implements"
                ],
                correctAnswer: "a) partial"
            },
            {
                question: "¿Qué se puede decir de la inicialización de campos en las estructuras?",
                options: [
                    "a) Se pueden inicializar directamente.",
                    "b) No se pueden inicializar los campos.",
                    "c) Solo se pueden inicializar si son públicos.",
                    "d) Se inicializan con valores por defecto."
                ],
                correctAnswer: "b) No se pueden inicializar los campos."
            },
            {
                question: "¿Cómo es la duración de un módulo en un programa .NET?",
                options: [
                    "a) La misma que la instancia de un objeto.",
                    "b) La misma que el programa.",
                    "c) Depende de la memoria disponible.",
                    "d) Hasta que se llama a su destructor."
                ],
                correctAnswer: "b) La misma que el programa."
            },
            {
                question: "En VB.NET, para definir un procedimiento que no devuelve un valor, se usa:",
                options: [
                    "a) Function",
                    "b) Property",
                    "c) Sub",
                    "d) Event"
                ],
                correctAnswer: "c) Sub"
            },
            {
                question: "¿Cómo se denominan los atributos de .NET en Java?",
                options: [
                    "a) Métodos",
                    "b) Campos",
                    "c) Anotaciones",
                    "d) Interfaz"
                ],
                correctAnswer: "c) Anotaciones"
            },
            {
                question: "¿Qué concepto en .NET es similar a package de Java?",
                options: [
                    "a) Assembly",
                    "b) Namespace",
                    "c) Module",
                    "d) Project"
                ],
                correctAnswer: "b) Namespace"
            },
            {
                question: "¿A qué hace referencia MyBase en VB.NET?",
                options: [
                    "a) La instancia actual.",
                    "b) Un método estático.",
                    "c) La clase base de la que se está heredando.",
                    "d) Una interfaz."
                ],
                correctAnswer: "c) La clase base de la que se está heredando."
            },
            {
                question: "¿Qué declaración se utiliza para que un método SÍ PUEDE ser sobrescrito usando override?",
                options: [
                    "a) sealed",
                    "b) abstract",
                    "c) virtual",
                    "d) new"
                ],
                correctAnswer: "c) virtual"
            },
            {
                question: "¿Cuál es el significado de MustOverride?",
                options: [
                    "a) Un método que no puede ser sobrescrito en los hijos.",
                    "b) Un método que se debe sobrescribir en los hijos.",
                    "c) Un método que puede o no ser sobrescrito.",
                    "d) Un método que solo se puede sobrescribir en clases abstractas."
                ],
                correctAnswer: "b) Un método que se debe sobrescribir en los hijos."
            },
            {
                question: "¿Cuál es el modo de ADO.NET que maneja cursores y utiliza xxConnection, xxCommand, etc.?",
                options: [
                    "a) Modo offline",
                    "b) Modo conectado (online)",
                    "c) Modo desconectado",
                    "d) Modo XML"
                ],
                correctAnswer: "b) Modo conectado (online)"
            },
            {
                question: "¿Qué se define en Model.edmx en Entity Framework?",
                options: [
                    "a) Las propiedades del proyecto.",
                    "b) Las entidades asociadas a las tablas.",
                    "c) Las reglas de validación.",
                    "d) La configuración de la base de datos."
                ],
                correctAnswer: "b) Las entidades asociadas a las tablas."
            },
            {
                question: "¿Cuál de las siguientes afirmaciones sobre LINQ es correcta?",
                options: [
                    "a) Las consultas LINQ solo se pueden escribir en C#.",
                    "b) Fue introducido a partir de la v3.5.",
                    "c) Se usa para crear interfaces de usuario.",
                    "d) Solo soporta bases de datos Oracle."
                ],
                correctAnswer: "b) Fue introducido a partir de la v3.5."
            },
            {
                question: "¿Qué es global.asax en ASP.NET?",
                options: [
                    "a) Un archivo de configuración de seguridad.",
                    "b) Un archivo de estilos CSS global.",
                    "c) Un archivo opcional para manejar eventos a nivel de aplicación y sesión.",
                    "d) El archivo principal de inicio de la aplicación web."
                ],
                correctAnswer: "c) Un archivo opcional para manejar eventos a nivel de aplicación y sesión."
            },
            {
                question: "En Web Forms, ¿cuál es la extensión de las páginas principales?",
                options: [
                    "a) .ashx",
                    "b) .asmx",
                    "c) .aspx",
                    "d) .html"
                ],
                correctAnswer: "c) .aspx"
            },
            {
                question: "¿De qué clase hereda una página de Web Forms?",
                options: [
                    "a) System.Web.UI.Control",
                    "b) System.Web.UI.UserControl",
                    "c) System.Web.UI.Page",
                    "d) System.Web.HttpResponse"
                ],
                correctAnswer: "c) System.Web.UI.Page"
            },
            {
                question: "¿Qué arquitectura de aplicación web es considerada \"más difícil de programar, pero arquitectónicamente más flexible, mejor diseñada y con mejor mantenimiento\"?",
                options: [
                    "a) Web Forms",
                    "b) MVC",
                    "c) SOAP Services",
                    "d) Desktop Applications"
                ],
                correctAnswer: "b) MVC"
            },
            {
                question: "En ASP.NET MVC, ¿dónde se configura la URL asociada a un \"Controlador\"?",
                options: [
                    "a) web.config",
                    "b) RouteConfig",
                    "c) global.asax",
                    "d) appsettings.json"
                ],
                correctAnswer: "b) RouteConfig"
            },
            {
                question: "¿Qué no es un estándar de la W3C, pero es un estándar de facto para servicios web?",
                options: [
                    "a) SOAP",
                    "b) WSDL",
                    "c) REST",
                    "d) UDDI"
                ],
                correctAnswer: "c) REST"
            },
            {
                question: "¿Cuál es el servidor estático equivalente a Apache en el entorno de ejecución web de Windows?",
                options: [
                    "a) Kestrel",
                    "b) IIS",
                    "c) Nginx",
                    "d) Tomcat"
                ],
                correctAnswer: "b) IIS"
            },
            {
                question: "¿Cuál es el comando de dotnet que compila y ejecuta un proyecto?",
                options: [
                    "a) dotnet build",
                    "b) dotnet run",
                    "c) dotnet compile",
                    "d) dotnet publish"
                ],
                correctAnswer: "b) dotnet run"
            },
            {
                question: "¿Qué comando de PowerShell se puede usar para instalar un paquete NuGet?",
                options: [
                    "a) Install-Package",
                    "b) Add-Package",
                    "c) Get-Package",
                    "d) Update-Package"
                ],
                correctAnswer: "a) Install-Package"
            },
            {
                question: "Según el fragmento de código, ¿qué tipo de bucle se representa en Do While index <= 10 Debug.Write(index.ToString & \"\") index += 1 Loop?",
                options: [
                    "a) For",
                    "b) While",
                    "c) Do While Loop",
                    "d) For Each"
                ],
                correctAnswer: "c) Do While Loop"
            },
            {
                question: "En el ejemplo TryExample(), ¿qué se mostrará en el MessageBox del bloque Catch?",
                options: [
                    "a) \"end of Try block\"",
                    "b) \"in Finally block\"",
                    "c) El mensaje de la excepción \"Divide by Zero\" y el Stack Trace.",
                    "d) Un mensaje de éxito."
                ],
                correctAnswer: "c) El mensaje de la excepción \"Divide by Zero\" y el Stack Trace."
            }
        ];

               // Variables de estado del quiz
        let currentQuestionIndex = 0;
        let score = 0;
        // userAnswers guarda el texto de la opción seleccionada (o null)
        // Corregido: Usar quizData.length en lugar de questions.length
        const userAnswers = new Array(quizData.length).fill(null);
        // scoredQuestions guarda true si la pregunta fue respondida correctamente, false si fue incorrecta o no respondida
        // Corregido: Usar quizData.length en lugar de questions.length
        const scoredQuestions = new Array(quizData.length).fill(false); 

        // Referencias a los elementos del DOM
        const quizContainer = document.getElementById('quizContainer');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const restartBtn = document.getElementById('restartBtn');
        const restartInlineBtn = document.getElementById('restartInlineBtn');
        const finalScoreDiv = document.getElementById('finalScore');
        const progressBar = document.getElementById('progressBar');
        const finalScoreDisplay = finalScoreDiv.querySelector('.score-display');
        const correctCountSpan = document.getElementById('correctCount');
        const incorrectCountSpan = document.getElementById('incorrectCount');
        const unansweredCountSpan = document.getElementById('unansweredCount');

        /**
         * Carga el estado del quiz guardado en localStorage.
         * Si no existe, inicializa un nuevo estado.
         */
        function loadQuizState() {
            try {
                const savedState = JSON.parse(localStorage.getItem('quizState'));
                if (savedState) {
                    currentQuestionIndex = savedState.currentQuestionIndex;
                    score = savedState.score;
                    // Asegurarse de que los arrays tengan el tamaño correcto y copiar los valores
                    userAnswers.splice(0, savedState.userAnswers.length, ...savedState.userAnswers);
                    scoredQuestions.splice(0, savedState.scoredQuestions.length, ...savedState.scoredQuestions);
                }
            } catch (e) {
                console.error("Error al cargar el estado del quiz:", e);
                // Si hay un error, el estado se reiniciará a los valores por defecto
            }
        }

        /**
         * Guarda el estado actual del quiz en localStorage.
         */
        function saveQuizState() {
            const quizState = {
                currentQuestionIndex: currentQuestionIndex,
                score: score,
                userAnswers: userAnswers,
                scoredQuestions: scoredQuestions
            };
            localStorage.setItem('quizState', JSON.stringify(quizState));
        }

        /**
         * Carga y muestra la pregunta actual.
         */
        function loadQuestion() {
            // Corregido: Usar quizData.length en lugar de questions.length
            if (currentQuestionIndex >= quizData.length) {
                showResults();
                return;
            }

            // Corregido: Usar quizData en lugar de questions
            const currentQuestion = quizData[currentQuestionIndex];
            quizContainer.innerHTML = `
                <div class="question-card">
                    <p class="question-text"></p>
                    <div class="options-container">
                        ${currentQuestion.options.map(() => `
                            <button class="option-button"></button>
                        `).join('')}
                    </div>
                    <div class="solution hidden">
                        <strong>Solución:</strong> <span class="solution-text"></span>
                    </div>
                </div>
            `;

            const questionTextElement = quizContainer.querySelector('.question-text');
            const optionsContainer = quizContainer.querySelector('.options-container');
            const questionCard = quizContainer.querySelector('.question-card');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');

            // Usar textContent para insertar el texto de la pregunta de forma segura
            questionTextElement.textContent = `${currentQuestionIndex + 1}. ${currentQuestion.question}`;

            // Asignar el texto y los atributos data-option a cada botón de opción
            currentQuestion.options.forEach((option, index) => {
                optionButtons[index].textContent = option; // Inserta el texto como texto plano
                optionButtons[index].dataset.option = option; // Guarda la opción original para la lógica
                optionButtons[index].addEventListener('click', handleOptionClick);
            });

            // Resalta la respuesta del usuario si ya ha respondido y aplica estilos
            const savedAnswer = userAnswers[currentQuestionIndex];
            if (savedAnswer !== null) {
                // Encuentra el botón por su atributo data-option, que contiene la respuesta guardada
                const selectedButton = optionsContainer.querySelector(`[data-option="${savedAnswer}"]`);
                if (selectedButton) {
                    // Deshabilita todos los botones para que no se pueda cambiar la respuesta
                    optionButtons.forEach(button => {
                        button.classList.add('disabled');
                        button.removeEventListener('click', handleOptionClick); // Remover listener si ya está respondida
                    });

                    // Aplica los estilos de la respuesta guardada
                    const isCorrect = (savedAnswer === currentQuestion.correctAnswer);
                    if (isCorrect) {
                        selectedButton.classList.add('correct-answer');
                        questionCard.classList.add('correct');
                    } else {
                        selectedButton.classList.add('incorrect-answer');
                        questionCard.classList.add('incorrect');
                        // Muestra la respuesta correcta si la guardada fue incorrecta
                        const correctButton = optionsContainer.querySelector(`[data-option="${currentQuestion.correctAnswer}"]`);
                        if (correctButton) {
                            correctButton.classList.add('correct-answer');
                        }
                    }
                    // Añadir feedback visual (Correcto/Incorrecto)
                    updateQuestionCardVisuals(isCorrect);
                }
            }

            // Actualiza el estado de los botones de navegación y la barra de progreso
            updateNavButtons();
            updateProgressBar();
        }

        /**
         * Maneja el evento de clic en una opción de respuesta.
         * @param {Event} event - El evento de clic.
         */
        function handleOptionClick(event) {
            const selectedOptionButton = event.target;
            const selectedOption = selectedOptionButton.dataset.option; // Obtiene la opción del atributo data-option
            // Corregido: Usar quizData en lugar de questions
            const currentQuestion = quizData[currentQuestionIndex];
            const optionsContainer = quizContainer.querySelector('.options-container');
            const questionCard = quizContainer.querySelector('.question-card');

            // Deshabilita todos los botones de opción para evitar múltiples respuestas
            optionsContainer.querySelectorAll('.option-button').forEach(button => {
                button.classList.add('disabled');
                button.removeEventListener('click', handleOptionClick);
            });

            // Actualiza la respuesta del usuario y la guarda
            userAnswers[currentQuestionIndex] = selectedOption;
            
            // Comprueba si la respuesta es correcta
            const isCorrectAttempt = (selectedOption === currentQuestion.correctAnswer);

            if (isCorrectAttempt) {
                selectedOptionButton.classList.add('correct-answer');
                questionCard.classList.add('correct');
                // Si no se ha puntuado antes, añade un punto y marca como correcta
                if (!scoredQuestions[currentQuestionIndex]) { // scoredQuestions[index] will be false if not yet scored
                    score++;
                    scoredQuestions[currentQuestionIndex] = true; // Marca como correcta
                }
            } else {
                selectedOptionButton.classList.add('incorrect-answer');
                questionCard.classList.add('incorrect');
                // Si se había puntuado como correcta (porque el usuario cambió de opinión), quita el punto
                if (scoredQuestions[currentQuestionIndex]) { // scoredQuestions[index] will be true if it was previously correct
                    score--;
                    scoredQuestions[currentQuestionIndex] = false; // Marca como incorrecta
                }
                // Resalta la respuesta correcta
                const correctAnswerButton = optionsContainer.querySelector(`[data-option="${currentQuestion.correctAnswer}"]`);
                if (correctAnswerButton) {
                    correctAnswerButton.classList.add('correct-answer');
                }
            }
            
            saveQuizState(); // Guarda el estado después de actualizar score y scoredQuestions

            // Añadir feedback visual (Correcto/Incorrecto)
            updateQuestionCardVisuals(isCorrectAttempt);

            // Muestra la solución detallada si existe (aunque no hay en tu questions actual)
            if (currentQuestion.solution) {
                const solutionDiv = quizContainer.querySelector('.solution');
                solutionDiv.classList.remove('hidden');
                solutionDiv.querySelector('.solution-text').textContent = currentQuestion.solution;
            }
        }

        /**
         * Actualiza el estilo de la tarjeta de pregunta y añade feedback visual.
         * @param {boolean} isCorrect - Indica si la respuesta es correcta.
         */
        function updateQuestionCardVisuals(isCorrect) {
            const questionCard = document.querySelector('.question-card');
            // Eliminar feedback anterior si existe
            const existingFeedback = questionCard.querySelector('.feedback');
            if (existingFeedback) {
                existingFeedback.remove();
            }

            const feedbackMessage = document.createElement('p');
            feedbackMessage.classList.add('feedback');

            if (isCorrect) {
                feedbackMessage.textContent = '¡Correcto!';
                feedbackMessage.classList.add('correct');
            } else {
                feedbackMessage.textContent = 'Incorrecto. La respuesta correcta es la marcada en verde.';
                feedbackMessage.classList.add('incorrect');
            }
            questionCard.appendChild(feedbackMessage);
        }

        /**
         * Muestra los resultados finales del quiz.
         */
        function showResults() {
            quizContainer.classList.add('hidden');
            prevBtn.classList.add('hidden');
            nextBtn.classList.add('hidden');
            restartInlineBtn.classList.add('hidden');
            progressBar.parentElement.classList.add('hidden');
            finalScoreDiv.classList.remove('hidden');

            // Calcula y muestra las estadísticas
            const correctAnswers = scoredQuestions.filter(isCorrect => isCorrect).length;
            // Una respuesta es incorrecta si el usuario respondió (no es null) Y no fue marcada como correcta (scoredQuestions[index] es false)
            const incorrectAnswers = userAnswers.filter((answer, index) => answer !== null && !scoredQuestions[index]).length;
            const unansweredQuestions = userAnswers.filter(answer => answer === null).length;

            // Corregido: Usar quizData.length en lugar de questions.length
            finalScoreDisplay.textContent = `Tu puntuación final es ${correctAnswers} de ${quizData.length}`;
            correctCountSpan.textContent = correctAnswers;
            incorrectCountSpan.textContent = incorrectAnswers;
            unansweredCountSpan.textContent = unansweredQuestions;
        }
		
        /**
         * Actualiza el estado de los botones de navegación.
         */
        function updateNavButtons() {
            prevBtn.disabled = currentQuestionIndex === 0;
            // Corregido: Usar quizData.length en lugar de questions.length
            nextBtn.textContent = currentQuestionIndex === quizData.length - 1 ? 'Finalizar' : 'Siguiente';
        }

        /**
         * Actualiza la barra de progreso.
         */
        function updateProgressBar() {
            // Corregido: Usar quizData.length en lugar de questions.length
            const progress = ((currentQuestionIndex + 1) / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        /**
         * Reinicia el quiz a su estado inicial.
         */
        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers.fill(null);
            scoredQuestions.fill(false);
            localStorage.clear(); // Limpia el localStorage
            
            quizContainer.classList.remove('hidden');
            prevBtn.classList.remove('hidden');
            nextBtn.classList.remove('hidden');
            restartInlineBtn.classList.remove('hidden');
            progressBar.parentElement.classList.remove('hidden');
            finalScoreDiv.classList.add('hidden');
            loadQuestion();
        }

        // Event listeners
        prevBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        });

        nextBtn.addEventListener('click', () => {
            // Corregido: Usar quizData.length en lugar de questions.length
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                showResults();
            }
        });

        restartBtn.addEventListener('click', restartQuiz);
        restartInlineBtn.addEventListener('click', restartQuiz);

        // Carga inicial
        window.onload = function() {
            loadQuizState();
            loadQuestion();
        };
    </script>
</body>
</html>

