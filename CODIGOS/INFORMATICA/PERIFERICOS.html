<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PERIFERICOS</title>
    <!-- Enlace a Tailwind CSS para las clases de la estructura HTML -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS completo para el estilo del quiz -->
    <style>
        /* Estilos generales del cuerpo */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }

        /* Contenedor principal del quiz */
        .container {
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 30px;
            max-width: 800px;
            width: 100%;
            margin-top: 20px;
        }

        /* Tarjeta de la pregunta */
        .question-card {
            background-color: #f8fafc;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease-in-out;
        }

        /* Estilo para la tarjeta de pregunta correcta */
        .question-card.correct {
            background-color: #d4edda;
            border-color: #28a745;
        }

        /* Estilo para la tarjeta de pregunta incorrecta */
        .question-card.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
        }

        /* Texto de la pregunta */
        .question-text {
            font-size: 1.15rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        /* Botones de opciones */
        .option-button {
            display: block;
            width: 100%;
            text-align: left;
            padding: 12px 18px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid #cbd5e0;
            background-color: #ffffff;
            color: #4a5568;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        /* Efecto hover para los botones de opciones */
        .option-button:hover:not(.disabled) {
            background-color: #e2e8f0;
            border-color: #a0aec0;
        }

        /* Estilo para el botón de opción seleccionado */
        .option-button.selected {
            border-color: #4299e1;
            background-color: #ebf8ff;
            font-weight: 600;
        }

        /* Estilo para la respuesta correcta */
        .option-button.correct-answer {
            background-color: #28a745;
            color: #ffffff;
            border-color: #28a745;
            font-weight: 700;
        }

        /* Estilo para la respuesta incorrecta */
        .option-button.incorrect-answer {
            background-color: #dc3545;
            color: #ffffff;
            border-color: #dc3545;
            font-weight: 700;
        }

        /* Estilo para los botones deshabilitados */
        .option-button.disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }

        /* Contenedor de la solución */
        .solution {
            margin-top: 15px;
            padding: 10px 15px;
            border-radius: 8px;
            background-color: #e0f2f7;
            color: #2c5282;
            font-size: 0.95rem;
            font-weight: 500;
            border: 1px solid #90cdf4;
        }

        /* Contenedor del feedback (correcto/incorrecto) */
        .feedback {
            margin-top: 15px;
            font-weight: 600;
            font-size: 1rem;
            text-align: center;
        }

        /* Estilo para feedback correcto */
        .feedback.correct {
            color: #28a745;
        }

        /* Estilo para feedback incorrecto */
        .feedback.incorrect {
            color: #dc3545;
        }

        /* Contenedor de los botones de navegación */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }

        /* Estilo base para los botones de navegación */
        .nav-button {
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            flex-grow: 1;
            text-align: center;
        }

        /* Estilo para el botón "Anterior" */
        .nav-button.prev {
            background-color: #6b7280;
            color: #ffffff;
        }
        .nav-button.prev:hover:not(:disabled) {
            background-color: #4b5563;
            transform: translateY(-2px);
        }

        /* Estilo para el botón "Siguiente" */
        .nav-button.next {
            background-color: #4299e1;
            color: #ffffff;
        }
        .nav-button.next:hover:not(:disabled) {
            background-color: #3182ce;
            transform: translateY(-2px);
        }

        /* Estilo para el botón de reinicio en línea */
        .nav-button.restart-inline {
            background-color: #f50b0b;
            color: #ffffff;
        }
        .nav-button.restart-inline:hover:not(:disabled) {
            background-color: #ac0505;
            transform: translateY(-2px);
        }

        /* Estilo para los botones deshabilitados */
        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Barra de progreso */
        .progress-bar-container {
            width: 100%;
            background-color: #e2e8f0;
            border-radius: 5px;
            height: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: #4299e1;
            width: 0%;
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        /* Visualización de la puntuación final */
        .score-display {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: #2d3748;
            margin-top: 20px;
        }

        /* Resumen de resultados */
        .results-summary {
            margin-top: 20px;
            padding: 20px;
            background-color: #f8fafc;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
        }

        .results-summary p {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #2d3748;
        }

        .results-summary p strong {
            font-weight: 700;
        }

        /* Botón de reinicio final */
        .restart-button {
            display: block;
            width: fit-content;
            margin: 20px auto 0 auto;
            padding: 12px 30px;
            background-color: #48bb78;
            color: #ffffff;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .restart-button:hover {
            background-color: #38a169;
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
      <h1 style="color: #003366; font-family: 'Georgia', serif; font-size: 3rem; text-align: center; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);">PERIFERICOS</h1>

        <!-- Barra de progreso -->
        <div class="progress-bar-container">
            <div id="progressBar" class="progress-bar"></div>
        </div>

        <!-- Contenedor principal de las preguntas -->
        <div id="quizContainer">
            <!-- Las preguntas se cargarán dinámicamente aquí -->
        </div>

        <!-- Botones de navegación -->
        <div class="navigation-buttons">
            <button id="prevBtn" class="nav-button prev" disabled>Anterior</button>
            <button id="restartInlineBtn" class="nav-button restart-inline">Reiniciar Test</button>
            <button id="nextBtn" class="nav-button next">Siguiente</button>
        </div>

        <!-- Contenedor de la puntuación final -->
        <div id="finalScore" class="hidden">
            <div class="score-display"></div>
            <div class="results-summary">
                <p><strong>Preguntas Correctas:</strong> <span id="correctCount">0</span></p>
                <p><strong>Preguntas Incorrectas:</strong> <span id="incorrectCount">0</span></p>
                <p><strong>Preguntas Sin Contestar:</strong> <span id="unansweredCount">0</span></p>
            </div>
            <button id="restartBtn" class="restart-button">Reiniciar Test</button>
        </div>
    </div>
    <script>
        const quizData = [
            {
                question: "¿Cuál es el primer paso en el proceso de interacción con un teclado según el diagrama?",
                options: [
                    "a) El Controlador genera una interrupción (IRQ).",
                    "b) La PIC genera el vector de interrupción 09H.",
                    "c) Se presiona una tecla y llega al Controlador del teclado.",
                    "d) La PIC le dice a la CPU que se detenga."
                ],
                correctAnswer: "c) Se presiona una tecla y llega al Controlador del teclado."
            },
            {
                question: "Después de que se presiona una tecla, ¿qué componente genera una interrupción o IRQ que llega a la PIC?",
                options: [
                    "a) La CPU",
                    "b) El Dispositivo",
                    "c) El Controlador",
                    "d) La RAM"
                ],
                correctAnswer: "c) El Controlador"
            },
            {
                question: "¿Qué vector de interrupción genera la PIC para buscar en la RAM la dirección que apunta a la ISR?",
                options: [
                    "a) 00H",
                    "b) 09H",
                    "c) 0FH",
                    "d) 16H"
                ],
                correctAnswer: "b) 09H"
            },
            {
                question: "¿Qué le indica la PIC a la CPU después de generar el vector de interrupción?",
                options: [
                    "a) Que continúe con la tarea actual.",
                    "b) Que ejecute el firmware.",
                    "c) Que se detenga para atender la interrupción y ejecutar la ISR.",
                    "d) Que ignore la interrupción."
                ],
                correctAnswer: "c) Que se detenga para atender la interrupción y ejecutar la ISR."
            },
            {
                question: "¿Qué significan las siglas IRQ?",
                options: [
                    "a) Interrupt Routine Queue",
                    "b) Interrupt ReQuest.",
                    "c) Interrupt Response Query",
                    "d) Input Register Queue"
                ],
                correctAnswer: "b) Interrupt ReQuest."
            },
            {
                question: "Según el documento, ¿qué es un Controlador en el contexto de los periféricos?",
                options: [
                    "a) Un software que gestiona la memoria.",
                    "b) Un chip con registro de control, estado y datos y firmware con la lógica.",
                    "c) Un dispositivo de almacenamiento.",
                    "d) Un bus de datos."
                ],
                correctAnswer: "b) Un chip con registro de control, estado y datos y firmware con la lógica."
            },
            {
                question: "¿Qué es el Firmware?",
                options: [
                    "a) Un tipo de memoria volátil.",
                    "b) ROM Actualizable.",
                    "c) Un sistema operativo.",
                    "d) Un componente de la CPU."
                ],
                correctAnswer: "b) ROM Actualizable."
            },
            {
                question: "¿Qué significan las siglas PIC?",
                options: [
                    "a) Peripheral Interface Controller",
                    "b) Programable Interrupt Channel",
                    "c) Controlador Programable de Interrupciones.",
                    "d) Processor Interface Chip"
                ],
                correctAnswer: "c) Controlador Programable de Interrupciones."
            },
            {
                question: "¿Qué es un Vector de interrupción?",
                options: [
                    "a) Una dirección de memoria fija.",
                    "b) Índice de la tabla dentro de la RAM que sirve para localizar la ISR.",
                    "c) Un tipo de interrupción de hardware.",
                    "d) Un registro de la CPU."
                ],
                correctAnswer: "b) Índice de la tabla dentro de la RAM que sirve para localizar la ISR."
            },
            {
                question: "¿Qué significan las siglas ISR?",
                options: [
                    "a) Input State Register",
                    "b) Internal Service Routine",
                    "c) Interrupt Service Routine.",
                    "d) Interruption System Request"
                ],
                correctAnswer: "c) Interrupt Service Routine."
            },
            {
                question: "¿Qué es un Driver en el contexto de las interrupciones?",
                options: [
                    "a) El hardware que genera la interrupción.",
                    "b) Código que atiende a la interrupción hw.",
                    "c) Un dispositivo de entrada/salida.",
                    "d) Una señal de control."
                ],
                correctAnswer: "b) Código que atiende a la interrupción hw."
            },
            {
                question: "¿Qué método de sincronización CPU-Dispositivo implica que la CPU pregunta periódicamente al dispositivo para conocer su estado?",
                options: [
                    "a) Por Interrupciones",
                    "b) Por DMA",
                    "c) Por Polling.",
                    "d) Por Traps"
                ],
                correctAnswer: "c) Por Polling."
            },
            {
                question: "¿Qué método de sincronización CPU-Dispositivo permite a los dispositivos operar directamente sobre la memoria sin intervención de la CPU, salvo comienzo o fin de la operación?",
                options: [
                    "a) Por Polling",
                    "b) Por Interrupciones",
                    "c) Por DMA: Acceso Directo a Memoria.",
                    "d) Por Traps"
                ],
                correctAnswer: "c) Por DMA: Acceso Directo a Memoria."
            },
            {
                question: "Según el documento, ¿qué posibles problemas de coherencia pueden surgir con DMA?",
                options: [
                    "a) De la RAM",
                    "b) De la caché.",
                    "c) Del registro de datos",
                    "d) Del bus de direcciones"
                ],
                correctAnswer: "b) De la caché."
            },
            {
                question: "¿Qué dispositivos suelen usar DMA según el texto?",
                options: [
                    "a) El teclado y el ratón.",
                    "b) El disco duro y la tarjeta gráfica.",
                    "c) La impresora y el escáner.",
                    "d) Los dispositivos USB."
                ],
                correctAnswer: "b) El disco duro y la tarjeta gráfica."
            },
            {
                question: "La transferencia de datos entre CPU y Dispositivos se realiza a través de:",
                options: [
                    "a) Puertos USB",
                    "b) puertos E/S (instrucciones IN/OUT).",
                    "c) Ranuras PCI",
                    "d) Conexiones inalámbricas"
                ],
                correctAnswer: "b) puertos E/S (instrucciones IN/OUT)."
            },
            {
                question: "¿Cuáles son las instrucciones utilizadas para la lectura/escritura a través de puertos E/S?",
                options: [
                    "a) READ/WRITE",
                    "b) GET/PUT",
                    "c) IN/OUT.",
                    "d) LOAD/STORE"
                ],
                correctAnswer: "c) IN/OUT."
            },
            {
                question: "¿Cuál es el puerto de estado/control para el teclado, según el ejemplo dado?",
                options: [
                    "a) Puerto 60h",
                    "b) Puerto 64h.",
                    "c) Puerto 80h",
                    "d) Puerto 3F8h"
                ],
                correctAnswer: "b) Puerto 64h."
            },
            {
                question: "¿Cuál es el puerto de datos para el teclado, según el ejemplo dado?",
                options: [
                    "a) Puerto 60h.",
                    "b) Puerto 64h",
                    "c) Puerto 80h",
                    "d) Puerto 3F8h"
                ],
                correctAnswer: "a) Puerto 60h."
            },
            {
                question: "¿Qué es el 'caching' en el contexto de la transferencia de datos?",
                options: [
                    "a) Un proceso de respaldo de datos.",
                    "b) Una memoria intermedia.",
                    "c) Caché temporal.",
                    "d) Una técnica de compresión de datos."
                ],
                correctAnswer: "c) Caché temporal."
            },
            {
                question: "¿Qué es el 'buffering' en el contexto de la transferencia de datos?",
                options: [
                    "a) Un dispositivo de entrada.",
                    "b) Memoria intermedia.",
                    "c) Un tipo de procesador.",
                    "d) Un protocolo de red."
                ],
                correctAnswer: "b) Memoria intermedia."
            },
            {
                question: "¿Qué es el 'spooling'?",
                options: [
                    "a) Una técnica de encriptación.",
                    "b) Un tipo de cable de red.",
                    "c) Buffer.",
                    "d) Un formato de archivo."
                ],
                correctAnswer: "c) Buffer."
            },
            {
                question: "¿Cuáles son los formatos de los discos ópticos CD-ROM/DVD?",
                options: [
                    "a) FAT32 y NTFS",
                    "b) ISO9660 y UDF.",
                    "c) HFS+ y ext4",
                    "d) exFAT y APFS"
                ],
                correctAnswer: "b) ISO9660 y UDF."
            },
            {
                question: "¿Qué extensión de formato para discos ópticos permite nombres largos?",
                options: [
                    "a) Rock Ridge",
                    "b) Joilet.",
                    "c) El Torito",
                    "d) UDF"
                ],
                correctAnswer: "b) Joilet."
            },
            {
                question: "¿Qué se entiende por 'el torito' en relación con los discos ópticos?",
                options: [
                    "a) Un tipo de formato de audio.",
                    "b) Un método de protección contra copia.",
                    "c) El arranque desde el CD.",
                    "d) Un tamaño específico de disco."
                ],
                correctAnswer: "c) El arranque desde el CD."
            },
            {
                question: "¿Qué elementos determinan la arquitectura de una unidad de disco rígido o mecánico (HDD)?",
                options: [
                    "a) Píxeles y resolución.",
                    "b) Cilindro / Pista; Cabeza L/E.",
                    "c) Bits y bytes.",
                    "d) Sectores y clústeres únicamente."
                ],
                correctAnswer: "b) Cilindro / Pista; Cabeza L/E."
            },
            {
                question: "¿Cómo se llama el direccionamiento 'real' basado en Cilindro-Cabeza-Sector para HDD?",
                options: [
                    "a) LBA",
                    "b) IDE",
                    "c) CHS (Cylinder-Head-Sector).",
                    "d) PATA"
                ],
                correctAnswer: "c) CHS (Cylinder-Head-Sector)."
            },
            {
                question: "¿Cómo se llama el direccionamiento lineal para HDD?",
                options: [
                    "a) CHS",
                    "b) LBA (Logical Block Addressing).",
                    "c) SCSI",
                    "d) SATA"
                ],
                correctAnswer: "b) LBA (Logical Block Addressing)."
            },
            {
                question: "¿Qué tipo de interfaz es IDE/PATA?",
                options: [
                    "a) Serie",
                    "b) Paralelo.",
                    "c) Óptica",
                    "d) Inalámbrica"
                ],
                correctAnswer: "b) Paralelo."
            },
            {
                question: "¿Cuántos dispositivos puede soportar la interfaz SCSI?",
                options: [
                    "a) De 1 a 2",
                    "b) De 7 a 15.",
                    "c) Más de 100",
                    "d) Solo uno"
                ],
                correctAnswer: "b) De 7 a 15."
            },
            {
                question: "¿Qué tipo de interfaz es SATA?",
                options: [
                    "a) Paralelo",
                    "b) Serie.",
                    "c) Inalámbrica",
                    "d) Óptica"
                ],
                correctAnswer: "b) Serie."
            },
            {
                question: "¿Cuál es la velocidad de transferencia de SATA-1?",
                options: [
                    "a) 3 Gbps",
                    "b) 1,5 Gbps.",
                    "c) 6 Gbps",
                    "d) 12 Gbps"
                ],
                correctAnswer: "b) 1,5 Gbps."
            },
            {
                question: "¿Cuál es la velocidad de transferencia de SATA-3?",
                options: [
                    "a) 1,5 Gbps",
                    "b) 3 Gbps",
                    "c) 6 Gbps.",
                    "d) 12 Gbps"
                ],
                correctAnswer: "c) 6 Gbps."
            },
            {
                question: "¿Qué significan las siglas SAS?",
                options: [
                    "a) Serial Advanced Storage",
                    "b) Simple Access System",
                    "c) Serial Attached SCSI.",
                    "d) Standard Access Serial"
                ],
                correctAnswer: "c) Serial Attached SCSI."
            },
            {
                question: "¿Qué identificación única tiene cada dispositivo en SAS?",
                options: [
                    "a) ID de puerto",
                    "b) WWN.",
                    "c) Dirección MAC",
                    "d) Número de serie"
                ],
                correctAnswer: "b) WWN."
            },
            {
                question: "¿Cuántos dispositivos por dominio puede soportar SAS?",
                options: [
                    "a) 7",
                    "b) 15",
                    "c) 16.384.",
                    "d) Ilimitados"
                ],
                correctAnswer: "c) 16.384."
            },
            {
                question: "¿Cuál es la velocidad de transferencia de SAS-4?",
                options: [
                    "a) 3 Gbps",
                    "b) 6 Gbps",
                    "c) 12 Gbps",
                    "d) 22,5 Gbps."
                ],
                correctAnswer: "d) 22,5 Gbps."
            },
            {
                question: "¿En qué tipo de memorias se basan las unidades de disco sólido (SSD)?",
                options: [
                    "a) SRAM",
                    "b) DRAM",
                    "c) memorias Flash/Nand.",
                    "d) EEPROM"
                ],
                correctAnswer: "c) memorias Flash/Nand."
            },
            {
                question: "¿Cuántos bits por celda almacena la tecnología SLC en SSD?",
                options: [
                    "a) 1 bit.",
                    "b) 2 bits",
                    "c) 3 bits",
                    "d) 4 bits"
                ],
                correctAnswer: "a) 1 bit."
            },
            {
                question: "¿Cuántos bits por celda almacena la tecnología MLC en SSD?",
                options: [
                    "a) 1 bit",
                    "b) 2 bits.",
                    "c) 3 bits",
                    "d) 4 bits"
                ],
                correctAnswer: "b) 2 bits."
            },
            {
                question: "¿Cuántos bits por celda almacena la tecnología TLC en SSD?",
                options: [
                    "a) 1 bit",
                    "b) 2 bits",
                    "c) 3 bits.",
                    "d) 4 bits"
                ],
                correctAnswer: "c) 3 bits."
            },
            {
                question: "¿Cuántos bits por celda almacena la tecnología QLC en SSD?",
                options: [
                    "a) 1 bit",
                    "b) 2 bits",
                    "c) 3 bits",
                    "d) 4 bits."
                ],
                correctAnswer: "d) 4 bits."
            },
            {
                question: "¿Qué interfaz de SSD reemplaza a mSATA y puede conectarse por SATA o PCI-e?",
                options: [
                    "a) NVMe",
                    "b) U.2",
                    "c) M.2.",
                    "d) SAS"
                ],
                correctAnswer: "c) M.2."
            },
            {
                question: "¿Qué tipo de conexión utiliza M.2 NVMe?",
                options: [
                    "a) SATA",
                    "b) PCI-e.",
                    "c) USB",
                    "d) Thunderbolt"
                ],
                correctAnswer: "b) PCI-e."
            },
            {
                question: "¿Cuántas 'lanes' usa NVMe?",
                options: [
                    "a) 1",
                    "b) 2",
                    "c) 4.",
                    "d) 8"
                ],
                correctAnswer: "c) 4."
            },
            {
                question: "¿A qué bus de datos se conecta NVMe?",
                options: [
                    "a) SATA",
                    "b) USB",
                    "c) PCI-e.",
                    "d) IDE"
                ],
                correctAnswer: "c) PCI-e."
            },
            {
                question: "¿Cuál es la velocidad de PCI-e 7?",
                options: [
                    "a) 32 GT/s",
                    "b) 64 GT/s",
                    "c) 128 GT/s.",
                    "d) 256 GT/s"
                ],
                correctAnswer: "c) 128 GT/s."
            },
            {
                question: "¿Para qué tipo de entornos está diseñada la interfaz U.2?",
                options: [
                    "a) Portátiles",
                    "b) Consumidores",
                    "c) para servidores.",
                    "d) Dispositivos móviles"
                ],
                correctAnswer: "c) para servidores."
            },
            {
                question: "¿Qué permite U.2?",
                options: [
                    "a) Solo lectura.",
                    "b) hot swapping.",
                    "c) Solo uso en sistemas operativos específicos.",
                    "d) Mayor distancia de cable."
                ],
                correctAnswer: "b) hot swapping."
            },
            {
                question: "¿Qué significa RAID?",
                options: [
                    "a) Random Array of Independent Disks",
                    "b) Redundant Array of Inexpensive Disks",
                    "c) Redundant Array of Independent Disks.",
                    "d) Rapid Access Interface Device"
                ],
                correctAnswer: "c) Redundant Array of Independent Disks."
            },
            {
                question: "En una configuración RAID, si se tienen discos de diferente tamaño, ¿qué capacidad 'mandará'?",
                options: [
                    "a) La del disco más grande.",
                    "b) el más pequeño.",
                    "c) El promedio de las capacidades.",
                    "d) La suma de todas las capacidades."
                ],
                correctAnswer: "b) el más pequeño."
            },
            {
                question: "¿Qué es un 'Spare' en un sistema RAID?",
                options: [
                    "a) Un disco principal.",
                    "b) disco de reserva que entra en funcionamiento si otro se estropea.",
                    "c) Un disco para almacenamiento temporal.",
                    "d) Un disco que almacena paridad."
                ],
                correctAnswer: "b) disco de reserva que entra en funcionamiento si otro se estropea."
            },
            {
                question: "¿Cómo se conoce también a RAID 0?",
                options: [
                    "a) Mirroring",
                    "b) Striping.",
                    "c) Parity",
                    "d) Duplication"
                ],
                correctAnswer: "b) Striping."
            },
            {
                question: "¿RAID 0 es tolerante a fallos?",
                options: [
                    "a) Sí, totalmente.",
                    "b) No, no tolerante a fallos.",
                    "c) Solo si se usan más de 4 discos.",
                    "d) Solo para lecturas."
                ],
                correctAnswer: "b) No, no tolerante a fallos."
            },
            {
                question: "¿Cuántos discos son el mínimo para configurar RAID 0?",
                options: [
                    "a) 1",
                    "b) Mínimo 2 discos.",
                    "c) 3",
                    "d) 4"
                ],
                correctAnswer: "b) Mínimo 2 discos."
            },
            {
                question: "¿Cuál es la Capacidad Neta en RAID 0?",
                options: [
                    "a) Capacidad del disco más pequeño.",
                    "b) Número de discos * Capacidad del disco más pequeño.",
                    "c) (Número de discos - 1) * Capacidad del disco más pequeño.",
                    "d) (Número de discos - 2) * Capacidad del disco más pequeño."
                ],
                correctAnswer: "b) Número de discos * Capacidad del disco más pequeño."
            },
            {
                question: "¿Cómo se conoce también a RAID 1?",
                options: [
                    "a) Striping",
                    "b) Parity",
                    "c) Mirroring.",
                    "d) Spanning"
                ],
                correctAnswer: "c) Mirroring."
            },
            {
                question: "¿Qué técnica utiliza RAID 1?",
                options: [
                    "a) División de datos en tiras.",
                    "b) Cada bloque de información se copia en los discos.",
                    "c) Distribuye la paridad.",
                    "d) Calcula código Hamming."
                ],
                correctAnswer: "b) Cada bloque de información se copia en los discos."
            },
            {
                question: "¿Cuántos discos son el mínimo para configurar RAID 1?",
                options: [
                    "a) 1",
                    "b) Mínimo 2 discos.",
                    "c) 3",
                    "d) 4"
                ],
                correctAnswer: "b) Mínimo 2 discos."
            },
            {
                question: "¿Cuál es la Capacidad Neta en RAID 1?",
                options: [
                    "a) Número de discos * Capacidad del disco más pequeño.",
                    "b) Capacidad del disco más pequeño.",
                    "c) (Número de discos * Capacidad del disco más pequeño) / 2.",
                    "d) (Número de discos - 1) * Capacidad del disco más pequeño."
                ],
                correctAnswer: "c) (Número de discos * Capacidad del disco más pequeño) / 2."
            },
            {
                question: "¿Qué característica tienen RAID 2 y 3 en cuanto a la participación de los discos en cada petición de E/S?",
                options: [
                    "a) Acceso independiente.",
                    "b) Acceso secuencial.",
                    "c) Todos los discos participan en la ejecución de cada petición de E/S simultáneamente.",
                    "d) Acceso asíncrono."
                ],
                correctAnswer: "c) Todos los discos participan en la ejecución de cada petición de E/S simultáneamente."
            },
            {
                question: "¿De qué tamaño son las tiras de información en RAID 2 y 3?",
                options: [
                    "a) Muy grandes / bloques.",
                    "b) Grandes / bloques.",
                    "c) Tiras de información muy pequeñas (bit, byte o palabra).",
                    "d) Medianas / clústeres."
                ],
                correctAnswer: "c) Tiras de información muy pequeñas (bit, byte o palabra)."
            },
            {
                question: "¿Qué código calcula RAID 2 para detección y corrección de errores?",
                options: [
                    "a) Código Reed-Solomon.",
                    "b) Código Hamming.",
                    "c) CRC.",
                    "d) Checksum."
                ],
                correctAnswer: "b) Código Hamming."
            },
            {
                question: "¿Cuántos discos son el mínimo para configurar RAID 2?",
                options: [
                    "a) 2",
                    "b) 3 o más discos.",
                    "c) 4",
                    "d) 5 o más."
                ],
                correctAnswer: "b) 3 o más discos."
            },
            {
                question: "¿Cuántos discos son el mínimo para configurar RAID 3?",
                options: [
                    "a) 2",
                    "b) 3 o más discos.",
                    "c) 4",
                    "d) 5 o más."
                ],
                correctAnswer: "b) 3 o más discos."
            },
            {
                question: "¿Cuál es la Capacidad Neta en RAID 3?",
                options: [
                    "a) Número de discos * Capacidad del disco más pequeño.",
                    "b) Capacidad del disco más pequeño.",
                    "c) (Número de discos - 1) * Capacidad del disco más pequeño.",
                    "d) (Número de discos - 2) * Capacidad del disco más pequeño."
                ],
                correctAnswer: "c) (Número de discos - 1) * Capacidad del disco más pequeño."
            },
            {
                question: "¿De qué tamaño son las tiras de información en RAID 4, 5 y 6?",
                options: [
                    "a) Muy pequeñas (bit, byte o palabra).",
                    "b) Tiras de información grandes / bloques.",
                    "c) Pequeñas / segmentos.",
                    "d) Muy grandes / volúmenes."
                ],
                correctAnswer: "b) Tiras de información grandes / bloques."
            },
            {
                question: "¿Cuántos discos son el mínimo para configurar RAID 4?",
                options: [
                    "a) 2",
                    "b) 3 o más discos.",
                    "c) 4",
                    "d) 5 o más."
                ],
                correctAnswer: "b) 3 o más discos."
            },
            {
                question: "¿Cuál es la Capacidad Neta en RAID 4?",
                options: [
                    "a) Número de discos * Capacidad del disco más pequeño.",
                    "b) Capacidad del disco más pequeño.",
                    "c) (Número de discos - 1) * Capacidad del disco más pequeño.",
                    "d) (Número de discos - 2) * Capacidad del disco más pequeño."
                ],
                correctAnswer: "c) (Número de discos - 1) * Capacidad del disco más pequeño."
            },
            {
                question: "¿Qué nivel de RAID distribuye las tiras de paridad por todos los discos?",
                options: [
                    "a) RAID 0",
                    "b) RAID 1",
                    "c) RAID 4",
                    "d) RAID 5."
                ],
                correctAnswer: "d) RAID 5."
            },
            {
                question: "¿Cuántos fallos en una unidad soporta RAID 5?",
                options: [
                    "a) 0",
                    "b) 1 fallo.",
                    "c) 2",
                    "d) Más de 2"
                ],
                correctAnswer: "b) 1 fallo."
            },
            {
                question: "¿Cuál es la Capacidad Neta en RAID 5?",
                options: [
                    "a) Número de discos * Capacidad del disco más pequeño.",
                    "b) Capacidad del disco más pequeño.",
                    "c) (Número de discos - 1) * Capacidad del disco más pequeño.",
                    "d) (Número de discos - 2) * Capacidad del disco más pequeño."
                ],
                correctAnswer: "c) (Número de discos - 1) * Capacidad del disco más pequeño."
            },
            {
                question: "¿Qué nivel de RAID es como RAID 5 pero la paridad se escribe en 2 unidades?",
                options: [
                    "a) RAID 0",
                    "b) RAID 1",
                    "c) RAID 6.",
                    "d) RAID 10"
                ],
                correctAnswer: "c) RAID 6."
            },
            {
                question: "¿Cuántos discos son el mínimo para configurar RAID 6?",
                options: [
                    "a) 2",
                    "b) 3",
                    "c) 4 o más discos.",
                    "d) 5 o más."
                ],
                correctAnswer: "c) 4 o más discos."
            },
            {
                question: "¿Cuántos fallos en una unidad soporta RAID 6?",
                options: [
                    "a) 0",
                    "b) 1",
                    "c) 2 fallos.",
                    "d) Más de 2"
                ],
                correctAnswer: "c) 2 fallos."
            },
            {
                question: "¿Cuál es la Capacidad Neta en RAID 6?",
                options: [
                    "a) Número de discos * Capacidad del disco más pequeño.",
                    "b) Capacidad del disco más pequeño.",
                    "c) (Número de discos - 1) * Capacidad del disco más pequeño.",
                    "d) (Número de discos - 2) * Capacidad del disco más pequeño."
                ],
                correctAnswer: "d) (Número de discos - 2) * Capacidad del disco más pequeño."
            },
            {
                question: "En un RAID 0+1, ¿qué operación se realiza primero?",
                options: [
                    "a) Primero RAID 1 (espejo).",
                    "b) Primero RAID 0 (2 discos).",
                    "c) Ambas al mismo tiempo.",
                    "d) Depende de la configuración."
                ],
                correctAnswer: "b) Primero RAID 0 (2 discos)."
            },
            {
                question: "En un RAID 1+0, ¿qué operación se realiza primero?",
                options: [
                    "a) Primero RAID 0 (división).",
                    "b) Primero RAID 1 (espejo).",
                    "c) Ambas al mismo tiempo.",
                    "d) Depende de la configuración."
                ],
                correctAnswer: "b) Primero RAID 1 (espejo)."
            },
            {
                question: "¿Qué significa JBOD?",
                options: [
                    "a) Just a Bunch Of Disks",
                    "b) Joint Basic Operating Drives",
                    "c) muchos discos trabajan como uno solo.",
                    "d) Jumbo Bytes Of Data"
                ],
                correctAnswer: "c) muchos discos trabajan como uno solo."
            },
            {
                question: "¿Qué sucede si se rompe un disco en un sistema JBOD?",
                options: [
                    "a) Se pierde toda la información del conjunto.",
                    "b) se pierde la info de ese disco, pero la unidad sigue funcionando.",
                    "c) El sistema se detiene completamente.",
                    "d) Los datos se reconstruyen automáticamente."
                ],
                correctAnswer: "b) se pierde la info de ese disco, pero la unidad sigue funcionando."
            },
            {
                question: "¿Qué significan las siglas CRT en el contexto de pantallas?",
                options: [
                    "a) Color Raster Tube",
                    "b) haz de rayos sobre pantalla de fósforo.",
                    "c) Clear Resolution Technology",
                    "d) Chromatic Raster Display"
                ],
                correctAnswer: "b) haz de rayos sobre pantalla de fósforo."
            },
            {
                question: "¿Qué significan las siglas LCD en el contexto de pantallas?",
                options: [
                    "a) Light Crystal Display",
                    "b) Liquid Color Display",
                    "c) cristal líquido más iluminación.",
                    "d) Low Cost Display"
                ],
                correctAnswer: "c) cristal líquido más iluminación."
            },
            {
                question: "¿Cuál es la principal característica de las pantallas OLED según el documento?",
                options: [
                    "a) Utilizan cristal líquido para la imagen.",
                    "b) Cada diodo para un pixel.",
                    "c) Necesitan retroiluminación.",
                    "d) Generan imágenes mediante un haz de electrones."
                ],
                correctAnswer: "b) Cada diodo para un pixel."
            },
            {
                question: "¿Qué tipo de interfaz de pantalla es VGA?",
                options: [
                    "a) Digital",
                    "b) analógico.",
                    "c) Híbrido",
                    "d) Óptico"
                ],
                correctAnswer: "b) analógico."
            },
            {
                question: "¿Qué interfaz de pantalla soporta audio + vídeo, y su versión 2.1 soporta 10K y 120 Hz?",
                options: [
                    "a) DVI",
                    "b) DisplayPort",
                    "c) HDMI.",
                    "d) VGA"
                ],
                correctAnswer: "c) HDMI."
            },
            {
                question: "¿Qué fotosensor utiliza un escáner?",
                options: [
                    "a) CMOS",
                    "b) CCD.",
                    "c) FSO",
                    "d) IGBT"
                ],
                correctAnswer: "b) CCD."
            },
            {
                question: "¿Qué significa OCR en el contexto de escáneres?",
                options: [
                    "a) Optical Character Recognition (reconocimiento óptico de caracteres).",
                    "b) Object Color Restoration",
                    "c) Output Character Reader",
                    "d) Online Content Retrieval"
                ],
                correctAnswer: "a) Optical Character Recognition (reconocimiento óptico de caracteres)."
            },
            {
                question: "¿Cuál es el principal componente que interactúa con el tóner en una impresora láser para la impresión?",
                options: [
                    "a) El cabezal de inyección.",
                    "b) toner+tambor fotosensible.",
                    "c) La cinta de transferencia.",
                    "d) El fusor."
                ],
                correctAnswer: "b) toner+tambor fotosensible."
            },
            {
                question: "¿Qué tipo de impresoras utilizan papel sensible al calor?",
                options: [
                    "a) Inyección de tinta.",
                    "b) Matríciales.",
                    "c) Térmica.",
                    "d) Sublimación."
                ],
                correctAnswer: "c) Térmica."
            },
            {
                question: "¿Qué modelos de color se utilizan en impresión?",
                options: [
                    "a) RGB",
                    "b) CMYK.",
                    "c) HSL",
                    "d) HSV"
                ],
                correctAnswer: "b) CMYK."
            },
            {
                question: "¿Qué es un PDL?",
                options: [
                    "a) Un protocolo de red.",
                    "b) Es un lenguaje que tiene comandos que entiende la impresora.",
                    "c) Un formato de imagen.",
                    "d) Un tipo de driver."
                ],
                correctAnswer: "b) Es un lenguaje que tiene comandos que entiende la impresora."
            },
            {
                question: "¿Qué lenguaje de descripción de página es propiedad de Adobe?",
                options: [
                    "a) PCL",
                    "b) XPS",
                    "c) PDF",
                    "d) PostScript."
                ],
                correctAnswer: "d) PostScript."
            },
            {
                question: "¿Qué tipo de fichero es comúnmente usado en impresoras 3D, según el documento?",
                options: [
                    "a) JPG",
                    "b) Ficheros STL, 3MF, VRML.",
                    "c) DOCX",
                    "d) PDF"
                ],
                correctAnswer: "b) Ficheros STL, 3MF, VRML."
            },
            {
                question: "¿Cuál es el tipo de impresión 3D más usado (FDM y FFF)?",
                options: [
                    "a) Stereolithography (SLA).",
                    "b) Fusión de lecho de polvo (SLS).",
                    "c) De extrusión.",
                    "d) Procesamiento de luz digital (DLP)."
                ],
                correctAnswer: "c) De extrusión."
            },
            {
                question: "¿Qué materiales se usan comúnmente en la impresión 3D de extrusión?",
                options: [
                    "a) Resina y metales.",
                    "b) Polvo cerámico.",
                    "c) PLA, ABS y TPU.",
                    "d) Madera y vidrio."
                ],
                correctAnswer: "c) PLA, ABS y TPU."
            },
            {
                question: "¿Cuál era la principal aplicación de FireWire, según el documento?",
                options: [
                    "a) Conectar redes de área local.",
                    "b) Usado para conectar dispositivos digitales (cámaras y videocámaras) a PC.",
                    "c) Almacenamiento externo de alta capacidad.",
                    "d) Conexión a monitores."
                ],
                correctAnswer: "b) Usado para conectar dispositivos digitales (cámaras y videocámaras) a PC."
            },
            {
                question: "¿Cómo se llamaba también ThunderBolt inicialmente?",
                options: [
                    "a) SuperSpeed.",
                    "b) Light Peak.",
                    "c) UltraConnect.",
                    "d) FastLink."
                ],
                correctAnswer: "b) Light Peak."
            },
            {
                question: "¿Qué protocolos soporta ThunderBolt?",
                options: [
                    "a) Solo Ethernet.",
                    "b) Solo DisplayPort.",
                    "c) Múltiples protocolos (soporta DisplayPort, HDMI y Ethernet).",
                    "d) Solo USB."
                ],
                correctAnswer: "c) Múltiples protocolos (soporta DisplayPort, HDMI y Ethernet)."
            },
            {
                question: "¿Cuál es la velocidad de Thunderbolt 3?",
                options: [
                    "a) 10 Gbps",
                    "b) 20 Gbps",
                    "c) 40 Gbps.",
                    "d) 80 Gbps"
                ],
                correctAnswer: "c) 40 Gbps."
            },
            {
                question: "¿Cuál es la velocidad de USB 4.0 en modo simétrico?",
                options: [
                    "a) 20 Gbps",
                    "b) 40 Gbps",
                    "c) 80 Gbps.",
                    "d) 120 Gbps"
                ],
                correctAnswer: "c) 80 Gbps."
            }
        ];

             // Variables de estado del quiz
        let currentQuestionIndex = 0;
        let score = 0;
        const userAnswers = new Array(quizData.length).fill(null);
        const scoredQuestions = new Array(quizData.length).fill(false);

        // Referencias a los elementos del DOM
        const quizContainer = document.getElementById('quizContainer');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const restartBtn = document.getElementById('restartBtn');
        const restartInlineBtn = document.getElementById('restartInlineBtn');
        const finalScoreDiv = document.getElementById('finalScore');
        const progressBar = document.getElementById('progressBar');
        const finalScoreDisplay = finalScoreDiv.querySelector('.score-display');
        const correctCountSpan = document.getElementById('correctCount');
        const incorrectCountSpan = document.getElementById('incorrectCount');
        const unansweredCountSpan = document.getElementById('unansweredCount');

        /**
         * Carga el estado del quiz guardado en localStorage.
         * Si no existe, inicializa un nuevo estado.
         */
        function loadQuizState() {
            try {
                const savedState = JSON.parse(localStorage.getItem('quizState'));
                if (savedState) {
                    currentQuestionIndex = savedState.currentQuestionIndex;
                    score = savedState.score;
                    // Asegurarse de que los arrays tengan el tamaño correcto
                    userAnswers.fill(null);
                    userAnswers.splice(0, savedState.userAnswers.length, ...savedState.userAnswers);
                    scoredQuestions.fill(false);
                    scoredQuestions.splice(0, savedState.scoredQuestions.length, ...savedState.scoredQuestions);
                }
            } catch (e) {
                console.error("Error al cargar el estado del quiz:", e);
                // Si hay un error, el estado se reiniciará a los valores por defecto
            }
        }

        /**
         * Guarda el estado actual del quiz en localStorage.
         */
        function saveQuizState() {
            const quizState = {
                currentQuestionIndex: currentQuestionIndex,
                score: score,
                userAnswers: userAnswers,
                scoredQuestions: scoredQuestions
            };
            localStorage.setItem('quizState', JSON.stringify(quizState));
        }

        /**
         * Carga y muestra la pregunta actual.
         */
        function loadQuestion() {
            if (currentQuestionIndex >= quizData.length) {
                showResults();
                return;
            }

            const currentQuestion = quizData[currentQuestionIndex];
            quizContainer.innerHTML = `
                <div class="question-card">
                    <p class="question-text">${currentQuestionIndex + 1}. ${currentQuestion.question}</p>
                    <div class="options-container">
                        ${currentQuestion.options.map((option, index) => `
                            <button class="option-button" data-option="${option}" data-index="${index}">
                                ${option}
                            </button>
                        `).join('')}
                    </div>
                    <div class="solution hidden">
                        <strong>Solución:</strong> <span class="solution-text"></span>
                    </div>
                </div>
            `;

            // Resalta la respuesta del usuario si ya ha respondido
            const savedAnswer = userAnswers[currentQuestionIndex];
            if (savedAnswer !== null) {
                const selectedButton = quizContainer.querySelector(`[data-index="${savedAnswer}"]`);
                if (selectedButton) {
                    selectedButton.classList.add('selected');
                }
            }

            // Actualiza el estado de los botones de navegación y la barra de progreso
            updateNavButtons();
            updateProgressBar();
            
            // Añade el evento de clic a los botones de opción
            quizContainer.querySelectorAll('.option-button').forEach(button => {
                button.addEventListener('click', handleOptionClick);
            });
        }

        /**
         * Maneja el evento de clic en una opción de respuesta.
         * @param {Event} event - El evento de clic.
         */
        function handleOptionClick(event) {
            const selectedOptionButton = event.target;
            const selectedOption = selectedOptionButton.dataset.option;
            const currentQuestion = quizData[currentQuestionIndex];

            // Deshabilita todos los botones de opción para evitar múltiples respuestas
            quizContainer.querySelectorAll('.option-button').forEach(button => {
                button.classList.add('disabled');
                button.removeEventListener('click', handleOptionClick);
            });

            // Actualiza la respuesta del usuario y la guarda
            userAnswers[currentQuestionIndex] = parseInt(selectedOptionButton.dataset.index);
            saveQuizState();

            // Comprueba si la respuesta es correcta
            if (selectedOption === currentQuestion.correctAnswer) {
                // La pregunta es correcta
                selectedOptionButton.classList.add('correct-answer');
                // Si no se ha puntuado antes, añade un punto
                if (!scoredQuestions[currentQuestionIndex]) {
                    score++;
                    scoredQuestions[currentQuestionIndex] = true;
                    saveQuizState();
                }
                quizContainer.querySelector('.question-card').classList.add('correct');
            } else {
                // La pregunta es incorrecta
                selectedOptionButton.classList.add('incorrect-answer');
                quizContainer.querySelector('.question-card').classList.add('incorrect');
                // Si se había puntuado como correcta, quita el punto
                if (scoredQuestions[currentQuestionIndex]) {
                    score--;
                    scoredQuestions[currentQuestionIndex] = false;
                    saveQuizState();
                }
                // Resalta la respuesta correcta
                const correctAnswerButton = quizContainer.querySelector(`[data-option="${currentQuestion.correctAnswer}"]`);
                if (correctAnswerButton) {
                    correctAnswerButton.classList.add('correct-answer');
                }
            }
            
            // Muestra la solución detallada si existe
            if (currentQuestion.solution) {
                const solutionDiv = quizContainer.querySelector('.solution');
                solutionDiv.classList.remove('hidden');
                solutionDiv.querySelector('.solution-text').textContent = currentQuestion.solution;
            }
        }

        /**
         * Muestra los resultados finales del quiz.
         */
        function showResults() {
            quizContainer.classList.add('hidden');
            prevBtn.classList.add('hidden');
            nextBtn.classList.add('hidden');
            restartInlineBtn.classList.add('hidden');
            progressBar.parentElement.classList.add('hidden');
            finalScoreDiv.classList.remove('hidden');

            // Calcula y muestra las estadísticas
            const correctAnswers = scoredQuestions.filter(isCorrect => isCorrect).length;
            const incorrectAnswers = scoredQuestions.filter((isCorrect, index) => !isCorrect && userAnswers[index] !== null).length;
            const unansweredQuestions = userAnswers.filter(answer => answer === null).length;

            finalScoreDisplay.textContent = `Tu puntuación final es ${correctAnswers} de ${quizData.length}`;
            correctCountSpan.textContent = correctAnswers;
            incorrectCountSpan.textContent = incorrectAnswers;
            unansweredCountSpan.textContent = unansweredQuestions;
        }
		
		

        /**
         * Actualiza el estado de los botones de navegación.
         */
        function updateNavButtons() {
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.textContent = currentQuestionIndex === quizData.length - 1 ? 'Finalizar' : 'Siguiente';
        }

        /**
         * Actualiza la barra de progreso.
         */
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        /**
         * Reinicia el quiz a su estado inicial.
         */
        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers.fill(null);
            scoredQuestions.fill(false);
            localStorage.clear(); // Limpia el localStorage
            
            quizContainer.classList.remove('hidden');
            prevBtn.classList.remove('hidden');
            nextBtn.classList.remove('hidden');
            restartInlineBtn.classList.remove('hidden');
            progressBar.parentElement.classList.remove('hidden');
            finalScoreDiv.classList.add('hidden');
            loadQuestion();
        }

        // Event listeners
        prevBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                showResults();
            }
        });

        restartBtn.addEventListener('click', restartQuiz);
        restartInlineBtn.addEventListener('click', restartQuiz);

        // Carga inicial
        window.onload = function() {
            loadQuizState();
            loadQuestion();
        };
		/**
 * Carga la pregunta actual y sus opciones en la interfaz.
 */
function loadQuestion() {
    const currentQuestion = quizData[currentQuestionIndex];
    quizContainer.innerHTML = `
        <div class="question-card">
            <p class="question-text">${currentQuestionIndex + 1}. ${currentQuestion.question}</p>
            <div id="optionsContainer">
                ${currentQuestion.options.map((option, index) => `
                    <button class="option-button" data-option="${option}">${option}</button>
                `).join('')}
            </div>
        </div>
    `;

    const optionsContainer = document.getElementById('optionsContainer');
    // Esto es crucial: se adjunta el event listener para manejar el clic en las opciones.
    optionsContainer.addEventListener('click', handleOptionClick);

    updateButtons();
    updateProgressBar();
    
    // Cargar respuesta previa si existe
    const previousAnswer = userAnswers[currentQuestionIndex];
    if (previousAnswer !== null) {
        const selectedButton = optionsContainer.querySelector(`[data-option="${previousAnswer}"]`);
        if (selectedButton) {
            checkAnswer(selectedButton, true); // Pasar 'true' para no recalcular el score
        }
    }
}

/**
 * Maneja el clic en una opción de respuesta.
 * @param {Event} event El evento de clic.
 */
function handleOptionClick(event) {
    const clickedButton = event.target.closest('.option-button');
    if (clickedButton && !clickedButton.classList.contains('disabled')) {
        // Almacenar la respuesta del usuario
        userAnswers[currentQuestionIndex] = clickedButton.dataset.option;
        saveQuizState();
        
        checkAnswer(clickedButton, false); // Pasar 'false' para calcular el score
    }
}

/**
 * Verifica la respuesta seleccionada por el usuario y actualiza la UI.
 * @param {HTMLElement} selectedButton - El botón de opción seleccionado por el usuario.
 * @param {boolean} isReload - Indica si la función es llamada desde el reload para no recalcular el score.
 */
function checkAnswer(selectedButton, isReload) {
    const currentQuestion = quizData[currentQuestionIndex];
    const options = document.querySelectorAll('.option-button');

    // Deshabilitar todas las opciones para esta pregunta
    options.forEach(btn => {
        btn.classList.add('disabled');
    });
    
    // Comprobar si la pregunta ya ha sido calificada
    if (!scoredQuestions[currentQuestionIndex]) {
        if (selectedButton.dataset.option === currentQuestion.correctAnswer) {
            if (!isReload) {
                score++;
            }
            selectedButton.classList.add('correct-answer');
            updateQuestionCard(true);
        } else {
            selectedButton.classList.add('incorrect-answer');
            // Mostrar la respuesta correcta
            const correctButton = document.querySelector(`[data-option="${currentQuestion.correctAnswer}"]`);
            if (correctButton) {
                correctButton.classList.add('correct-answer');
            }
            updateQuestionCard(false);
        }
        scoredQuestions[currentQuestionIndex] = true;
        saveQuizState();
    } else {
        // Si ya fue calificada, solo mostrar los estilos de la respuesta guardada
        const userChoice = userAnswers[currentQuestionIndex];
        if (userChoice === currentQuestion.correctAnswer) {
            selectedButton.classList.add('correct-answer');
            updateQuestionCard(true);
        } else {
            selectedButton.classList.add('incorrect-answer');
            const correctButton = document.querySelector(`[data-option="${currentQuestion.correctAnswer}"]`);
            if (correctButton) {
                correctButton.classList.add('correct-answer');
            }
            updateQuestionCard(false);
        }
    }
}

/**
 * Actualiza el estilo de la tarjeta de pregunta y añade feedback.
 * @param {boolean} isCorrect - Indica si la respuesta es correcta.
 */
function updateQuestionCard(isCorrect) {
    const questionCard = document.querySelector('.question-card');
    const feedbackMessage = document.createElement('p');
    feedbackMessage.classList.add('feedback');

    if (isCorrect) {
        questionCard.classList.add('correct');
        feedbackMessage.textContent = '¡Correcto!';
        feedbackMessage.classList.add('correct');
    } else {
        questionCard.classList.add('incorrect');
        feedbackMessage.textContent = 'Incorrecto. La respuesta correcta es la marcada en verde.';
        feedbackMessage.classList.add('incorrect');
    }
    questionCard.appendChild(feedbackMessage);
}

    </script>
</body>
</html>




