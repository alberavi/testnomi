let currentQuestionIndex = 0;
    let userAnswers = new Array(questions.length).fill(null);
    let scoredQuestions = new Array(questions.length).fill(false);

    const questionText = document.createElement('h2');
    const optionsList = document.createElement('div');
    optionsList.classList.add('options-container', 'space-y-4');

    // Función para guardar el estado del quiz en localStorage
    function saveQuizState() {
        localStorage.setItem('currentQuestionIndex', currentQuestionIndex);
        localStorage.setItem('userAnswers', JSON.stringify(userAnswers));
        localStorage.setItem('scoredQuestions', JSON.stringify(scoredQuestions));
    }

    // Función para cargar el estado del quiz desde localStorage
    function loadQuizState() {
        const savedIndex = localStorage.getItem('currentQuestionIndex');
        const savedAnswers = localStorage.getItem('userAnswers');
        const savedScored = localStorage.getItem('scoredQuestions');
        if (savedIndex !== null) {
            currentQuestionIndex = parseInt(savedIndex);
        }
        if (savedAnswers !== null) {
            userAnswers = JSON.parse(savedAnswers);
        }
        if (savedScored !== null) {
            scoredQuestions = JSON.parse(savedScored);
        }
    }

    // Función para cargar y mostrar la pregunta actual
    function loadQuestion() {
        // --- COMIENZO DEL CAMBIO ---
        // Obtenemos el texto de la pregunta actual
        const currentQuestion = questions[currentQuestionIndex];
        // Eliminamos el prefijo de numeración (ej. "1. ") del texto de la pregunta
        const questionTextWithoutNumber = currentQuestion.question.replace(/^\d+\.\s*/, '');
        // Asignamos el texto sin la numeración al elemento de la pregunta
        questionText.textContent = questionTextWithoutNumber;
        // --- FIN DEL CAMBIO ---

        optionsList.innerHTML = ''; // Limpiar opciones anteriores
        currentQuestion.options.forEach((option, index) => {
            const optionBtn = document.createElement('button');
            optionBtn.textContent = option;
            optionBtn.classList.add('option-button', 'w-full', 'px-6', 'py-3', 'rounded-lg', 'font-semibold', 'text-left', 'transition-all', 'duration-200', 'hover:bg-blue-200');
            optionBtn.dataset.answer = option;
            optionBtn.addEventListener('click', () => selectAnswer(optionBtn));
            optionsList.appendChild(optionBtn);
        });
        updateQuizView();
        updateProgressBar();
    }

    // Función para manejar la selección de respuesta
    function selectAnswer(selectedBtn) {
        // ... (código que no necesita ser modificado)
        // ...
    }

    // Función para actualizar la vista del quiz
    function updateQuizView() {
        // ... (código que no necesita ser modificado)
        // ...
    }

    // Función para actualizar la barra de progreso
    function updateProgressBar() {
        // ... (código que no necesita ser modificado)
        // ...
    }

    // Función para mostrar los resultados finales
    function showResults() {
        // ... (código que no necesita ser modificado)
        // ...
    }

    // Función para reiniciar el quiz
    function restartQuiz() {
        // ... (código que no necesita ser modificado)
        // ...
    }

    // Event listeners
    prevBtn.addEventListener('click', () => {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            saveQuizState();
            loadQuestion();
        }
    });

    nextBtn.addEventListener('click', () => {
        if (currentQuestionIndex < questions.length - 1) {
            currentQuestionIndex++;
            saveQuizState();
            loadQuestion();
        } else {
            showResults();
        }
    });

    restartBtn.addEventListener('click', restartQuiz);
    restartInlineBtn.addEventListener('click', restartQuiz);

    // Carga inicial
    window.onload = function() {
        loadQuizState();
        quizContainer.appendChild(questionText);
        quizContainer.appendChild(optionsList);
        loadQuestion();
    };
});



