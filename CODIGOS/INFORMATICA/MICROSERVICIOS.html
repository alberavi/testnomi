<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Microservicios</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }
        .container {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 100%;
            transition: all 0.3s ease-in-out;
        }
        .question-container {
            margin-bottom: 25px;
            padding: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 10px;
            background-color: #f9fafb;
            transition: all 0.2s ease-in-out;
        }
        .question-text {
            font-size: 1.15rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        .option-button {
            display: block;
            width: 100%;
            text-align: left;
            padding: 12px 18px;
            margin-bottom: 10px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            background-color: #ffffff;
            color: #374151;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        .option-button:hover:not(.correct):not(.incorrect) {
            background-color: #eef2ff;
            border-color: #a5b4fc;
        }
        .option-button.correct {
            background-color: #d1fae5;
            border-color: #34d399;
            color: #065f46;
            font-weight: 600;
        }
        .option-button.incorrect {
            background-color: #fee2e2;
            border-color: #ef4444;
            color: #991b1b;
            font-weight: 600;
        }
        .feedback {
            margin-top: 10px;
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 600;
            display: none; /* Hidden by default */
        }
        .feedback.correct {
            background-color: #d1fae5;
            color: #065f46;
            border: 1px solid #34d399;
        }
        .feedback.incorrect {
            background-color: #fee2e2;
            color: #991b1b;
            border: 1px solid #ef4444;
        }
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 10px; /* Added gap for better spacing */
        }
        .nav-button, .restart-button-inline {
            padding: 12px 25px;
            color: #ffffff;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 4px 10px rgba(79, 70, 229, 0.2);
            flex-grow: 1; /* Make buttons grow to fill space */
        }
        .nav-button {
            background-color: #4f46e5;
        }
        .nav-button:hover {
            background-color: #4338ca;
            transform: translateY(-1px);
        }
        .nav-button:active {
            transform: translateY(1px);
        }
        .nav-button:disabled {
            background-color: #a5b4fc;
            cursor: not-allowed;
            box-shadow: none;
        }
        .restart-button-inline {
            background-color: #10b981;
            box-shadow: 0 4px 10px rgba(16, 185, 129, 0.2);
        }
        .restart-button-inline:hover {
            background-color: #059669;
            transform: translateY(-1px);
        }
        .quiz-title {
            font-size: 2.25rem;
            font-weight: 700;
            color: #1f2937;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.05);
        }
        .score-container {
            text-align: center;
            margin-top: 30px;
            font-size: 1.5rem;
            font-weight: 600;
            color: #1f2937;
        }
        .result-section {
            margin-top: 20px;
            text-align: left;
            padding: 15px;
            border-radius: 10px;
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
        }
        .result-item {
            margin-bottom: 10px;
            font-size: 1.1rem;
            font-weight: 500;
        }
        .result-item.correct { color: #065f46; }
        .result-item.incorrect { color: #991b1b; }
        .result-item.unanswered { color: #374151; }
        
        .review-section {
            margin-top: 20px;
            border-top: 2px solid #e5e7eb;
            padding-top: 20px;
        }
        .review-question {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 8px;
            background-color: #ffffff;
            border: 1px solid #d1d5db;
        }
        .review-question-text {
            font-weight: 600;
            margin-bottom: 10px;
        }
        .review-answer-correct {
            color: #065f46;
            font-weight: 600;
        }
        .review-answer-user {
            color: #991b1b;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="quiz-title">Test de Microservicios</h1>
        <div id="quiz-container"></div>
        <div class="navigation-buttons">
            <button id="prev-button" class="nav-button" disabled>Anterior</button>
            <button id="restart-button-inline" class="restart-button-inline" style="display: none;">Reiniciar Test</button>
            <button id="next-button" class="nav-button">Siguiente</button>
        </div>
        <div id="score-display" class="score-container" style="display: none;"></div>
    </div>

    <script>
        const questions = [
            {
                question: "¿Cuál de las siguientes afirmaciones describe mejor un microservicio?",
                options: [
                    "a) Son aplicaciones monolíticas que se despliegan de forma conjunta.",
                    "b) Son servicios que se despliegan de manera independiente y se modelan alrededor de un dominio de negocio.",
                    "c) Son grandes sistemas con fuerte acoplamiento entre sus componentes.",
                    "d) Son exclusivamente para bases de datos muy pequeñas."
                ],
                correctAnswer: "b) Son servicios que se despliegan de manera independiente y se modelan alrededor de un dominio de negocio."
            },
            {
                question: "¿El prefijo \"μ\" en microservicios implica que siempre deben ser muy pequeños?",
                options: [
                    "a) Sí, es un requisito estricto de tamaño.",
                    "b) No, el tamaño lo dicta el servicio que presta.",
                    "c) Solo si se usan lenguajes de programación ligeros.",
                    "d) Depende de la cantidad de datos que maneje."
                ],
                correctAnswer: "b) No, el tamaño lo dicta el servicio que presta."
            },
            {
                question: "¿Qué característica NO es típica de los microservicios?",
                options: [
                    "a) Débilmente acoplados.",
                    "b) Granularidad muy fina (poca responsabilidad).",
                    "c) Comunicación mediante protocolos pesados (ej. SOAP).",
                    "d) Equipos de desarrollo independientes."
                ],
                correctAnswer: "c) Comunicación mediante protocolos pesados (ej. SOAP)."
            },
            {
                question: "¿Pueden los microservicios definirse en diferentes lenguajes y con distintas bases de datos?",
                options: [
                    "a) No, todos deben usar el mismo lenguaje y base de datos.",
                    "b) Sí, es una de sus ventajas.",
                    "c) Solo si usan la misma API Gateway.",
                    "d) Únicamente si son desarrollados por el mismo equipo."
                ],
                correctAnswer: "b) Sí, es una de sus ventajas."
            },
            {
                question: "Si un microservicio falla, ¿qué sucede con la aplicación completa en una arquitectura de microservicios?",
                options: [
                    "a) Toda la aplicación se viene abajo.",
                    "b) Solo ese microservicio deja de funcionar, manteniendo la resiliencia de la aplicación.",
                    "c) Requiere un reinicio completo del sistema.",
                    "d) Los demás microservicios también fallan inmediatamente."
                ],
                correctAnswer: "b) Solo ese microservicio deja de funcionar, manteniendo la resiliencia de la aplicación."
            },
            {
                question: "¿Cuál de los siguientes NO es un nuevo reto de las arquitecturas de microservicios?",
                options: [
                    "a) Independientemente desplegables.",
                    "b) Mezcla de tecnologías.",
                    "c) Acoplamiento y Cohesión.",
                    "d) Fácil gobernanza."
                ],
                correctAnswer: "a) Independientemente desplegables."
            },
            {
                question: "¿Qué busca el DDD (Domain Driven Design) en el contexto de microservicios?",
                options: [
                    "a) Reducir el número de bases de datos.",
                    "b) Descubrir los conceptos del negocio desde varios puntos de vista para definir servicios, entidades y repositorios.",
                    "c) Imponer un único lenguaje de programación.",
                    "d) Centralizar la gestión de errores."
                ],
                correctAnswer: "b) Descubrir los conceptos del negocio desde varios puntos de vista para definir servicios, entidades y repositorios."
            },
            {
                question: "¿Qué es un Bounded Context en el diseño de microservicios?",
                options: [
                    "a) Un tipo de base de datos relacional.",
                    "b) Un patrón de diseño que divide el modelo en submodelos, especializados en áreas.",
                    "c) Un límite físico para la ubicación de los servidores.",
                    "d) Una herramienta de monitorización de red."
                ],
                correctAnswer: "b) Un patrón de diseño que divide el modelo en submodelos, especializados en áreas."
            },
            {
                question: "¿Cada microservicio suele tener un Bounded Context asociado?",
                options: [
                    "a) No, solo los servicios principales.",
                    "b) Sí, se encarga de una funcionalidad, un contexto o un área de negocio.",
                    "c) Depende del tamaño del microservicio.",
                    "d) Es una práctica obsoleta."
                ],
                correctAnswer: "b) Sí, se encarga de una funcionalidad, un contexto o un área de negocio."
            },
            {
                question: "En la comunicación síncrona entre microservicios, ¿cuál es el principal inconveniente?",
                options: [
                    "a) Facilita la transaccionalidad.",
                    "b) Depende del eslabón más débil, siendo menos robusta.",
                    "c) Siempre es más rápida.",
                    "d) Permite mayor independencia."
                ],
                correctAnswer: "b) Depende del eslabón más débil, siendo menos robusta."
            },
            {
                question: "¿Qué es un Broker de mensajes en la comunicación asíncrona?",
                options: [
                    "a) Un sistema de cacheo de datos.",
                    "b) Un intermediario entre microservicios para una comunicación asíncrona.",
                    "c) Un balanceador de carga síncrono.",
                    "d) Un gestor de autenticación."
                ],
                correctAnswer: "b) Un intermediario entre microservicios para una comunicación asíncrona."
            },
            {
                question: "¿Cuál de los siguientes NO es un producto de Broker de mensajes mencionado?",
                options: [
                    "a) Apache Kafka.",
                    "b) RabbitMQ.",
                    "c) Google Cloud Pub/Sub.",
                    "d) MySQL."
                ],
                correctAnswer: "d) MySQL."
            },
            {
                question: "¿Cómo funciona la comunicación \"dirigida por eventos\" entre microservicios?",
                options: [
                    "a) Los microservicios comparten una base de datos central.",
                    "b) Se genera un evento con información y los suscriptores lo usan como inicio de su trabajo.",
                    "c) Se realizan llamadas directas y bloqueantes entre servicios.",
                    "d) A través de peticiones HTTP síncronas."
                ],
                correctAnswer: "b) Se genera un evento con información y los suscriptores lo usan como inicio de su trabajo."
            },
            {
                question: "¿Qué tipo de comunicación entre microservicios es actualmente de lo más usado junto con REST?",
                options: [
                    "a) SOAP.",
                    "b) RMI.",
                    "c) RPC/gRPC.",
                    "d) GraphQL."
                ],
                correctAnswer: "c) RPC/gRPC."
            },
            {
                question: "¿Cuál de estos protocolos de comunicación es muy dependiente de la tecnología Java?",
                options: [
                    "a) REST.",
                    "b) SOAP.",
                    "c) RMI.",
                    "d) GraphQL."
                ],
                correctAnswer: "c) RMI."
            },
            {
                question: "¿Qué es una API Gateway?",
                options: [
                    "a) Un tipo de base de datos NoSQL.",
                    "b) Una puerta de entrada a los microservicios, aislándolos del exterior.",
                    "c) Un servidor de mensajería asíncrona.",
                    "d) Una herramienta para la monitorización de logs."
                ],
                correctAnswer: "b) Una puerta de entrada a los microservicios, aislándolos del exterior."
            },
            {
                question: "¿Qué patrón de diseño centraliza la lógica de acceso a los microservicios que están detrás?",
                options: [
                    "a) Circuit Breaker.",
                    "b) Sidecar.",
                    "c) API Gateway.",
                    "d) SAGA."
                ],
                correctAnswer: "c) API Gateway."
            },
            {
                question: "¿Qué producto es conocido por ser un proxy inverso que canaliza peticiones y oculta la complejidad de los microservicios?",
                options: [
                    "a) Ribbon.",
                    "b) Hystrix.",
                    "c) Zuul.",
                    "d) Eureka."
                ],
                correctAnswer: "c) Zuul."
            },
            {
                question: "¿Cuál es el propósito del patrón Circuit Breaker?",
                options: [
                    "a) Balancear la carga entre microservicios.",
                    "b) Permitir definir políticas de reintentos y timeout y cortar el acceso a un microservicio erróneo.",
                    "c) Registrar microservicios y sus metadatos.",
                    "d) Facilitar la comunicación asíncrona."
                ],
                correctAnswer: "b) Permitir definir políticas de reintentos y timeout y cortar el acceso a un microservicio erróneo."
            },
            {
                question: "¿Qué librería es utilizada para balancear peticiones de clientes en el ecosistema de Netflix OSS?",
                options: [
                    "a) Hystrix.",
                    "b) Ribbon.",
                    "c) Eureka.",
                    "d) Zuul."
                ],
                correctAnswer: "b) Ribbon."
            },
            {
                question: "¿Qué librería de errores en cascada utiliza el patrón Circuit Breaker?",
                options: [
                    "a) Ribbon.",
                    "b) Zuul.",
                    "c) Hystrix.",
                    "d) Eureka."
                ],
                correctAnswer: "c) Hystrix."
            },
            {
                question: "¿Qué tecnología está diseñada para abordar las complejidades de las arquitecturas de microservicios en la v2.0?",
                options: [
                    "a) API Gateway.",
                    "b) Monolitos.",
                    "c) Service Mesh.",
                    "d) Bases de datos distribuidas."
                ],
                correctAnswer: "c) Service Mesh."
            },
            {
                question: "¿Qué componentes principales forman un Service Mesh, según el texto?",
                options: [
                    "a) Zuul y Ribbon.",
                    "b) Kafka y RabbitMQ.",
                    "c) Istio y Envoy.",
                    "d) Kubernetes y Docker."
                ],
                correctAnswer: "c) Istio y Envoy."
            },
            {
                question: "¿Qué es Envoy en el contexto de un Service Mesh?",
                options: [
                    "a) Un servidor de descubrimiento de servicios.",
                    "b) Un proxy que implementa el patrón sidecar.",
                    "c) Un balanceador de carga síncrono.",
                    "d) Un gestor de autenticación centralizado."
                ],
                correctAnswer: "b) Un proxy que implementa el patrón sidecar."
            },
            {
                question: "¿Qué patrón ayuda a los microservicios dialogando con otra parte de la arquitectura llamada Service Mesh?",
                options: [
                    "a) Circuit Breaker.",
                    "b) API Gateway.",
                    "c) Sidecar.",
                    "d) SAGA."
                ],
                correctAnswer: "c) Sidecar."
            },
            {
                question: "¿Qué problema de arquitectura abstrae Service Mesh a los desarrolladores?",
                options: [
                    "a) La lógica de negocio.",
                    "b) El descubrimiento de servicios, balanceo de carga y recuperación.",
                    "c) La interfaz de usuario.",
                    "d) La definición de los dominios de negocio."
                ],
                correctAnswer: "b) El descubrimiento de servicios, balanceo de carga y recuperación."
            },
            {
                question: "¿Qué producto es un ejemplo de centralización en un Service Mesh?",
                options: [
                    "a) Envoy.",
                    "b) Jaeger.",
                    "c) Istio.",
                    "d) Prometheus."
                ],
                correctAnswer: "c) Istio."
            },
            {
                question: "¿Qué concepto se refiere a la centralización y visualización de trazas asociadas con una sola solicitud entre múltiples servicios?",
                options: [
                    "a) Observabilidad.",
                    "b) Trazabilidad.",
                    "c) Agregación de logs.",
                    "d) Monitorización de métricas."
                ],
                correctAnswer: "b) Trazabilidad."
            },
            {
                question: "¿Qué producto se menciona para la trazabilidad distribuida?",
                options: [
                    "a) Elasticsearch.",
                    "b) Grafana.",
                    "c) Jaeger.",
                    "d) Kiali."
                ],
                correctAnswer: "c) Jaeger."
            },
            {
                question: "¿Qué aspectos cubre la observabilidad en microservicios?",
                options: [
                    "a) Solo el rendimiento de la CPU.",
                    "b) Salud, topología, métricas, dashboards y configuración.",
                    "c) Exclusivamente la seguridad.",
                    "d) Únicamente la gestión de bases de datos."
                ],
                correctAnswer: "b) Salud, topología, métricas, dashboards y configuración."
            },
            {
                question: "¿Qué producto se menciona para la gestión de identidades con SSO en seguridad?",
                options: [
                    "a) Prometheus.",
                    "b) Grafana.",
                    "c) Keycloak.",
                    "d) Elasticsearch."
                ],
                correctAnswer: "c) Keycloak."
            },
            {
                question: "¿Es habitual combinar API Gateway y Service Mesh?",
                options: [
                    "a) No, son tecnologías excluyentes.",
                    "b) Sí, es bastante habitual.",
                    "c) Solo en sistemas muy pequeños.",
                    "d) Únicamente si se usa Kubernetes."
                ],
                correctAnswer: "b) Sí, es bastante habitual."
            },
            {
                question: "¿Las bases de datos en microservicios suelen asegurar ACID?",
                options: [
                    "a) Sí, siempre.",
                    "b) No, por ser un sistema altamente distribuido no se puede asegurar ACID.",
                    "c) Solo con bases de datos relacionales.",
                    "d) Depende del lenguaje de programación."
                ],
                correctAnswer: "b) No, por ser un sistema altamente distribuido no se puede asegurar ACID."
            },
            {
                question: "¿Qué significa CQRS?",
                options: [
                    "a) Centralized Query and Reporting System.",
                    "b) Command and Query Responsibility Segregation.",
                    "c) Consistent Quality and Reliability Standard.",
                    "d) Cloud Queue and Resource Scheduling."
                ],
                correctAnswer: "b) Command and Query Responsibility Segregation."
            },
            {
                question: "¿Cuál es el propósito principal del patrón CQRS?",
                options: [
                    "a) Unificar todas las operaciones de CRUD en un solo servicio.",
                    "b) Dividir el microservicio en dos para las operaciones de lectura (Query) y escritura (Command).",
                    "c) Centralizar todas las bases de datos.",
                    "d) Reducir la latencia en las llamadas síncronas."
                ],
                correctAnswer: "b) Dividir el microservicio en dos para las operaciones de lectura (Query) y escritura (Command)."
            },
            {
                question: "¿Por qué el patrón 2PC (Two-Phase Commits) no suele usarse en arquitecturas de microservicios?",
                options: [
                    "a) Porque solo funciona con bases de datos NoSQL.",
                    "b) Por ser muy costoso y bloquear recursos.",
                    "c) Porque no soporta transacciones distribuidas.",
                    "d) Porque es un patrón obsoleto."
                ],
                correctAnswer: "b) Por ser muy costoso y bloquear recursos."
            },
            {
                question: "¿Qué es el algoritmo SAGA?",
                options: [
                    "a) Un tipo de autenticación de microservicios.",
                    "b) Un algoritmo que coordina múltiples cambios en estados, evitando bloquear recursos por largos periodos.",
                    "c) Una herramienta para monitorizar métricas.",
                    "d) Un patrón para el escalado vertical."
                ],
                correctAnswer: "b) Un algoritmo que coordina múltiples cambios en estados, evitando bloquear recursos por largos periodos."
            },
            {
                question: "En el patrón SAGA, ¿cómo se manejan los fallos y los \"rollbacks\"?",
                options: [
                    "a) Con un único rollback global.",
                    "b) Se reintenta o se realiza una transacción compensatoria.",
                    "c) Bloqueando todos los recursos hasta que se resuelva el problema.",
                    "d) Siempre se ignora el error."
                ],
                correctAnswer: "b) Se reintenta o se realiza una transacción compensatoria."
            },
            {
                question: "¿Cuál de los siguientes frameworks NO es de Java para microservicios?",
                options: [
                    "a) Spring Cloud/Boot.",
                    "b) Micronaut.",
                    "c) Flask.",
                    "d) Quarkus."
                ],
                correctAnswer: "c) Flask."
            },
            {
                question: "¿Qué sistema se utiliza para la orquestación de contenedores y agrupa nodos en un clúster?",
                options: [
                    "a) Docker Swarm.",
                    "b) Kubernetes.",
                    "c) Ambos a y b.",
                    "d) Ninguno de los anteriores."
                ],
                correctAnswer: "c) Ambos a y b."
            },
            {
                question: "¿Qué es un \"pod\" en Kubernetes?",
                options: [
                    "a) Un único contenedor.",
                    "b) Un conjunto de uno o más contenedores.",
                    "c) Un nodo de un clúster.",
                    "d) Una base de datos."
                ],
                correctAnswer: "b) Un conjunto de uno o más contenedores."
            },
            {
                question: "¿Qué significa la \"automatización\" en el contexto de despliegues de microservicios?",
                options: [
                    "a) Reducir el número de desarrolladores.",
                    "b) La importancia creciente del CI/CD y DevOps a medida que aumenta el número de microservicios.",
                    "c) La eliminación de todos los tests manuales.",
                    "d) La capacidad de autocuración de los microservicios."
                ],
                correctAnswer: "b) La importancia creciente del CI/CD y DevOps a medida que aumenta el número de microservicios."
            },
            {
                question: "¿Qué representa \"IaC\" (Infrastructure as Code)?",
                options: [
                    "a) Un lenguaje de programación para microservicios.",
                    "b) La configuración de la infraestructura para facilitar los despliegues, usando control de versiones.",
                    "c) Un protocolo de comunicación entre microservicios.",
                    "d) Una herramienta de monitorización de red."
                ],
                correctAnswer: "b) La configuración de la infraestructura para facilitar los despliegues, usando control de versiones."
            },
            {
                question: "¿Qué buscan los \"despliegues Zero-Downtime\"?",
                options: [
                    "a) Reducir el tiempo de desarrollo.",
                    "b) Desplegar microservicios sin que haya interrupción para los usuarios o el servicio.",
                    "c) Eliminar la necesidad de pruebas.",
                    "d) Aumentar la complejidad de la infraestructura."
                ],
                correctAnswer: "b) Desplegar microservicios sin que haya interrupción para los usuarios o el servicio."
            },
            {
                question: "¿Cuál es un modo de despliegue donde la instancia del microservicio se ejecuta directamente en una máquina física sin virtualización?",
                options: [
                    "a) Máquina virtual.",
                    "b) Contenedor.",
                    "c) Máquina física.",
                    "d) PaaS."
                ],
                correctAnswer: "c) Máquina física."
            },
            {
                question: "¿Qué modelo de despliegue abstrae al desarrollador de la gestión inferior y corre sus microservicios como instancias administradas?",
                options: [
                    "a) IaaS.",
                    "b) PaaS.",
                    "c) FaaS.",
                    "d) KaaS."
                ],
                correctAnswer: "b) PaaS."
            },
            {
                question: "¿Qué significa FaaS?",
                options: [
                    "a) Framework as a Service.",
                    "b) Function as a Service.",
                    "c) File as a Service.",
                    "d) Feature as a Service."
                ],
                correctAnswer: "b) Function as a Service."
            },
            {
                question: "¿Qué son AWS Lambda, Google Cloud Functions o Azure Functions en el contexto de despliegue?",
                options: [
                    "a) Ejemplos de PaaS.",
                    "b) Ejemplos de FaaS (serverless).",
                    "c) Plataformas de orquestación de contenedores.",
                    "d) Herramientas de monitorización."
                ],
                correctAnswer: "b) Ejemplos de FaaS (serverless)."
            },
            {
                question: "¿Qué implica KaaS (Kubernetes as a Service)?",
                options: [
                    "a) Creación de máquinas virtuales para microservicios.",
                    "b) Un servicio de orquestación de contenedores en la nube, donde la infraestructura es administrada por el CSP.",
                    "c) La ejecución de microservicios en una máquina física.",
                    "d) La gestión manual de los contenedores."
                ],
                correctAnswer: "b) Un servicio de orquestación de contenedores en la nube, donde la infraestructura es administrada por el CSP."
            },
            {
                question: "¿Cuál es el tipo de test más importante en entornos CI/CD para microservicios?",
                options: [
                    "a) End-to-End.",
                    "b) Servicio.",
                    "c) Unitarios (TDD).",
                    "d) Manuales."
                ],
                correctAnswer: "c) Unitarios (TDD)."
            },
            {
                question: "¿Qué se prueba en los tests de servicio para microservicios?",
                options: [
                    "a) Funciones individuales dentro de un servicio.",
                    "b) El microservicio como un todo, utilizando Stubs y Mocks.",
                    "c) El sistema completo de microservicios.",
                    "d) La base de datos únicamente."
                ],
                correctAnswer: "b) El microservicio como un todo, utilizando Stubs y Mocks."
            },
            {
                question: "¿Qué es la agregación de logs en la observabilidad de microservicios?",
                options: [
                    "a) La eliminación de registros antiguos.",
                    "b) La recopilación de todos los registros de cada microservicio en un solo lugar.",
                    "c) La creación de informes de rendimiento.",
                    "d) La configuración de alertas de seguridad."
                ],
                correctAnswer: "b) La recopilación de todos los registros de cada microservicio en un solo lugar."
            },
            {
                question: "¿Qué producto es usado para la agregación de logs, con un alto volumen de datos no estructurados?",
                options: [
                    "a) Prometheus.",
                    "b) Kibana.",
                    "c) Istio.",
                    "d) Jaeger."
                ],
                correctAnswer: "b) Kibana."
            },
            {
                question: "¿Qué es Prometheus en la observabilidad de microservicios?",
                options: [
                    "a) Una herramienta para la trazabilidad distribuida.",
                    "b) Una base de datos de series de tiempo para monitorizar métricas.",
                    "c) Un gestor de logs.",
                    "d) Un sistema de seguridad."
                ],
                correctAnswer: "b) Una base de datos de series de tiempo para monitorizar métricas."
            }
        ];

        const quizContainer = document.getElementById('quiz-container');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const restartButtonInline = document.getElementById('restart-button-inline');
        const scoreDisplay = document.getElementById('score-display');

        let currentQuestionIndex = 0;
        let userAnswers = new Array(questions.length).fill(null);

        // Function to load the quiz state from localStorage
        function loadQuizState() {
            const savedIndex = localStorage.getItem('currentQuestionIndex');
            const savedAnswers = localStorage.getItem('userAnswers');
            if (savedIndex !== null) {
                currentQuestionIndex = parseInt(savedIndex, 10);
            }
            if (savedAnswers !== null) {
                userAnswers = JSON.parse(savedAnswers);
            }
        }

        // Function to save the quiz state to localStorage
        function saveQuizState() {
            localStorage.setItem('currentQuestionIndex', currentQuestionIndex);
            localStorage.setItem('userAnswers', JSON.stringify(userAnswers));
        }

        // Function to display the current question
        function displayQuestion() {
            // Show quiz content and navigation buttons
            quizContainer.style.display = 'block';
            nextButton.style.display = 'block';
            prevButton.style.display = 'block';
            restartButtonInline.style.display = 'block';
            scoreDisplay.style.display = 'none';

            // Reset quiz container content
            quizContainer.innerHTML = '';
            const questionData = questions[currentQuestionIndex];

            const questionDiv = document.createElement('div');
            questionDiv.className = 'question-container';

            const questionText = document.createElement('div');
            questionText.className = 'question-text';
            questionText.textContent = `Pregunta ${currentQuestionIndex + 1}: ${questionData.question}`;

            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options-container';

            questionData.options.forEach(option => {
                const optionButton = document.createElement('button');
                optionButton.className = 'option-button';
                optionButton.textContent = option;
                optionButton.addEventListener('click', () => {
                    handleAnswer(option);
                });

                optionsDiv.appendChild(optionButton);
            });

            questionDiv.appendChild(questionText);
            questionDiv.appendChild(optionsDiv);
            quizContainer.appendChild(questionDiv);

            // Update navigation button states
            prevButton.disabled = currentQuestionIndex === 0;
            if (currentQuestionIndex === questions.length - 1) {
                nextButton.textContent = 'Finalizar';
            } else {
                nextButton.textContent = 'Siguiente';
            }

            // Highlight the user's previously selected answer if it exists
            const selectedAnswer = userAnswers[currentQuestionIndex];
            if (selectedAnswer) {
                const optionButtons = optionsDiv.querySelectorAll('.option-button');
                optionButtons.forEach(button => {
                    button.disabled = true;
                    if (button.textContent === selectedAnswer) {
                        if (selectedAnswer === questionData.correctAnswer) {
                            button.classList.add('correct');
                        } else {
                            button.classList.add('incorrect');
                        }
                    }
                });
            }
        }

        // Function to handle the user's answer
        function handleAnswer(selectedOption) {
            userAnswers[currentQuestionIndex] = selectedOption;
            saveQuizState();
            displayQuestion();
        }

        // Function to show the final results
        function showResults() {
            quizContainer.style.display = 'none';
            prevButton.style.display = 'none';
            nextButton.style.display = 'none';
            restartButtonInline.style.display = 'block';
            scoreDisplay.style.display = 'block';

            let correctCount = 0;
            let incorrectCount = 0;
            let unansweredCount = 0;

            const incorrectQuestions = [];
            const unansweredQuestions = [];

            // Calculate score and classify questions
            questions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                if (userAnswer === null) {
                    unansweredCount++;
                    unansweredQuestions.push(question);
                } else if (userAnswer === question.correctAnswer) {
                    correctCount++;
                } else {
                    incorrectCount++;
                    incorrectQuestions.push({
                        question: question.question,
                        userAnswer: userAnswer,
                        correctAnswer: question.correctAnswer
                    });
                }
            });
            
            // Display score summary
            scoreDisplay.innerHTML = `
                <h2 class="text-xl font-bold mb-4">Resultados del Test</h2>
                <div class="result-section">
                    <div class="result-item correct">Respuestas correctas: ${correctCount}</div>
                    <div class="result-item incorrect">Respuestas incorrectas: ${incorrectCount}</div>
                    <div class="result-item unanswered">Preguntas sin contestar: ${unansweredCount}</div>
                </div>
            `;
            
            // Display review section for incorrect and unanswered questions
            if (incorrectQuestions.length > 0 || unansweredQuestions.length > 0) {
                const reviewSection = document.createElement('div');
                reviewSection.className = 'review-section';
                
                const reviewTitle = document.createElement('h3');
                reviewTitle.className = 'text-lg font-bold mb-4';
                reviewTitle.textContent = 'Revisión de Preguntas';
                reviewSection.appendChild(reviewTitle);

                // Add incorrect questions to review
                incorrectQuestions.forEach(item => {
                    const reviewDiv = document.createElement('div');
                    reviewDiv.className = 'review-question';
                    reviewDiv.innerHTML = `
                        <p class="review-question-text">${item.question}</p>
                        <p class="review-answer-user">Tu respuesta: ${item.userAnswer}</p>
                        <p class="review-answer-correct">Respuesta correcta: ${item.correctAnswer}</p>
                    `;
                    reviewSection.appendChild(reviewDiv);
                });

                // Add unanswered questions to review
                unansweredQuestions.forEach(item => {
                    const reviewDiv = document.createElement('div');
                    reviewDiv.className = 'review-question';
                    reviewDiv.innerHTML = `
                        <p class="review-question-text">${item.question}</p>
                        <p class="review-answer-user">Tu respuesta: Sin contestar</p>
                        <p class="review-answer-correct">Respuesta correcta: ${item.correctAnswer}</p>
                    `;
                    reviewSection.appendChild(reviewDiv);
                });

                scoreDisplay.appendChild(reviewSection);
            }
        }

        // Function to restart the quiz
        function restartQuiz() {
            localStorage.removeItem('currentQuestionIndex');
            localStorage.removeItem('userAnswers');
            currentQuestionIndex = 0;
            userAnswers = new Array(questions.length).fill(null);
            displayQuestion();
        }

        // Event listeners for navigation and restart buttons
        prevButton.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                saveQuizState();
                displayQuestion();
            }
        });

        nextButton.addEventListener('click', () => {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                saveQuizState();
                displayQuestion();
            } else if (currentQuestionIndex === questions.length - 1) {
                showResults();
            }
        });
        
        restartButtonInline.addEventListener('click', restartQuiz);

        // Initial loading of the quiz
        loadQuizState();
        displayQuestion();
    </script>
</body>
</html>
