<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SERVICIOS WEB</title>
    <!-- Enlace a Tailwind CSS para las clases de la estructura HTML -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS completo para el estilo del quiz -->
    <style>
        /* Estilos generales del cuerpo */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }

        /* Contenedor principal del quiz */
        .container {
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 30px;
            max-width: 800px;
            width: 100%;
            margin-top: 20px;
        }

        /* Tarjeta de la pregunta */
        .question-card {
            background-color: #f8fafc;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease-in-out;
        }

        /* Estilo para la tarjeta de pregunta correcta */
        .question-card.correct {
            background-color: #d4edda;
            border-color: #28a745;
        }

        /* Estilo para la tarjeta de pregunta incorrecta */
        .question-card.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
        }

        /* Texto de la pregunta */
        .question-text {
            font-size: 1.15rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        /* Botones de opciones */
        .option-button {
            display: block;
            width: 100%;
            text-align: left;
            padding: 12px 18px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid #cbd5e0;
            background-color: #ffffff;
            color: #4a5568;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        /* Efecto hover para los botones de opciones */
        .option-button:hover:not(.disabled) {
            background-color: #e2e8f0;
            border-color: #a0aec0;
        }

        /* Estilo para el botón de opción seleccionado */
        .option-button.selected {
            border-color: #4299e1;
            background-color: #ebf8ff;
            font-weight: 600;
        }

        /* Estilo para la respuesta correcta */
        .option-button.correct-answer {
            background-color: #28a745;
            color: #ffffff;
            border-color: #28a745;
            font-weight: 700;
        }

        /* Estilo para la respuesta incorrecta */
        .option-button.incorrect-answer {
            background-color: #dc3545;
            color: #ffffff;
            border-color: #dc3545;
            font-weight: 700;
        }

        /* Estilo para los botones deshabilitados */
        .option-button.disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }

        /* Contenedor de la solución */
        .solution {
            margin-top: 15px;
            padding: 10px 15px;
            border-radius: 8px;
            background-color: #e0f2f7;
            color: #2c5282;
            font-size: 0.95rem;
            font-weight: 500;
            border: 1px solid #90cdf4;
        }

        /* Contenedor del feedback (correcto/incorrecto) */
        .feedback {
            margin-top: 15px;
            font-weight: 600;
            font-size: 1rem;
            text-align: center;
        }

        /* Estilo para feedback correcto */
        .feedback.correct {
            color: #28a745;
        }

        /* Estilo para feedback incorrecto */
        .feedback.incorrect {
            color: #dc3545;
        }

        /* Contenedor de los botones de navegación */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }

        /* Estilo base para los botones de navegación */
        .nav-button {
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            flex-grow: 1;
            text-align: center;
        }

        /* Estilo para el botón "Anterior" */
        .nav-button.prev {
            background-color: #6b7280;
            color: #ffffff;
        }
        .nav-button.prev:hover:not(:disabled) {
            background-color: #4b5563;
            transform: translateY(-2px);
        }

        /* Estilo para el botón "Siguiente" */
        .nav-button.next {
            background-color: #4299e1;
            color: #ffffff;
        }
        .nav-button.next:hover:not(:disabled) {
            background-color: #3182ce;
            transform: translateY(-2px);
        }

        /* Estilo para el botón de reinicio en línea */
        .nav-button.restart-inline {
            background-color: #f50b0b;
            color: #ffffff;
        }
        .nav-button.restart-inline:hover:not(:disabled) {
            background-color: #ac0505;
            transform: translateY(-2px);
        }

        /* Estilo para los botones deshabilitados */
        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Barra de progreso */
        .progress-bar-container {
            width: 100%;
            background-color: #e2e8f0;
            border-radius: 5px;
            height: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: #4299e1;
            width: 0%;
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        /* Visualización de la puntuación final */
        .score-display {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: #2d3748;
            margin-top: 20px;
        }

        /* Resumen de resultados */
        .results-summary {
            margin-top: 20px;
            padding: 20px;
            background-color: #f8fafc;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
        }

        .results-summary p {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #2d3748;
        }

        .results-summary p strong {
            font-weight: 700;
        }

        /* Botón de reinicio final */
        .restart-button {
            display: block;
            width: fit-content;
            margin: 20px auto 0 auto;
            padding: 12px 30px;
            background-color: #48bb78;
            color: #ffffff;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .restart-button:hover {
            background-color: #38a169;
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
         <h1 style="color: #003366; font-family: 'Georgia', serif; font-size: 2rem; text-align: center; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);">SERVICIOS WEB</h1>

        <!-- Barra de progreso -->
        <div class="progress-bar-container">
            <div id="progressBar" class="progress-bar"></div>
        </div>

        <!-- Contenedor principal de las preguntas -->
        <div id="quizContainer">
            <!-- Las preguntas se cargarán dinámicamente aquí -->
        </div>

        <!-- Botones de navegación -->
        <div class="navigation-buttons">
            <button id="prevBtn" class="nav-button prev" disabled>Anterior</button>
            <button id="restartInlineBtn" class="nav-button restart-inline">Reiniciar Test</button>
            <button id="nextBtn" class="nav-button next">Siguiente</button>
        </div>

        <!-- Contenedor de la puntuación final -->
        <div id="finalScore" class="hidden">
            <div class="score-display"></div>
            <div class="results-summary">
                <p><strong>Preguntas Correctas:</strong> <span id="correctCount">0</span></p>
                <p><strong>Preguntas Incorrectas:</strong> <span id="incorrectCount">0</span></p>
                <p><strong>Preguntas Sin Contestar:</strong> <span id="unansweredCount">0</span></p>
            </div>
            <button id="restartBtn" class="restart-button">Reiniciar Test</button>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "¿Cuál de las siguientes afirmaciones es correcta respecto a la historia de la distribución de funcionalidades en aplicaciones?",
                options: [
                    "a) Antes, las funcionalidades se distribuían entre múltiples máquinas.",
                    "b) RPC es un protocolo que opera sobre HTTP.",
                    "c) CORBA permite la interoperabilidad entre clientes Java y servidores C++.",
                    "d) DCOM es un producto de código abierto."
                ],
                correctAnswer: "c) CORBA permite la interoperabilidad entre clientes Java y servidores C++."
            },
            {
                question: "¿Qué tipo de cliente y servidor se asocian típicamente con RMI (Remote Method Invocation)?",
                options: [
                    "a) Cliente C++ y Servidor Java.",
                    "b) Cliente Java JRE y Servidor Java.",
                    "c) Cliente .NET y Servidor .NET.",
                    "d) Cliente Python y Servidor Python."
                ],
                correctAnswer: "b) Cliente Java JRE y Servidor Java."
            },
            {
                question: "Según el documento, ¿cuáles son los estándares de la W3C para servicios web?",
                options: [
                    "a) REST y GraphQL.",
                    "b) WSDL y SOAP.",
                    "c) gRPC y DCOM.",
                    "d) RMI y CORBA."
                ],
                correctAnswer: "b) WSDL y SOAP."
            },
            {
                question: "¿Cuál de las siguientes afirmaciones describe correctamente REST?",
                options: [
                    "a) Es un estándar de la W3C.",
                    "b) Utiliza XML como formato principal.",
                    "c) No es un estándar y se basa en HTTP + JSON.",
                    "d) Generalmente soporta múltiples endpoints para una API."
                ],
                correctAnswer: "c) No es un estándar y se basa en HTTP + JSON."
            },
            {
                question: "¿Quién desarrolló GraphQL y qué característica distintiva ofrece a los clientes?",
                options: [
                    "a) Google; busca el rendimiento.",
                    "b) Microsoft; ofrece una API unificada.",
                    "c) Facebook; permite a cada cliente especificar la petición de datos.",
                    "d) W3C; define la descripción de servicios."
                ],
                correctAnswer: "c) Facebook; permite a cada cliente especificar la petición de datos."
            },
            {
                question: "¿gRPC, desarrollado por Google, se caracteriza por?",
                options: [
                    "a) Su base en XML sobre HTTP/1.1.",
                    "b) Ser un protocolo sin estado sobre TCP.",
                    "c) Ser como RPC sobre HTTP y buscar el rendimiento.",
                    "d) Ser un estándar de la W3C para la descripción de servicios."
                ],
                correctAnswer: "c) Ser como RPC sobre HTTP y buscar el rendimiento."
            },
            {
                question: "¿Cuál es el propósito principal de la WS-I Basic Profile?",
                options: [
                    "a) Definir lenguajes de programación.",
                    "b) Asegurar la interoperabilidad de los servicios web.",
                    "c) Establecer un registro centralizado de servicios.",
                    "d) Promover el uso de RESTful APIs."
                ],
                correctAnswer: "b) Asegurar la interoperabilidad de los servicios web."
            },
            {
                question: "Según el documento, ¿qué describe el lenguaje WSDL?",
                options: [
                    "a) El registro de servicios.",
                    "b) El protocolo de seguridad.",
                    "c) La descripción de servicios.",
                    "d) El formato de intercambio de datos binarios."
                ],
                correctAnswer: "c) La descripción de servicios."
            },
            {
                question: "¿Cuál de los siguientes no es un estándar de la W3C, según el documento, sino de OASIS, y no se utiliza?",
                options: [
                    "a) WSDL.",
                    "b) SOAP.",
                    "c) UDDI.",
                    "d) WS-Security."
                ],
                correctAnswer: "c) UDDI."
            },
            {
                question: "¿Cuál es el API de Java que se utiliza para conectarse a un servicio UDDI?",
                options: [
                    "a) JAX-WS.",
                    "b) JAXR.",
                    "c) JAX-RS.",
                    "d) JAXB."
                ],
                correctAnswer: "b) JAXR."
            },
            {
                question: "En el contexto de UDDI, ¿qué tipo de información se encontraría en las 'Páginas Verdes'?",
                options: [
                    "a) Información de contacto.",
                    "b) Categorización de servicios.",
                    "c) Información técnica de acceso al servicio.",
                    "d) Datos de autenticación."
                ],
                correctAnswer: "c) Información técnica de acceso al servicio."
            },
            {
                question: "El protocolo SOAP se basa en:",
                options: [
                    "a) JSON sobre HTTP.",
                    "b) XML sobre HTTP.",
                    "c) Binary sobre TCP.",
                    "d) HTML sobre SMTP."
                ],
                correctAnswer: "b) XML sobre HTTP."
            },
            {
                question: "¿Cuál es el API de Java para crear e invocar servicios SOAP?",
                options: [
                    "a) JAX-RS.",
                    "b) JAXB.",
                    "c) JAX-WS.",
                    "d) JAXR."
                ],
                correctAnswer: "c) JAX-WS."
            },
            {
                question: "¿Qué ventaja ofrece JAX-WS en cuanto a la definición de servicios, según el texto?",
                options: [
                    "a) Requiere la edición manual de archivos XML.",
                    "b) Permite definir servicios solo con anotaciones en Java.",
                    "c) Solo soporta servicios REST.",
                    "d) Está obsoleto en la versión 2.0."
                ],
                correctAnswer: "b) Permite definir servicios solo con anotaciones en Java."
            },
            {
                question: "¿Qué estándar creó OASIS para añadir seguridad a los mensajes SOAP?",
                options: [
                    "a) WS-Basic Profile.",
                    "b) XML Signature.",
                    "c) WS-Security.",
                    "d) MTOM."
                ],
                correctAnswer: "c) WS-Security."
            },
            {
                question: "WS-Security añade seguridad a los mensajes SOAP mediante:",
                options: [
                    "a) El cifrado de la comunicación HTTP.",
                    "b) Una cabecera específica en el mensaje SOAP.",
                    "c) Un nuevo protocolo de transporte.",
                    "d) La integración con OAuth."
                ],
                correctAnswer: "b) Una cabecera específica en el mensaje SOAP."
            },
            {
                question: "Para enviar credenciales en la autenticación de clientes con WS-Security, se utiliza:",
                options: [
                    "a) BinarySecurityToken.",
                    "b) XML Encryption.",
                    "c) UsernameToken.",
                    "d) SAML Token."
                ],
                correctAnswer: "c) UsernameToken."
            },
            {
                question: "¿Para qué se utiliza MTOM en el contexto de los servicios web?",
                options: [
                    "a) Para cifrar mensajes SOAP.",
                    "b) Para la firma digital de documentos XML.",
                    "c) Para el envío de datos binarios.",
                    "d) Para definir la interfaz de un servicio."
                ],
                correctAnswer: "c) Para el envío de datos binarios."
            },
            {
                question: "MTOM está incluido en la versión:",
                options: [
                    "a) 1.0 de WS-I Basic Profile.",
                    "b) 1.2 de WS-I Basic Profile.",
                    "c) 2.0 de WSDL.",
                    "d) 1.1 de SOAP."
                ],
                correctAnswer: "b) 1.2 de WS-I Basic Profile."
            },
            {
                question: "¿Qué se utiliza para definir los tipos usados en los mensajes WSDL, según el documento?",
                options: [
                    "a) XML Signature.",
                    "b) XSD (XML Schema Definition).",
                    "c) SOAPAction.",
                    "d) MIME."
                ],
                correctAnswer: "b) XSD (XML Schema Definition)."
            },
            {
                question: "En WSDL 2.0, ¿cómo se denomina el elemento que en WSDL 1.1 se llamaba portType?",
                options: [
                    "a) definitions.",
                    "b) message.",
                    "c) interface.",
                    "d) binding."
                ],
                correctAnswer: "c) interface."
            },
            {
                question: "¿Cómo realizan las peticiones los servicios web SOAP por HTTP y qué códigos de respuesta generan típicamente?",
                options: [
                    "a) GET; códigos 200 o 404.",
                    "b) POST; códigos 200 o 500.",
                    "c) PUT; códigos 201 o 400.",
                    "d) DELETE; códigos 202 o 503."
                ],
                correctAnswer: "b) POST; códigos 200 o 500."
            },
            {
                question: "¿Por qué los servicios web SOAP siempre se invocan con POST, según el texto?",
                options: [
                    "a) Para mejorar el rendimiento.",
                    "b) Porque no tienen estado.",
                    "c) Porque mandan cuerpo del mensaje.",
                    "d) Para cumplir con el estándar W3C."
                ],
                correctAnswer: "c) Porque mandan cuerpo del mensaje."
            },
            {
                question: "¿Qué es XSD (XML Schema Definition)?",
                options: [
                    "a) Un protocolo de comunicación.",
                    "b) Un lenguaje de esquema para describir la estructura y restricciones de documentos XML.",
                    "c) Una herramienta para pruebas de servicios web.",
                    "d) Un API de Java para la creación de servicios."
                ],
                correctAnswer: "b) Un lenguaje de esquema para describir la estructura y restricciones de documentos XML."
            },
            {
                question: "¿Qué herramienta se menciona para crear los archivos Java y .class a partir de un WSDL ya publicado en la parte cliente Java?",
                options: [
                    "a) SoapUI.",
                    "b) AXIS2.",
                    "c) wsimport.",
                    "d) JbossWS."
                ],
                correctAnswer: "c) wsimport."
            },
            {
                question: "¿Qué anotación JAX-WS se utiliza para especificar que una clase debe convertirse en un servicio web?",
                options: [
                    "a) @WebMethod.",
                    "b) @WebParam.",
                    "c) @WebService.",
                    "d) @WebResult."
                ],
                correctAnswer: "c) @WebService."
            },
            {
                question: "¿Qué propiedad de la anotación @WebService equivale a wsdl:portType?",
                options: [
                    "a) serviceName.",
                    "b) targetNamespace.",
                    "c) name.",
                    "d) portName."
                ],
                correctAnswer: "c) name."
            },
            {
                question: "¿Qué propiedad de la anotación @WebService permite desligar la interfaz de la implementación?",
                options: [
                    "a) serviceName.",
                    "b) endpointinterface.",
                    "c) wsdlLocation.",
                    "d) targetNamespace."
                ],
                correctAnswer: "b) endpointinterface."
            },
            {
                question: "¿Qué anotación JAX-WS se coloca sobre un método para exponerlo en el servicio web?",
                options: [
                    "a) @WebService.",
                    "b) @WebParam.",
                    "c) @WebMethod.",
                    "d) @WebResult."
                ],
                correctAnswer: "c) @WebMethod."
            },
            {
                question: "Si se desea excluir una operación del servicio web, ¿qué propiedad de @WebMethod se debe establecer y a qué valor?",
                options: [
                    "a) action a \"false\".",
                    "b) exclude a \"true\".",
                    "c) operationName a \"null\".",
                    "d) name a \"none\"."
                ],
                correctAnswer: "b) exclude a \"true\"."
            },
            {
                question: "La anotación @WebParam se utiliza para:",
                options: [
                    "a) Exponer una operación en el servicio web.",
                    "b) Personalizar el mapeo de un parámetro.",
                    "c) Especificar el tipo de respuesta.",
                    "d) Indicar la ruta de acceso al servicio."
                ],
                correctAnswer: "b) Personalizar el mapeo de un parámetro."
            },
            {
                question: "¿Qué es REST según el documento?",
                options: [
                    "a) Un protocolo de seguridad.",
                    "b) Un estilo de arquitectura para servicios hipermedia.",
                    "c) Una herramienta para probar servicios SOAP.",
                    "d) Un lenguaje de descripción de interfaces."
                ],
                correctAnswer: "b) Un estilo de arquitectura para servicios hipermedia."
            },
            {
                question: "Uno de los principios fundamentales de REST es un protocolo Cliente-Servidor sin estado, como:",
                options: [
                    "a) FTP.",
                    "b) SMTP.",
                    "c) HTTP.",
                    "d) TCP."
                ],
                correctAnswer: "c) HTTP."
            },
            {
                question: "¿Qué significa HATEOAS en el contexto de REST?",
                options: [
                    "a) Hypertext Application Transfer Object And State.",
                    "b) Hypermedia As The Engine Of Application State.",
                    "c) High Availability Transfer Of Application Services.",
                    "d) Hierarchical Access To Encapsulated Object State."
                ],
                correctAnswer: "b) Hypermedia As The Engine Of Application State."
            },
            {
                question: "¿Qué API de Java se utiliza para servicios REST?",
                options: [
                    "a) JAX-WS.",
                    "b) JAXB.",
                    "c) JAX-RS.",
                    "d) JAXR."
                ],
                correctAnswer: "c) JAX-RS."
            },
            {
                question: "En el contexto de las APIs REST, ¿cuál de las siguientes es considerada una mala práctica según la teoría?",
                options: [
                    "a) Utilizar JSON para el cuerpo de la respuesta.",
                    "b) Meter verbos en las URIs (Ej: /borrar_usuario).",
                    "c) Utilizar GET para consultas.",
                    "d) Devolver recursos con \"links\"."
                ],
                correctAnswer: "b) Meter verbos en las URIs (Ej: /borrar_usuario)."
            },
            {
                question: "¿Qué se utiliza comúnmente para la autenticación en REST?",
                options: [
                    "a) WS-Security.",
                    "b) OAuth / JWT / HTTP Basic.",
                    "c) SAML Token.",
                    "d) Kerberos Ticket."
                ],
                correctAnswer: "b) OAuth / JWT / HTTP Basic."
            },
            {
                question: "¿Qué significa la \"Signature\" en un token JWT?",
                options: [
                    "a) Un número aleatorio para identificar el token.",
                    "b) El resultado de un HMAC generado usando el algoritmo definido en la cabecera y una clave secreta del servidor.",
                    "c) Información del usuario codificada en Base64.",
                    "d) Los metadatos del token."
                ],
                correctAnswer: "b) El resultado de un HMAC generado usando el algoritmo definido en la cabecera y una clave secreta del servidor."
            },
            {
                question: "¿Qué se informa en el Payload de un token JWT?",
                options: [
                    "a) La clave secreta del servidor.",
                    "b) Metadatos e información no sensible como el rol de una persona.",
                    "c) La firma digital del token.",
                    "d) El algoritmo de cifrado."
                ],
                correctAnswer: "b) Metadatos e información no sensible como el rol de una persona."
            },
            {
                question: "¿Qué \"claim\" en JWT identifica la marca temporal a partir de la cual el JWT no tiene que ser aceptado?",
                options: [
                    "a) sub.",
                    "b) iat.",
                    "c) exp.",
                    "d) aud."
                ],
                correctAnswer: "c) exp."
            },
            {
                question: "¿Cuál es la razón principal por la que un usuario manda el token JWT en cada petición?",
                options: [
                    "a) Para garantizar la confidencialidad de los datos.",
                    "b) Para autenticarse, ya que el servicio es stateless.",
                    "c) Para solicitar nuevos privilegios.",
                    "d) Para verificar la integridad de la petición."
                ],
                correctAnswer: "b) Para autenticarse, ya que el servicio es stateless."
            },
            {
                question: "¿Qué anotación JAX-RS se utiliza para especificar la ruta de acceso relativa para una clase recurso o método?",
                options: [
                    "a) @GET.",
                    "b) @Produces.",
                    "c) @Path.",
                    "d) @QueryParam."
                ],
                correctAnswer: "c) @Path."
            },
            {
                question: "Para especificar los tipos de medios MIME de respuesta en JAX-RS, se utiliza la anotación:",
                options: [
                    "a) @Consumes.",
                    "b) @Produces.",
                    "c) @Path.",
                    "d) @HeaderParam."
                ],
                correctAnswer: "b) @Produces."
            },
            {
                question: "¿Qué anotación JAX-RS enlaza el parámetro a un segmento de ruta?",
                options: [
                    "a) @QueryParam.",
                    "b) @FormParam.",
                    "c) @PathParam.",
                    "d) @MatrixParam."
                ],
                correctAnswer: "c) @PathParam."
            },
            {
                question: "¿Qué anotación JAX-RS enlaza el parámetro al valor de un parámetro de consulta?",
                options: [
                    "a) @CookieParam.",
                    "b) @HeaderParam.",
                    "c) @QueryParam.",
                    "d) @FormParam."
                ],
                correctAnswer: "c) @QueryParam."
            },
            {
                question: "¿Qué se indica cuando un archivo .NET WS termina en .asmx?",
                options: [
                    "a) Que es un servicio RESTful.",
                    "b) Que es un servicio web de .NET.",
                    "c) Que utiliza GraphQL.",
                    "d) Que es un servicio gRPC."
                ],
                correctAnswer: "b) Que es un servicio web de .NET."
            },
            {
                question: "¿Qué permite GraphQL a cada cliente, según el documento?",
                options: [
                    "a) Seleccionar el endpoint de acceso.",
                    "b) Especificar la petición de datos.",
                    "c) Definir nuevos esquemas de datos en tiempo real.",
                    "d) Controlar el protocolo de comunicación."
                ],
                correctAnswer: "b) Especificar la petición de datos."
            },
            {
                question: "En GraphQL, ¿cómo se definen las operaciones de consulta?",
                options: [
                    "a) Con Mutations.",
                    "b) Con Queries.",
                    "c) Con Subscriptions.",
                    "d) Con Directives."
                ],
                correctAnswer: "b) Con Queries."
            },
            {
                question: "¿Qué son las Mutations en GraphQL?",
                options: [
                    "a) Operaciones que consultan información.",
                    "b) Operaciones que alteran la información del servicio web.",
                    "c) Definiciones de tipos de datos.",
                    "d) Esquemas de autenticación."
                ],
                correctAnswer: "b) Operaciones que alteran la información del servicio web."
            },
            {
                question: "¿Qué utiliza gRPC para la definición de mensajes y el formato de intercambio de datos?",
                options: [
                    "a) XML Schema.",
                    "b) JSON.",
                    "c) Protocol Buffers o Protobuf.",
                    "d) WSDL."
                ],
                correctAnswer: "c) Protocol Buffers o Protobuf."
            },
            {
                question: "¿Sobre qué protocolo se manda la información en gRPC y en qué formato?",
                options: [
                    "a) HTTP/1.1 en formato JSON.",
                    "b) HTTP/2 en formato binario.",
                    "c) TCP en formato XML.",
                    "d) UDP en formato texto."
                ],
                correctAnswer: "b) HTTP/2 en formato binario."
            },
            {
                question: "¿Qué es la Arquitectura Orientada a Servicios (SOA)?",
                options: [
                    "a) Un lenguaje de programación.",
                    "b) Un tipo de diseño de software que permite reutilizar elementos mediante interfaces de servicios que se comunican a través de una red con un lenguaje común.",
                    "c) Una base de datos distribuida.",
                    "d) Un protocolo de enrutamiento de red."
                ],
                correctAnswer: "b) Un tipo de diseño de software que permite reutilizar elementos mediante interfaces de servicios que se comunican a través de una red con un lenguaje común."
            },
            {
                question: "La arquitectura SOA se rige por:",
                options: [
                    "a) Las especificaciones de la W3C.",
                    "b) Los principios descritos en el manifiesto SOA.",
                    "c) Los estándares de OASIS.",
                    "d) Las directrices de la WS-I Basic Profile."
                ],
                correctAnswer: "b) Los principios descritos en el manifiesto SOA."
            },
            {
                question: "¿Qué es un ESB (Bus de Servicio Empresarial)?",
                options: [
                    "a) Un protocolo de comunicación.",
                    "b) Un modelo de arquitectura de software que gestiona la comunicación entre servicios web.",
                    "c) Una base de datos centralizada.",
                    "d) Una herramienta de desarrollo de APIs."
                ],
                correctAnswer: "b) Un modelo de arquitectura de software que gestiona la comunicación entre servicios web."
            },
            {
                question: "Una de las funciones principales del ESB es:",
                options: [
                    "a) Crear nuevas funcionalidades de negocio.",
                    "b) Recibir mensajes en diferentes estándares y transformarlos para permitir el entendimiento entre sistemas.",
                    "c) Almacenar grandes volúmenes de datos.",
                    "d) Proporcionar seguridad de punto a punto para los servicios."
                ],
                correctAnswer: "b) Recibir mensajes en diferentes estándares y transformarlos para permitir el entendimiento entre sistemas."
            },
            {
                question: "¿Qué tecnología se menciona como \"Remote Procedure Call\" y va sobre TCP?",
                options: [
                    "a) CORBA.",
                    "b) RMI.",
                    "c) RPC.",
                    "d) DCOM."
                ],
                correctAnswer: "c) RPC."
            },
            {
                question: "¿Cuál es la principal diferencia entre WSDL 1.1 y WSDL 2.0 que se observa en los nombres de las secciones?",
                options: [
                    "a) definitions pasa a ser description y portType a interface.",
                    "b) message pasa a ser payload.",
                    "c) binding pasa a ser protocol.",
                    "d) service pasa a ser endpoint."
                ],
                correctAnswer: "a) definitions pasa a ser description y portType a interface."
            },
            {
                question: "Si en una respuesta REST se observa la inclusión de \"links\", ¿qué principio se está utilizando?",
                options: [
                    "a) Atomicity.",
                    "b) Idempotency.",
                    "c) HATEOAS.",
                    "d) Statelessness."
                ],
                correctAnswer: "c) HATEOAS."
            },
            {
                question: "¿Qué herramientas se mencionan como API managers para gobernar y gestionar APIs?",
                options: [
                    "a) SoapUI.",
                    "b) SwagerHub / OpenAPI.",
                    "c) JAX-WS y JAX-RS.",
                    "d) wsimport y Apache CXF."
                ],
                correctAnswer: "b) SwagerHub / OpenAPI."
            },
            {
                question: "¿Cuál de las siguientes anotaciones JAX-WS se utiliza para personalizar el mapeo del resultado de un método?",
                options: [
                    "a) @WebMethod.",
                    "b) @WebParam.",
                    "c) @WebResult.",
                    "d) @RequestWrapper."
                ],
                correctAnswer: "c) @WebResult."
            },
            {
                question: "¿Qué información se incluye en el Header de un token JWT?",
                options: [
                    "a) La clave secreta del servidor.",
                    "b) El algoritmo que se usa para generar la Signature.",
                    "c) Los datos sensibles del usuario.",
                    "d) El tiempo de expiración del token."
                ],
                correctAnswer: "b) El algoritmo que se usa para generar la Signature."
            },
            {
                question: "¿Qué significa el \"claim\" sub en un JWT?",
                options: [
                    "a) Subject, identifica el objeto o usuario en nombre del cual fue emitido el JWT.",
                    "b) Subscriber, identifica al destinatario del JWT.",
                    "c) Substring, indica una porción del token.",
                    "d) Submission, marca el momento de envío."
                ],
                correctAnswer: "a) Subject, identifica el objeto o usuario en nombre del cual fue emitido el JWT."
            },
            {
                question: "Las consultas en REST se realizan siempre con el verbo HTTP:",
                options: [
                    "a) POST.",
                    "b) PUT.",
                    "c) GET.",
                    "d) DELETE."
                ],
                correctAnswer: "c) GET."
            },
            {
                question: "Si se realiza una petición PUT a /users/123 con un cuerpo JSON, ¿qué código de respuesta HTTP indica que el recurso fue actualizado o creado?",
                options: [
                    "a) 404.",
                    "b) 500.",
                    "c) 200 o 201.",
                    "d) 40X."
                ],
                correctAnswer: "c) 200 o 201."
            },
            {
                question: "¿Qué frameworks o productos se mencionan como implementaciones de JAX-RS?",
                options: [
                    "a) AXIS2, CXF, JbossWS.",
                    "b) Jersey, RESTeasy, Restlet.",
                    "c) Orbix, Metro.",
                    "d) Lighthouse, Apollo Client."
                ],
                correctAnswer: "b) Jersey, RESTeasy, Restlet."
            },
            {
                question: "¿Cuál de los siguientes no es un principio fundamental de REST?",
                options: [
                    "a) Protocolo Cliente-Servidor sin estado.",
                    "b) Operaciones bien definidas (verbos HTTP + Recursos).",
                    "c) Navegación hipermedia (HATEOAS).",
                    "d) Acoplamiento fuerte entre cliente y servidor."
                ],
                correctAnswer: "d) Acoplamiento fuerte entre cliente y servidor."
            },
            {
                question: "¿Qué tipo de información se encontraría en las \"Páginas Amarillas\" de UDDI?",
                options: [
                    "a) Información de contacto.",
                    "b) Categorización de servicios.",
                    "c) Información técnica de acceso.",
                    "d) Historial de uso del servicio."
                ],
                correctAnswer: "b) Categorización de servicios."
            },
            {
                question: "En la arquitectura SOA, un \"Servicio\" se define como:",
                options: [
                    "a) Una aplicación monolítica.",
                    "b) Un conjunto de interfaces de usuario.",
                    "c) Representación lógica de una actividad de negocio con un resultado de negocio específico.",
                    "d) Un componente de hardware."
                ],
                correctAnswer: "c) Representación lógica de una actividad de negocio con un resultado de negocio específico."
            },
            {
                question: "¿Cuál de las siguientes afirmaciones sobre UDDI es correcta según el documento?",
                options: [
                    "a) Es un estándar de la W3C.",
                    "b) Es de OASIS y no se usa.",
                    "c) Es el API de Java para SOAP.",
                    "d) Es un protocolo de seguridad."
                ],
                correctAnswer: "b) Es de OASIS y no se usa."
            },
            {
                question: "¿Qué se utiliza en WS-Security para mandar certificados X509, SAML Token o Kerberos Ticket?",
                options: [
                    "a) UsernameToken.",
                    "b) BinarySecurityToken.",
                    "c) XML Signature.",
                    "d) XML Encryption."
                ],
                correctAnswer: "b) BinarySecurityToken."
            },
            {
                question: "¿Cuál es la anotación JAX-WS que indica la clase Java que mapea la petición del WS para un método?",
                options: [
                    "a) @WebMethod.",
                    "b) @WebResult.",
                    "c) @RequestWrapper.",
                    "d) @WebParam."
                ],
                correctAnswer: "c) @RequestWrapper."
            },
            {
                question: "¿Qué propiedad de @RequestWrapper define el nombre de la operación tal y como estará definida en el WSDL que se genere?",
                options: [
                    "a) className.",
                    "b) targetNamespace.",
                    "c) localName.",
                    "d) action."
                ],
                correctAnswer: "c) localName."
            },
            {
                question: "¿Cuál de las siguientes es una anotación JAX-RS para los parámetros que enlaza el parámetro al valor de un parámetro de matriz?",
                options: [
                    "a) @QueryParam.",
                    "b) @PathParam.",
                    "c) @MatrixParam.",
                    "d) @HeaderParam."
                ],
                correctAnswer: "c) @MatrixParam."
            },
            {
                question: "Si un servicio web utiliza MTOM, ¿por qué se considera \"liviano\"?",
                options: [
                    "a) Porque solo envía metadatos.",
                    "b) Porque el archivo binario va por fuera, por HTTP.",
                    "c) Porque usa compresión XML.",
                    "d) Porque el tamaño del mensaje SOAP es muy pequeño."
                ],
                correctAnswer: "b) Porque el archivo binario va por fuera, por HTTP."
            },
            {
                question: "¿Qué se menciona como un servidor GraphQL conocido para PHP que se integra con Laravel?",
                options: [
                    "a) Apollo Client.",
                    "b) Lighthouse.",
                    "c) gRPC.",
                    "d) Protobuf."
                ],
                correctAnswer: "b) Lighthouse."
            },
            {
                question: "¿Cuál es la herramienta cliente GraphQL para Java?",
                options: [
                    "a) Lighthouse.",
                    "b) Apollo Client.",
                    "c) SoapUI.",
                    "d) wsimport."
                ],
                correctAnswer: "b) Apollo Client."
            },
            {
                question: "¿Qué se define en el binding de un WSDL?",
                options: [
                    "a) Los tipos de datos.",
                    "b) Las operaciones.",
                    "c) Los protocolos de comunicación usados.",
                    "d) Las direcciones de acceso."
                ],
                correctAnswer: "c) Los protocolos de comunicación usados."
            },
            {
                question: "¿Cuál de los siguientes no es un \"claim\" estandarizado por IANA para JWT según el documento?",
                options: [
                    "a) sub.",
                    "b) exp.",
                    "c) iat.",
                    "d) hash."
                ],
                correctAnswer: "d) hash."
            },
            {
                question: "Un documento SOAP es un documento de tipo:",
                options: [
                    "a) HTML.",
                    "b) JSON.",
                    "c) XML.",
                    "d) Texto plano."
                ],
                correctAnswer: "c) XML."
            },
            {
                question: "¿Qué tipo de información se encontraría en las \"Páginas Blancas\" de UDDI?",
                options: [
                    "a) Información de contacto.",
                    "b) Datos de ubicación geográfica.",
                    "c) Especificaciones técnicas.",
                    "d) Historial de transacciones."
                ],
                correctAnswer: "a) Información de contacto."
            },
            {
                question: "¿Cómo se generan los WSDL automáticamente, según el texto?",
                options: [
                    "a) A partir de un XML predefinido.",
                    "b) A partir del código fuente del servicio.",
                    "c) Mediante un proceso manual.",
                    "d) Desde la interfaz de usuario."
                ],
                correctAnswer: "b) A partir del código fuente del servicio."
            },
            {
                question: "¿Qué significa el \"claim\" iat en un JWT?",
                options: [
                    "a) Identification and Access Time.",
                    "b) Issued At, identifica la marca temporal en la que el JWT fue emitido.",
                    "c) Internal Access Token.",
                    "d) Internationalization Attribute."
                ],
                correctAnswer: "b) Issued At, identifica la marca temporal en la que el JWT fue emitido."
            },
            {
                question: "¿Cuál de los siguientes frameworks no se menciona como una implementación de JAX-WS?",
                options: [
                    "a) AXIS2.",
                    "b) CXF.",
                    "c) Metro.",
                    "d) Jersey."
                ],
                correctAnswer: "d) Jersey."
            },
            {
                question: "¿Qué lenguaje de descripción de interfaces (IDL) utiliza gRPC?",
                options: [
                    "a) WSDL.",
                    "b) OpenAPI.",
                    "c) Uno basado en Protocol Buffers.",
                    "d) RAML."
                ],
                correctAnswer: "c) Uno basado en Protocol Buffers."
            },
            {
                question: "La comunicación entre Kubernetes y los contenedores se realiza mediante:",
                options: [
                    "a) SOAP.",
                    "b) REST.",
                    "c) gRPC.",
                    "d) RMI."
                ],
                correctAnswer: "c) gRPC."
            },
            {
                question: "¿Cuál de las siguientes no es una anotación JAX-RS para los parámetros?",
                options: [
                    "a) @PathParam.",
                    "b) @RequestWrapper.",
                    "c) @HeaderParam.",
                    "d) @CookieParam."
                ],
                correctAnswer: "b) @RequestWrapper."
            },
            {
                question: "¿Qué anotación JAX-RS especifica los tipos de medios de petición aceptados?",
                options: [
                    "a) @Produces.",
                    "b) @Consumes.",
                    "c) @Path.",
                    "d) @GET."
                ],
                correctAnswer: "b) @Consumes."
            },
            {
                question: "¿Qué indica la anotación @DefaultValue en JAX-RS?",
                options: [
                    "a) Que el valor del parámetro es obligatorio.",
                    "b) Un valor por defecto para los enlaces de parámetros cuando la clave no es encontrada.",
                    "c) Que el parámetro debe ser nulo por defecto.",
                    "d) Que el servicio web utiliza un valor predefinido."
                ],
                correctAnswer: "b) Un valor por defecto para los enlaces de parámetros cuando la clave no es encontrada."
            },
            {
                question: "¿Cuál de los siguientes es un ejemplo de \"Distributed Component Object Model\"?",
                options: [
                    "a) RPC.",
                    "b) CORBA.",
                    "c) DCOM.",
                    "d) RMI."
                ],
                correctAnswer: "c) DCOM."
            },
            {
                question: "¿Qué lenguaje de descripción de APIs se menciona como una alternativa a WSDL 2.0 para documentar APIs?",
                options: [
                    "a) XSD.",
                    "b) UDDI.",
                    "c) RAML.",
                    "d) JAX-WS."
                ],
                correctAnswer: "c) RAML."
            },
            {
                question: "¿Qué se define en la sección message de un WSDL?",
                options: [
                    "a) Los protocolos de comunicación.",
                    "b) Las operaciones.",
                    "c) Las entradas y salidas de las operaciones.",
                    "d) Los tipos de datos."
                ],
                correctAnswer: "c) Las entradas y salidas de las operaciones."
            },
            {
                question: "¿Qué atributo en un wsdl:binding indica el protocolo de transporte?",
                options: [
                    "a) name.",
                    "b) type.",
                    "c) transport.",
                    "d) style."
                ],
                correctAnswer: "c) transport."
            },
            {
                question: "¿Cuál es el nombre por defecto del serviceName en la anotación @WebService?",
                options: [
                    "a) El nombre de la clase.",
                    "b) El nombre de la clase más sufijo \"Service\".",
                    "c) El nombre del puerto.",
                    "d) El targetNamespace."
                ],
                correctAnswer: "b) El nombre de la clase más sufijo \"Service\"."
            },
            {
                question: "La anotación @Context en JAX-RS se utiliza para:",
                options: [
                    "a) Enlazar un parámetro a un valor de cabecera.",
                    "b) Devolver el contexto del objeto (ej. HttpServletRequest).",
                    "c) Especificar el tipo de petición HTTP.",
                    "d) Definir la ruta de acceso al recurso."
                ],
                correctAnswer: "b) Devolver el contexto del objeto (ej. HttpServletRequest)."
            },
            {
                question: "¿Qué se menciona como un servicio/estándar definido con gRPC?",
                options: [
                    "a) RESTful API.",
                    "b) CRI.",
                    "c) SOA.",
                    "d) WSDL."
                ],
                correctAnswer: "b) CRI."
            },
            {
                question: "¿Quién es el autor y su contacto de Telegram según el pie de página?",
                options: [
                    "a) CARLOS VELILLA GARCIA - Telegram @CARLOSVELILLA.",
                    "b) Juan Perez - Telegram @juanp.",
                    "c) Maria Lopez - Telegram @marial.",
                    "d) Google - Telegram @googledev."
                ],
                correctAnswer: "a) CARLOS VELILLA GARCIA - Telegram @CARLOSVELILLA."
            },
            {
                question: "¿Cuál es la diferencia principal entre OAuth y JWT en términos de la estructura del token?",
                options: [
                    "a) OAuth usa una estructura definida mientras que JWT es un número sin significado.",
                    "b) JWT tiene una estructura definida (Header.Payload.Signature) mientras que OAuth es un número que no significa nada.",
                    "c) Ambos son números sin significado.",
                    "d) Ambos tienen una estructura definida, pero diferente algoritmo."
                ],
                correctAnswer: "b) JWT tiene una estructura definida (Header.Payload.Signature) mientras que OAuth es un número que no significa nada."
            },
            {
                question: "Un servicio es una representación lógica de:",
                options: [
                    "a) Un componente de hardware.",
                    "b) Una actividad de negocio que tiene un resultado de negocio específico.",
                    "c) Una base de datos.",
                    "d) Una interfaz de usuario."
                ],
                correctAnswer: "b) Una actividad de negocio que tiene un resultado de negocio específico."
            },
            {
                question: "¿Qué API de Java no está dentro de los servidores de aplicación (Weblogic, Websphere) según el documento?",
                options: [
                    "a) Jersey.",
                    "b) RESTeasy.",
                    "c) Restlet.",
                    "d) Apache CXF."
                ],
                correctAnswer: "d) Apache CXF."
            },
            {
                question: "¿Qué es un espacio de nombres (namespace) en el contexto de los servicios web .NET, y por qué es importante cambiar el http://tempuri.org/ por defecto?",
                options: [
                    "a) Es un identificador único para el servicio web, importante para distinguirlo de otros servicios.",
                    "b) Es la URL real del servicio web.",
                    "c) Es un protocolo de seguridad.",
                    "d) Es el formato de los mensajes de error."
                ],
                correctAnswer: "a) Es un identificador único para el servicio web, importante para distinguirlo de otros servicios."
            }
        ];

        // Variables de estado del quiz
        let currentQuestionIndex = 0;
        let score = 0;
        // userAnswers guarda el texto de la opción seleccionada (o null)
        const userAnswers = new Array(questions.length).fill(null);
        // scoredQuestions guarda true si la pregunta fue respondida correctamente, false si fue incorrecta o no respondida
        const scoredQuestions = new Array(questions.length).fill(false); 

        // Referencias a los elementos del DOM
        const quizContainer = document.getElementById('quizContainer');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const restartBtn = document.getElementById('restartBtn');
        const restartInlineBtn = document.getElementById('restartInlineBtn');
        const finalScoreDiv = document.getElementById('finalScore');
        const progressBar = document.getElementById('progressBar');
        const finalScoreDisplay = finalScoreDiv.querySelector('.score-display');
        const correctCountSpan = document.getElementById('correctCount');
        const incorrectCountSpan = document.getElementById('incorrectCount');
        const unansweredCountSpan = document.getElementById('unansweredCount');

        /**
         * Carga el estado del quiz guardado en localStorage.
         * Si no existe, inicializa un nuevo estado.
         */
        function loadQuizState() {
            try {
                const savedState = JSON.parse(localStorage.getItem('quizState'));
                if (savedState) {
                    currentQuestionIndex = savedState.currentQuestionIndex;
                    score = savedState.score;
                    // Asegurarse de que los arrays tengan el tamaño correcto y copiar los valores
                    userAnswers.splice(0, savedState.userAnswers.length, ...savedState.userAnswers);
                    scoredQuestions.splice(0, savedState.scoredQuestions.length, ...savedState.scoredQuestions);
                }
            } catch (e) {
                console.error("Error al cargar el estado del quiz:", e);
                // Si hay un error, el estado se reiniciará a los valores por defecto
            }
        }

        /**
         * Guarda el estado actual del quiz en localStorage.
         */
        function saveQuizState() {
            const quizState = {
                currentQuestionIndex: currentQuestionIndex,
                score: score,
                userAnswers: userAnswers,
                scoredQuestions: scoredQuestions
            };
            localStorage.setItem('quizState', JSON.stringify(quizState));
        }

        /**
         * Carga y muestra la pregunta actual.
         */
        function loadQuestion() {
            if (currentQuestionIndex >= questions.length) {
                showResults();
                return;
            }

            const currentQuestion = questions[currentQuestionIndex];
            quizContainer.innerHTML = `
                <div class="question-card">
                    <p class="question-text"></p>
                    <div class="options-container">
                        ${currentQuestion.options.map(() => `
                            <button class="option-button"></button>
                        `).join('')}
                    </div>
                    <div class="solution hidden">
                        <strong>Solución:</strong> <span class="solution-text"></span>
                    </div>
                </div>
            `;

            const questionTextElement = quizContainer.querySelector('.question-text');
            const optionsContainer = quizContainer.querySelector('.options-container');
            const questionCard = quizContainer.querySelector('.question-card');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');

            // Usar textContent para insertar el texto de la pregunta de forma segura
            questionTextElement.textContent = `${currentQuestionIndex + 1}. ${currentQuestion.question}`;

            // Asignar el texto y los atributos data-option a cada botón de opción
            currentQuestion.options.forEach((option, index) => {
                optionButtons[index].textContent = option; // Inserta el texto como texto plano
                optionButtons[index].dataset.option = option; // Guarda la opción original para la lógica
                optionButtons[index].addEventListener('click', handleOptionClick);
            });

            // Resalta la respuesta del usuario si ya ha respondido y aplica estilos
            const savedAnswer = userAnswers[currentQuestionIndex];
            if (savedAnswer !== null) {
                // Deshabilita todos los botones para que no se pueda cambiar la respuesta
                optionButtons.forEach(button => {
                    button.classList.add('disabled');
                    button.removeEventListener('click', handleOptionClick); // Remover listener si ya está respondida
                });

                // Siempre resalta la respuesta correcta si la pregunta ya fue respondida
                const correctButton = optionsContainer.querySelector(`[data-option="${currentQuestion.correctAnswer}"]`);
                if (correctButton) {
                    correctButton.classList.add('correct-answer');
                }

                // Resalta la respuesta del usuario si fue incorrecta
                const selectedButton = optionsContainer.querySelector(`[data-option="${savedAnswer}"]`);
                const isCorrect = (savedAnswer === currentQuestion.correctAnswer);
                if (selectedButton && !isCorrect) {
                    selectedButton.classList.add('incorrect-answer');
                    questionCard.classList.add('incorrect'); // Marcar la tarjeta como incorrecta
                } else if (selectedButton && isCorrect) {
                    questionCard.classList.add('correct'); // Marcar la tarjeta como correcta
                }
                
                // Añadir feedback visual (Correcto/Incorrecto)
                updateQuestionCardVisuals(isCorrect);
            }

            // Actualiza el estado de los botones de navegación y la barra de progreso
            updateNavButtons();
            updateProgressBar();
        }

        /**
         * Maneja el evento de clic en una opción de respuesta.
         * @param {Event} event - El evento de clic.
         */
        function handleOptionClick(event) {
            const selectedOptionButton = event.target;
            const selectedOption = selectedOptionButton.dataset.option; // Obtiene la opción del atributo data-option
            const currentQuestion = questions[currentQuestionIndex];
            const optionsContainer = quizContainer.querySelector('.options-container');
            const questionCard = quizContainer.querySelector('.question-card');

            // Deshabilita todos los botones de opción para evitar múltiples respuestas
            optionsContainer.querySelectorAll('.option-button').forEach(button => {
                button.classList.add('disabled');
                button.removeEventListener('click', handleOptionClick);
            });

            // Actualiza la respuesta del usuario y la guarda
            userAnswers[currentQuestionIndex] = selectedOption;
            
            // Comprueba si la respuesta es correcta
            const isCorrectAttempt = (selectedOption === currentQuestion.correctAnswer);

            if (isCorrectAttempt) {
                selectedOptionButton.classList.add('correct-answer');
                questionCard.classList.add('correct');
                // Si no se ha puntuado antes, añade un punto y marca como correcta
                if (!scoredQuestions[currentQuestionIndex]) { // scoredQuestions[index] will be false if not yet scored
                    score++;
                    scoredQuestions[currentQuestionIndex] = true; // Marca como correcta
                }
            } else {
                selectedOptionButton.classList.add('incorrect-answer');
                questionCard.classList.add('incorrect');
                // Si se había puntuado como correcta (porque el usuario cambió de opinión), quita el punto
                if (scoredQuestions[currentQuestionIndex]) { // scoredQuestions[index] will be true if it was previously correct
                    score--;
                    scoredQuestions[currentQuestionIndex] = false; // Marca como incorrecta
                }
                // Resalta la respuesta correcta
                const correctAnswerButton = optionsContainer.querySelector(`[data-option="${currentQuestion.correctAnswer}"]`);
                if (correctAnswerButton) {
                    correctAnswerButton.classList.add('correct-answer');
                }
            }
            
            saveQuizState(); // Guarda el estado después de actualizar score y scoredQuestions

            // Añadir feedback visual (Correcto/Incorrecto)
            updateQuestionCardVisuals(isCorrectAttempt);

            // Muestra la solución detallada si existe (aunque no hay en tu questions actual)
            if (currentQuestion.solution) {
                const solutionDiv = quizContainer.querySelector('.solution');
                solutionDiv.classList.remove('hidden');
                solutionDiv.querySelector('.solution-text').textContent = currentQuestion.solution;
            }
        }

        /**
         * Actualiza el estilo de la tarjeta de pregunta y añade feedback visual.
         * @param {boolean} isCorrect - Indica si la respuesta es correcta.
         */
        function updateQuestionCardVisuals(isCorrect) {
            const questionCard = document.querySelector('.question-card');
            // Eliminar feedback anterior si existe
            const existingFeedback = questionCard.querySelector('.feedback');
            if (existingFeedback) {
                existingFeedback.remove();
            }

            const feedbackMessage = document.createElement('p');
            feedbackMessage.classList.add('feedback');

            if (isCorrect) {
                feedbackMessage.textContent = '¡Correcto!';
                feedbackMessage.classList.add('correct');
            } else {
                feedbackMessage.textContent = 'Incorrecto. La respuesta correcta es la marcada en verde.';
                feedbackMessage.classList.add('incorrect');
            }
            questionCard.appendChild(feedbackMessage);
        }

        /**
         * Muestra los resultados finales del quiz.
         */
        function showResults() {
            quizContainer.classList.add('hidden');
            prevBtn.classList.add('hidden');
            nextBtn.classList.add('hidden');
            restartInlineBtn.classList.add('hidden');
            progressBar.parentElement.classList.add('hidden');
            finalScoreDiv.classList.remove('hidden');

            // Calcula y muestra las estadísticas
            const correctAnswers = scoredQuestions.filter(isCorrect => isCorrect).length;
            // Una respuesta es incorrecta si el usuario respondió (no es null) Y no fue marcada como correcta (scoredQuestions[index] es false)
            const incorrectAnswers = userAnswers.filter((answer, index) => answer !== null && !scoredQuestions[index]).length;
            const unansweredQuestions = userAnswers.filter(answer => answer === null).length;

            finalScoreDisplay.textContent = `Tu puntuación final es ${correctAnswers} de ${questions.length}`;
            correctCountSpan.textContent = correctAnswers;
            incorrectCountSpan.textContent = incorrectAnswers;
            unansweredCountSpan.textContent = unansweredQuestions;
        }
		
        /**
         * Actualiza el estado de los botones de navegación.
         */
        function updateNavButtons() {
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.textContent = currentQuestionIndex === questions.length - 1 ? 'Finalizar' : 'Siguiente';
        }

        /**
         * Actualiza la barra de progreso.
         */
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        /**
         * Reinicia el quiz a su estado inicial.
         */
        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers.fill(null);
            scoredQuestions.fill(false);
            localStorage.clear(); // Limpia el localStorage
            
            quizContainer.classList.remove('hidden');
            prevBtn.classList.remove('hidden');
            nextBtn.classList.remove('hidden');
            restartInlineBtn.classList.remove('hidden');
            progressBar.parentElement.classList.remove('hidden');
            finalScoreDiv.classList.add('hidden');
            loadQuestion();
        }

        // Event listeners
        prevBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                showResults();
            }
        });

        restartBtn.addEventListener('click', restartQuiz);
        restartInlineBtn.addEventListener('click', restartQuiz);

        // Carga inicial
        window.onload = function() {
            loadQuizState();
            loadQuestion();
        };
    </script>
</body>
</html>


