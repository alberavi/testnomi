<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuestionario CSS</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles for feedback */
        .option-button.correct {
            background-color: #d1fae5; /* Green-100 */
            color: #065f46; /* Green-800 */
        }
        .option-button.incorrect {
            background-color: #fee2e2; /* Red-100 */
            color: #991b1b; /* Red-800 */
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center p-4">

    <div id="quiz-container" class="bg-white rounded-xl shadow-2xl p-8 w-full max-w-2xl transform transition-all duration-300 hover:scale-105">
        <!-- Contenido del cuestionario se renderizará aquí -->
    </div>

    <script>
        // Datos del cuestionario original
        const originalQuizData = [
            {
                question: "¿Qué acrónimo representa las Hojas de Estilo en Cascada, un componente fundamental del desarrollo web?",
                correctAnswer: "CSS (Cascading Style Sheets)",
                options: ["CSS (Cascading Style Sheets)", "HTML (HyperText Markup Language)", "JS (JavaScript)", "XML (eXtensible Markup Language)"]
            },
            {
                question: "¿Qué organización es la responsable de la estandarización de las especificaciones CSS?",
                correctAnswer: "La W3C (World Wide Web Consortium)",
                options: ["La W3C (World Wide Web Consortium)", "Microsoft", "Google", "Mozilla Foundation"]
            },
            {
                question: "¿Cuál es el tipo MIME (Multipurpose Internet Mail Extensions) oficial para las hojas de estilo CSS?",
                correctAnswer: "text/css",
                options: ["text/css", "application/json", "text/html", "image/png"]
            },
            {
                question: "Según el modelo de caja de CSS, ¿cómo se representa cada elemento en el diseño de una página web?",
                correctAnswer: "Todo es una caja.",
                options: ["Todo es una caja.", "Todo es un círculo.", "Todo es una línea.", "Todo es un punto."]
            },
            {
                question: "Enumere las capas del modelo de caja de CSS, comenzando por la más externa y dirigiéndose hacia el contenido.",
                correctAnswer: "Margin, Border, Padding (Relleno), Content.",
                options: ["Margin, Border, Padding (Relleno), Content.", "Content, Padding, Border, Margin.", "Border, Margin, Content, Padding.", "Padding, Content, Margin, Border."]
            },
            {
                question: "En el contexto de CSS, ¿qué se entiende por \"cascada\" y cuál es su propósito?",
                correctAnswer: "La cascada es el mecanismo que determina qué reglas CSS prevalecen cuando varias de ellas colisionan o se aplican a un mismo elemento.",
                options: [
                    "La cascada es el mecanismo que determina qué reglas CSS prevalecen cuando varias de ellas colisionan o se aplican a un mismo elemento.",
                    "Es un tipo de animación CSS.",
                    "Define el orden de carga de los archivos CSS.",
                    "Es una técnica para optimizar el rendimiento de CSS."
                ]
            },
            {
                question: "Describa la sintaxis fundamental de una regla CSS.",
                correctAnswer: "selector(es) { propiedad: valor(es); propiedad: valor(es); }.",
                options: [
                    "selector(es) { propiedad: valor(es); propiedad: valor(es); }.",
                    "propiedad: valor(es); selector(es);",
                    "selector(es) => propiedad: valor(es);",
                    "propiedad: valor(es) { selector(es); }"
                ]
            },
            {
                question: "¿Cuál es la función principal de los selectores en CSS?",
                correctAnswer: "Los selectores se utilizan para referirse a un conjunto de elementos, objetos o nodos del árbol DOM.",
                options: [
                    "Los selectores se utilizan para referirse a un conjunto de elementos, objetos o nodos del árbol DOM.",
                    "Definen el color de fondo de un elemento.",
                    "Controlan la interactividad de la página.",
                    "Crean animaciones complejas."
                ]
            },
            {
                question: "Identifique el selector universal en CSS y su símbolo de representación.",
                correctAnswer: "El selector universal es el asterisco (*).",
                options: ["El selector universal es el asterisco (*).", "El selector universal es el punto (.).", "El selector universal es la almohadilla (#).", "El selector universal es la coma (,)."]
            },
            {
                question: "¿Qué símbolo se utiliza para seleccionar un elemento HTML por su identificador único (ID) en CSS?",
                correctAnswer: "El símbolo de almohadilla (#).",
                options: ["El símbolo de almohadilla (#).", "El punto (.).", "El asterisco (*).", "La coma (,)."]
            },
            {
                question: "¿Qué símbolo se emplea para seleccionar elementos HTML que pertenecen a una clase específica en CSS?",
                correctAnswer: "El punto (.).",
                options: ["El punto (.).", "La almohadilla (#).", "El asterisco (*).", "El signo de exclamación (!)."]
            },
            {
                question: "¿Cómo se selecciona un elemento de un tipo específico que también posee un ID determinado? Proporcione un ejemplo.",
                correctAnswer: "Se selecciona combinando el nombre de la etiqueta con el ID, por ejemplo: p#especial.",
                options: [
                    "Se selecciona combinando el nombre de la etiqueta con el ID, por ejemplo: p#especial.",
                    "Se selecciona usando solo el ID, por ejemplo: #especial.",
                    "Se selecciona usando solo la etiqueta, por ejemplo: p.",
                    "Se selecciona usando la clase, por ejemplo: .especial."
                ]
            },
            {
                question: "¿Cómo se seleccionan todos los elementos de un tipo específico que comparten una clase particular? Proporcione un ejemplo.",
                correctAnswer: "Se seleccionan combinando el nombre de la etiqueta con la clase, por ejemplo: p.clase1.",
                options: [
                    "Se seleccionan combinando el nombre de la etiqueta con la clase, por ejemplo: p.clase1.",
                    "Se seleccionan usando solo la clase, por ejemplo: .clase1.",
                    "Se seleccionan usando el ID, por ejemplo: #clase1.",
                    "Se seleccionan usando el asterisco, por ejemplo: *.clase1."
                ]
            },
            {
                question: "¿Cuál es el carácter utilizado para agrupar múltiples selectores en una única regla CSS?",
                correctAnswer: "La coma (,).",
                options: ["La coma (,).", "El punto (.).", "El signo más (+).", "El guion (-)."]
            },
            {
                question: "¿Qué tipo de relación jerárquica indica un selector contextual como `etiqueta1 etiqueta2` y cómo se interpreta su lectura?",
                correctAnswer: "Un selector contextual indica que etiqueta2 está dentro de etiqueta1 en cualquier nivel de anidamiento. Se lee de derecha a izquierda.",
                options: [
                    "Un selector contextual indica que etiqueta2 está dentro de etiqueta1 en cualquier nivel de anidamiento. Se lee de derecha a izquierda.",
                    "Indica que etiqueta1 y etiqueta2 son hermanos directos.",
                    "Indica que etiqueta2 es hijo directo de etiqueta1.",
                    "Indica que etiqueta1 y etiqueta2 tienen el mismo estilo."
                ]
            },
            {
                question: "Explique el significado de un selector de hijo directo, representado por `etiqueta1 > etiqueta2`.",
                correctAnswer: "Un selector de hijo directo (etiqueta1 > etiqueta2) aplica estilos a etiqueta2 solo si es un hijo directo de etiqueta1.",
                options: [
                    "Un selector de hijo directo (etiqueta1 > etiqueta2) aplica estilos a etiqueta2 solo si es un hijo directo de etiqueta1.",
                    "Aplica estilos a etiqueta2 si es descendiente de etiqueta1.",
                    "Aplica estilos a etiqueta1 si es hijo directo de etiqueta2.",
                    "Aplica estilos a ambos elementos si son hermanos."
                ]
            },
            {
                question: "Describa el comportamiento de selección del selector `a ~ b`.",
                correctAnswer: "El selector a ~ b aplica si b es un hermano de a y aparece a continuación de a en el código.",
                options: [
                    "El selector a ~ b aplica si b es un hermano de a y aparece a continuación de a en el código.",
                    "Aplica si b es hijo directo de a.",
                    "Aplica si a es hermano de b y aparece a continuación de b.",
                    "Aplica si a y b son elementos padre e hijo."
                ]
            },
            {
                question: "Describa el comportamiento de selección del selector `a + b`.",
                correctAnswer: "El selector a + b aplica si b es un hermano directo de a y aparece inmediatamente a continuación de a, sin otros elementos intermedios.",
                options: [
                    "El selector a + b aplica si b es un hermano directo de a y aparece inmediatamente a continuación de a, sin otros elementos intermedios.",
                    "Aplica si b es un hermano de a en cualquier posición.",
                    "Aplica si b es hijo de a.",
                    "Aplica si a es el primer hijo de b."
                ]
            },
            {
                question: "¿Cuál es la sintaxis para seleccionar elementos HTML que tienen un atributo definido?",
                correctAnswer: "E[atr].",
                options: ["E[atr].", "E.atr", "E#atr", "E:atr"]
            },
            {
                question: "¿Cómo se seleccionan elementos cuyo valor de atributo comienza con una cadena específica?",
                correctAnswer: "E[atr^=\"algo\"].",
                options: ["E[atr^=\"algo\"].", "E[atr$=\"algo\"].", "E[atr*=\"algo\"].", "E[atr=\"algo\"]."]
            },
            {
                question: "¿Cómo se seleccionan elementos cuyo valor de atributo termina con una cadena específica?",
                correctAnswer: "E[atr$=\"algo\"].",
                options: ["E[atr$=\"algo\"].", "E[atr^=\"algo\"].", "E[atr*=\"algo\"].", "E[atr=\"algo\"]."]
            },
            {
                question: "¿Cómo se seleccionan elementos cuyo valor de atributo contiene una subcadena específica?",
                correctAnswer: "E[atr*=\"algo\"].",
                options: ["E[atr*=\"algo\"].", "E[atr^=\"algo\"].", "E[atr$=\"algo\"].", "E[atr=\"algo\"]."]
            },
            {
                question: "En JavaScript, ¿qué método del objeto `document` se utiliza para obtener la primera coincidencia de un selector CSS?",
                correctAnswer: "document.querySelector.",
                options: ["document.querySelector.", "document.querySelectorAll.", "document.getElementById.", "document.getElementsByClassName."]
            },
            {
                question: "En JavaScript, ¿qué método del objeto `document` se utiliza para obtener una lista de todos los elementos que coinciden con un selector CSS?",
                correctAnswer: "document.querySelectorAll.",
                options: ["document.querySelectorAll.", "document.querySelector.", "document.getElementById.", "document.getElementsByTagName."]
            },
            {
                question: "¿Qué es una pseudoclase en CSS y cuál es su propósito?",
                correctAnswer: "Una pseudoclase es una manera de definir un estado de un elemento.",
                options: [
                    "Una pseudoclase es una manera de definir un estado de un elemento.",
                    "Es un tipo de selector de atributo.",
                    "Define una nueva propiedad CSS.",
                    "Crea un nuevo elemento HTML."
                ]
            },
            {
                question: "Mencione una pseudoclase comúnmente utilizada para aplicar estilos cuando un usuario interactúa con un elemento, por ejemplo, pasando el cursor del ratón por encima.",
                correctAnswer: ":hover.",
                options: [":hover.", ":active.", ":focus.", ":visited."]
            },
            {
                question: "¿Qué pseudoclase se emplea para aplicar estilos únicamente al primer elemento hijo de su contenedor?",
                correctAnswer: ":first-child.",
                options: [":first-child.", ":last-child.", ":nth-child(1).", ":only-child."]
            },
            {
                question: "¿Qué pseudoclase permite seleccionar un hijo específico dentro de un conjunto de hermanos, basándose en su posición numérica?",
                correctAnswer: ":nth-child().",
                options: [":nth-child().", ":first-child.", ":last-child.", ":only-child."]
            },
            {
                question: "Cómo se puede aplicar una negación a un selector en CSS utilizando pseudoclases?",
                correctAnswer: "Utilizando la pseudoclase :not(selector)",
                options: ["Utilizando la pseudoclase :not(selector)", "Utilizando la pseudoclase :only-child", "Utilizando la pseudoclase :empty", "Utilizando la pseudoclase :root"]
            }
        ];

        // Duplicar las preguntas para alcanzar 100
        const quizData = [];
        const desiredQuestions = 100;
        while (quizData.length < desiredQuestions) {
            originalQuizData.forEach(q => {
                if (quizData.length < desiredQuestions) {
                    quizData.push({ ...q }); // Deep copy to avoid reference issues
                }
            });
        }

        let currentQuestionIndex = 0;
        let score = 0;
        // Store answers given by the user, null for unanswered, true for correct, false for incorrect
        let userAnswers = new Array(quizData.length).fill(null);
        const quizContainer = document.getElementById('quiz-container');

        // Load state from local storage
        function loadQuizState() {
            const savedIndex = localStorage.getItem('currentQuestionIndex');
            const savedScore = localStorage.getItem('score');
            const savedUserAnswers = localStorage.getItem('userAnswers');

            if (savedIndex !== null) {
                currentQuestionIndex = parseInt(savedIndex);
            }
            if (savedScore !== null) {
                score = parseInt(savedScore);
            }
            if (savedUserAnswers !== null) {
                userAnswers = JSON.parse(savedUserAnswers);
            }
        }

        // Save state to local storage
        function saveQuizState() {
            localStorage.setItem('currentQuestionIndex', currentQuestionIndex);
            localStorage.setItem('score', score);
            localStorage.setItem('userAnswers', JSON.stringify(userAnswers));
        }

        // Función para renderizar una pregunta
        function renderQuestion() {
            quizContainer.innerHTML = ''; // Clear previous content

            // Add the main title
            const mainTitle = document.createElement('h1');
            mainTitle.className = 'text-3xl font-extrabold text-blue-700 mb-8 text-center';
            mainTitle.textContent = 'Cuestionario CSS';
            quizContainer.appendChild(mainTitle);

            if (currentQuestionIndex < quizData.length) {
                const questionData = quizData[currentQuestionIndex];

                // Create question element
                const questionElement = document.createElement('h2');
                questionElement.className = 'text-2xl font-bold text-gray-800 mb-6 text-center';
                questionElement.textContent = questionData.question;
                quizContainer.appendChild(questionElement);

                // Create options container
                const optionsContainer = document.createElement('div');
                optionsContainer.className = 'grid grid-cols-1 md:grid-cols-2 gap-4 mb-6';
                quizContainer.appendChild(optionsContainer);

                // Add options
                questionData.options.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.className = 'option-button bg-blue-100 text-blue-800 py-3 px-6 rounded-lg text-lg font-medium hover:bg-blue-200 transition duration-200 ease-in-out transform hover:-translate-y-1 shadow-md';
                    button.textContent = option;
                    button.dataset.option = option; // Store option for easy retrieval

                    // Disable buttons if already answered and apply feedback styles
                    if (userAnswers[currentQuestionIndex] !== null) {
                        button.disabled = true;
                        if (option === questionData.correctAnswer) {
                            button.classList.add('correct');
                        } else if (option === userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex] !== questionData.correctAnswer) {
                            button.classList.add('incorrect');
                        }
                    } else {
                        button.onclick = () => checkAnswer(option, questionData.correctAnswer, button);
                    }
                    optionsContainer.appendChild(button);
                });

                // Add navigation and restart buttons
                const navButtonsContainer = document.createElement('div');
                navButtonsContainer.className = 'flex justify-between items-center mt-8 gap-4';
                quizContainer.appendChild(navButtonsContainer);

                const prevButton = document.createElement('button');
                prevButton.className = 'bg-gray-300 text-gray-800 py-2 px-6 rounded-lg text-lg font-semibold hover:bg-gray-400 transition duration-200 shadow-md';
                prevButton.textContent = 'Anterior';
                prevButton.onclick = previousQuestion;
                prevButton.disabled = currentQuestionIndex === 0;
                navButtonsContainer.appendChild(prevButton);

                const restartButton = document.createElement('button');
                restartButton.className = 'bg-red-500 text-white py-2 px-6 rounded-lg text-lg font-semibold hover:bg-red-600 transition duration-200 shadow-md';
                restartButton.textContent = 'Reiniciar Test';
                restartButton.onclick = restartQuiz;
                navButtonsContainer.appendChild(restartButton);

                const nextButton = document.createElement('button');
                nextButton.className = 'bg-blue-500 text-white py-2 px-6 rounded-lg text-lg font-semibold hover:bg-blue-600 transition duration-200 shadow-md';
                nextButton.textContent = 'Siguiente';
                nextButton.onclick = nextQuestion;
                nextButton.disabled = currentQuestionIndex === quizData.length - 1 && userAnswers[currentQuestionIndex] !== null; // Disable if last question and answered
                if (currentQuestionIndex === quizData.length - 1 && userAnswers[currentQuestionIndex] === null) {
                    nextButton.textContent = 'Finalizar Test';
                }
                navButtonsContainer.appendChild(nextButton);


                // Add progress indicator
                const progressElement = document.createElement('p');
                progressElement.className = 'text-gray-600 text-center mt-6';
                progressElement.textContent = `Pregunta ${currentQuestionIndex + 1} de ${quizData.length}`;
                quizContainer.appendChild(progressElement);

            } else {
                // Display final score
                showResults();
            }
        }

        // Función para verificar la respuesta
        function checkAnswer(selectedOption, correctAnswer, clickedButton) {
            // Disable all option buttons immediately after selection
            const optionButtons = quizContainer.querySelectorAll('.option-button');
            optionButtons.forEach(button => button.disabled = true);

            if (selectedOption === correctAnswer) {
                score++;
                userAnswers[currentQuestionIndex] = selectedOption; // Mark as correct
                clickedButton.classList.add('correct');
            } else {
                userAnswers[currentQuestionIndex] = selectedOption; // Mark as incorrect
                clickedButton.classList.add('incorrect');
                // Highlight the correct answer
                const correctButton = Array.from(optionButtons).find(btn => btn.dataset.option === correctAnswer);
                if (correctButton) {
                    correctButton.classList.add('correct');
                }
            }
            saveQuizState();

            // Briefly show feedback then move to next question
            setTimeout(() => {
                // Only move to next if not the last question and not already answered
                if (currentQuestionIndex < quizData.length -1) {
                    currentQuestionIndex++;
                    renderQuestion();
                } else if (currentQuestionIndex === quizData.length -1) {
                    // If it's the last question, show results immediately after feedback
                    showResults();
                }
            }, 1000); // 1 second delay to show feedback
        }

        // Función para ir a la pregunta anterior
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                saveQuizState();
                renderQuestion();
            }
        }

        // Función para ir a la siguiente pregunta
        function nextQuestion() {
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                saveQuizState();
                renderQuestion();
            } else if (currentQuestionIndex === quizData.length - 1 && userAnswers[currentQuestionIndex] !== null) {
                // If on the last question and it's answered, show results
                showResults();
            }
        }

        // Función para mostrar los resultados finales
        function showResults() {
            let correctCount = 0;
            let incorrectCount = 0;
            let unansweredCount = 0;

            userAnswers.forEach((answer, index) => {
                if (answer === null) {
                    unansweredCount++;
                } else if (answer === quizData[index].correctAnswer) {
                    correctCount++;
                } else {
                    incorrectCount++;
                }
            });

            quizContainer.innerHTML = `
                <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Cuestionario Completado</h2>
                <p class="text-xl text-gray-700 text-center mb-2">Preguntas Correctas: <span class="font-extrabold text-blue-600">${correctCount}</span></p>
                <p class="text-xl text-gray-700 text-center mb-2">Preguntas Incorrectas: <span class="font-extrabold text-red-600">${incorrectCount}</span></p>
                <p class="text-xl text-gray-700 text-center mb-8">Preguntas Sin Contestar: <span class="font-extrabold text-gray-600">${unansweredCount}</span></p>
                <button onclick="restartQuiz()" class="block mx-auto bg-purple-500 text-white py-3 px-8 rounded-lg text-xl font-semibold hover:bg-purple-600 transition duration-200 ease-in-out transform hover:scale-105 shadow-lg">Reiniciar Cuestionario</button>
            `;
            // Clear local storage on completion
            localStorage.clear();
        }

        // Función para reiniciar el cuestionario
        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = new Array(quizData.length).fill(null);
            localStorage.clear(); // Clear local storage
            renderQuestion();
        }

        // Iniciar el cuestionario al cargar la página
        document.addEventListener('DOMContentLoaded', () => {
            loadQuizState(); // Try to load previous state
            renderQuestion();
        });
    </script>
</body>
</html>
