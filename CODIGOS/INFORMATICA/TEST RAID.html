<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAID</title>
    <!-- Enlace a Tailwind CSS para las clases de la estructura HTML -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS completo para el estilo del quiz -->
    <style>
        /* Estilos generales del cuerpo */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }

        /* Contenedor principal del quiz */
        .container {
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 30px;
            max-width: 800px;
            width: 100%;
            margin-top: 20px;
        }

        /* Tarjeta de la pregunta */
        .question-card {
            background-color: #f8fafc;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease-in-out;
        }

        /* Estilo para la tarjeta de pregunta correcta */
        .question-card.correct {
            background-color: #d4edda;
            border-color: #28a745;
        }

        /* Estilo para la tarjeta de pregunta incorrecta */
        .question-card.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
        }

        /* Texto de la pregunta */
        .question-text {
            font-size: 1.15rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        /* Botones de opciones */
        .option-button {
            display: block;
            width: 100%;
            text-align: left;
            padding: 12px 18px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid #cbd5e0;
            background-color: #ffffff;
            color: #4a5568;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        /* Efecto hover para los botones de opciones */
        .option-button:hover:not(.disabled) {
            background-color: #e2e8f0;
            border-color: #a0aec0;
        }

        /* Estilo para el botón de opción seleccionado */
        .option-button.selected {
            border-color: #4299e1;
            background-color: #ebf8ff;
            font-weight: 600;
        }

        /* Estilo para la respuesta correcta */
        .option-button.correct-answer {
            background-color: #28a745;
            color: #ffffff;
            border-color: #28a745;
            font-weight: 700;
        }

        /* Estilo para la respuesta incorrecta */
        .option-button.incorrect-answer {
            background-color: #dc3545;
            color: #ffffff;
            border-color: #dc3545;
            font-weight: 700;
        }

        /* Estilo para los botones deshabilitados */
        .option-button.disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }

        /* Contenedor de la solución */
        .solution {
            margin-top: 15px;
            padding: 10px 15px;
            border-radius: 8px;
            background-color: #e0f2f7;
            color: #2c5282;
            font-size: 0.95rem;
            font-weight: 500;
            border: 1px solid #90cdf4;
        }

        /* Contenedor del feedback (correcto/incorrecto) */
        .feedback {
            margin-top: 15px;
            font-weight: 600;
            font-size: 1rem;
            text-align: center;
        }

        /* Estilo para feedback correcto */
        .feedback.correct {
            color: #28a745;
        }

        /* Estilo para feedback incorrecto */
        .feedback.incorrect {
            color: #dc3545;
        }

        /* Contenedor de los botones de navegación */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .navigation-buttons-bottom {
            margin-top: 20px;
            display: flex;
            justify-content: center;
        }

        /* Estilo base para los botones de navegación */
        .nav-button {
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            flex-grow: 1;
            text-align: center;
            border: none;
        }

        /* Estilo para el botón "Anterior" */
        .nav-button.prev {
            background-color: #6b7280;
            color: #ffffff;
        }
        .nav-button.prev:hover:not(:disabled) {
            background-color: #4b5563;
            transform: translateY(-2px);
        }

        /* Estilo para el botón "Siguiente" */
        .nav-button.next {
            background-color: #4299e1;
            color: #ffffff;
        }
        .nav-button.next:hover:not(:disabled) {
            background-color: #3182ce;
            transform: translateY(-2px);
        }

        /* Estilo para el botón de reinicio en línea */
        .nav-button.restart-inline {
            background-color: #f50b0b;
            color: #ffffff;
        }
        .nav-button.restart-inline:hover:not(:disabled) {
            background-color: #ac0505;
            transform: translateY(-2px);
        }
        
        .copy-button {
            background-color: #48bb78;
            color: #ffffff;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        .copy-button:hover {
             background-color: #38a169;
             transform: translateY(-2px);
        }


        /* Estilo para los botones deshabilitados */
        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Barra de progreso */
        .progress-bar-container {
            width: 100%;
            background-color: #e2e8f0;
            border-radius: 5px;
            height: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: #4299e1;
            width: 0%;
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        /* Visualización de la puntuación final */
        .score-display {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: #2d3748;
            margin-top: 20px;
        }

        /* Resumen de resultados */
        .results-summary {
            margin-top: 20px;
            padding: 20px;
            background-color: #f8fafc;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
        }

        .results-summary p {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #2d3748;
        }

        .results-summary p strong {
            font-weight: 700;
        }

        /* Botón de reinicio final */
        .restart-button {
            display: block;
            width: fit-content;
            margin: 20px auto 0 auto;
            padding: 12px 30px;
            background-color: #48bb78;
            color: #ffffff;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            border: none;
        }

        .restart-button:hover {
            background-color: #38a169;
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-8">RAID</h1>

        <!-- Barra de progreso -->
        <div class="progress-bar-container">
            <div id="progressBar" class="progress-bar"></div>
        </div>

        <!-- Contenedor principal de las preguntas -->
        <div id="quizContainer">
            <!-- Las preguntas se cargarán dinámicamente aquí -->
        </div>
        
        <!-- Botones de navegación -->
        <div class="navigation-buttons">
            <button id="prevBtn" class="nav-button prev" disabled>Anterior</button>
            <button id="restartInlineBtn" class="nav-button restart-inline">Reiniciar Test</button>
            <button id="nextBtn" class="nav-button next">Siguiente</button>
        </div>

        <!-- Contenedor de la puntuación final -->
        <div id="finalScore" class="hidden">
            <div class="score-display"></div>
            <div class="results-summary">
                <p><strong>Preguntas Correctas:</strong> <span id="correctCount">0</span></p>
                <p><strong>Preguntas Incorrectas:</strong> <span id="incorrectCount">0</span></p>
                <p><strong>Preguntas Sin Contestar:</strong> <span id="unansweredCount">0</span></p>
            </div>
            <button id="restartBtn" class="restart-button">Reiniciar Test</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Array de preguntas y respuestas
           const questions = [
                {
                    question: '¿Cuál es el número mínimo de discos necesarios para implementar un RAID 1?',
                    options: ['A) 1', 'B) 2', 'C) 3', 'D) 4'],
                    correctAnswer: 'B) 2',
                    explanation: 'RAID 1 (espejo) necesita mínimo dos discos: uno original y uno de copia. Ofrece tolerancia a fallos de 1 disco.'
                },
                {
                    question: 'Para RAID 5, ¿cuántos discos son necesarios como mínimo y cuál es su tolerancia a fallos?',
                    options: [
                        'A) Requiere un mínimo de 2 discos, con tolerancia a fallos de 1 disco.',
                        'B) Requiere un mínimo de 3 discos, con tolerancia a fallos de 1 disco.',
                        'C) Requiere un mínimo de 4 discos, con tolerancia a fallos de 2 discos.',
                        'D) Requiere un mínimo de 5 discos, sin tolerancia a fallos.'
                    ],
                    correctAnswer: 'B) Requiere un mínimo de 3 discos, con tolerancia a fallos de 1 disco.',
                    explanation: 'RAID 5 utiliza paridad distribuida, lo que le permite tolerar la falla de un solo disco, y requiere al menos 3 discos para su implementación.'
                },
                {
                    question: '¿Cuál es la cantidad mínima de discos y el nivel de tolerancia a fallos de RAID 6?',
                    options: [
                        'A) Requiere un mínimo de 3 discos, con tolerancia a fallos de 1 disco.',
                        'B) Requiere un mínimo de 4 discos, con tolerancia a fallos de 2 discos.',
                        'C) Requiere un mínimo de 5 discos, sin tolerancia a fallos.',
                        'D) Requiere un mínimo de 6 discos, con tolerancia a fallos de 3 discos.'
                    ],
                    correctAnswer: 'B) Requiere un mínimo de 4 discos, con tolerancia a fallos de 2 discos.',
                    explanation: 'RAID 6 utiliza doble paridad distribuida, lo que le permite soportar la falla de hasta dos discos y requiere un mínimo de 4 discos.'
                },
                {
                    question: 'Para RAID 10 (1+0), ¿cuál es el número mínimo de discos y su característica principal de tolerancia a fallos?',
                    options: [
                        'A) Requiere un mínimo de 4 discos, con tolerancia a fallos de la mitad de los discos en cada grupo RAID 1.',
                        'B) Requiere un mínimo de 2 discos, sin tolerancia a fallos.',
                        'C) Requiere un mínimo de 3 discos, con tolerancia a fallos de 1 disco.',
                        'D) Requiere un mínimo de 6 discos, con tolerancia a fallos de 2 discos.'
                    ],
                    correctAnswer: 'A) Requiere un mínimo de 4 discos, con tolerancia a fallos de la mitad de los discos en cada grupo RAID 1.',
                    explanation: 'RAID 10 combina el striping (RAID 0) con el mirroring (RAID 1), requiriendo un mínimo de 4 discos y ofreciendo alta tolerancia a fallos, ya que puede perder un disco de cada par espejado (siempre que no sean los dos del mismo espejo).'
                },
                {
                    question: '¿Cuál es la configuración de discos y la tolerancia a fallos para RAID 01 (0+1)?',
                    options: [
                        'A) Requiere un mínimo de 4 discos, con tolerancia a fallos de 1 disco por sub-grupo RAID 1.',
                        'B) Requiere un mínimo de 2 discos, sin tolerancia a fallos.',
                        'C) Requiere un mínimo de 3 discos, con tolerancia a fallos de 1 disco.',
                        'D) Requiere un mínimo de 5 discos, con tolerancia a fallos de 2 discos.'
                    ],
                    correctAnswer: 'A) Requiere un mínimo de 4 discos, con tolerancia a fallos de 1 disco por sub-grupo RAID 1.',
                    explanation: 'RAID 01 (0+1) crea un espejo de arreglos RAID 0, necesitando un mínimo de 4 discos. Ofrece tolerancia a fallos similar a RAID 10, donde se puede perder un disco de cada sub-grupo reflejado. La diferencia con RAID 10 es que en RAID 01, si falla un disco de un sub-grupo RAID 0, todo ese sub-grupo RAID 0 falla, y el sistema solo se mantiene si su espejo (el otro sub-grupo RAID 0) está intacto.'
                },
                {
                    question: '¿Cuál es la configuración típica de discos y la tolerancia a fallos para RAID 0?',
                    options: [
                        'A) Requiere un mínimo de 2 discos, sin tolerancia a fallos.',
                        'B) Requiere un mínimo de 2 discos, con tolerancia a fallos de 1 disco.',
                        'C) Requiere un mínimo de 3 discos, sin tolerancia a fallos.',
                        'D) Requiere un mínimo de 4 discos, con tolerancia a fallos de 2 discos.'
                    ],
                    correctAnswer: 'A) Requiere un mínimo de 2 discos, sin tolerancia a fallos.',
                    explanation: 'RAID 0 distribuye los datos en múltiples discos para mejorar el rendimiento, pero la falla de cualquier disco resulta en la pérdida de todos los datos.'
                },
                {
                    question: 'Describe la configuración de discos y la tolerancia a fallos de RAID 2.',
                    options: [
                        'A) RAID 2 requiere un mínimo de 3 discos, con capacidad para corregir errores usando código Hamming.',
                        'B) RAID 2 requiere un mínimo de 2 discos, con mirroring de datos.',
                        'C) RAID 2 requiere un mínimo de 4 discos, con doble paridad.',
                        'D) RAID 2 no tiene tolerancia a fallos.'
                    ],
                    correctAnswer: 'A) RAID 2 requiere un mínimo de 3 discos, con capacidad para corregir errores usando código Hamming.',
                    explanation: 'RAID 2 es un nivel obsoleto que utiliza código Hamming para la corrección de errores, requiriendo discos dedicados para la paridad y un mínimo de 3 discos.'
                },
                {
                    question: '¿Cuál es la configuración de discos y la tolerancia a fallos en RAID 3?',
                    options: [
                        'A) Requiere un mínimo de 3 discos, con un disco de paridad dedicado.',
                        'B) Requiere un mínimo de 2 discos, sin disco de paridad.',
                        'C) Requiere un mínimo de 4 discos, con paridad distribuida.',
                        'D) Requiere un mínimo de 5 discos, con paridad doble dedicada.'
                    ],
                    correctAnswer: 'A) Requiere un mínimo de 3 discos, con un disco de paridad dedicado.',
                    explanation: 'RAID 3 usa un disco dedicado para almacenar la paridad, permitiendo la recuperación de datos si un disco falla, y requiere un mínimo de 3 discos (2 de datos + 1 de paridad).'
                },
                {
                    question: 'Explica la configuración de discos y la tolerancia a fallos en RAID 4.',
                    options: [
                        'A) Requiere un mínimo de 3 discos, con un disco de paridad dedicado y striping a nivel de bloque.',
                        'B) Requiere un mínimo de 2 discos, con mirroring de datos.',
                        'C) Requiere un mínimo de 4 discos, con paridad distribuida.',
                        'D) Requiere un mínimo de 5 discos, con doble paridad.'
                    ],
                    correctAnswer: 'A) Requiere un mínimo de 3 discos, con un disco de paridad dedicado y striping a nivel de bloque.',
                    explanation: 'RAID 4 es muy similar a RAID 3, pero realiza striping a nivel de bloque en lugar de byte, manteniendo un disco de paridad dedicado y un mínimo de 3 discos.'
                },
                {
                    question: '¿Cuál es la diferencia fundamental entre RAID 01 y RAID 10 en términos de configuración y tolerancia a fallos?',
                    options: [
                        'A) RAID 01 es striping de espejos (0+1), RAID 10 es espejo de stripings (1+0). Ambos requieren un mínimo de 4 discos y ofrecen alta tolerancia a fallos.',
                        'B) RAID 01 no tiene tolerancia a fallos, mientras que RAID 10 sí.',
                        'C) RAID 01 es más rápido que RAID 10.',
                        'D) RAID 01 requiere un mínimo de 2 discos, mientras que RAID 10 requiere un mínimo de 4.'
                    ],
                    correctAnswer: 'A) RAID 01 es striping de espejos (0+1), RAID 10 es espejo de stripings (1+0). Ambos requieren un mínimo de 4 discos y ofrecen alta tolerancia a fallos.',
                    explanation: 'La diferencia principal radica en el orden de las operaciones. RAID 01 hace un striping de los datos y luego lo espeja, mientras que RAID 10 espeja los datos y luego hace striping. Ambos necesitan al menos 4 discos y son tolerantes a fallos.'
                }
            ];

            // Variables de estado del quiz
            let currentQuestionIndex = 0;
            let score = 0;
            const userAnswers = new Array(questions.length).fill(null);
            const scoredQuestions = new Array(questions.length).fill(false);

            // Referencias a los elementos del DOM
            const quizContainer = document.getElementById('quizContainer');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const restartBtn = document.getElementById('restartBtn');
            const restartInlineBtn = document.getElementById('restartInlineBtn');
            const finalScoreDiv = document.getElementById('finalScore');
            const progressBar = document.getElementById('progressBar');
            const finalScoreDisplay = finalScoreDiv.querySelector('.score-display');
            const correctCountSpan = document.getElementById('correctCount');
            const incorrectCountSpan = document.getElementById('incorrectCount');
            const unansweredCountSpan = document.getElementById('unansweredCount');
            
            /**
             * Carga el estado del quiz guardado en localStorage.
             * Si no existe, inicializa un nuevo estado.
             */
            function loadQuizState() {
                try {
                    const savedState = JSON.parse(localStorage.getItem('quizState'));
                    if (savedState) {
                        currentQuestionIndex = savedState.currentQuestionIndex;
                        score = savedState.score;
                        // Asegurarse de que los arrays tengan el tamaño correcto
                        userAnswers.splice(0, savedState.userAnswers.length, ...savedState.userAnswers);
                        scoredQuestions.splice(0, savedState.scoredQuestions.length, ...savedState.scoredQuestions);
                    }
                } catch (e) {
                    console.error("Error al cargar el estado del quiz:", e);
                    // Si hay un error, el estado se reiniciará a los valores por defecto
                }
            }

            /**
             * Guarda el estado actual del quiz en localStorage.
             */
            function saveQuizState() {
                const quizState = {
                    currentQuestionIndex: currentQuestionIndex,
                    score: score,
                    userAnswers: userAnswers,
                    scoredQuestions: scoredQuestions
                };
                localStorage.setItem('quizState', JSON.stringify(quizState));
            }

            /**
             * Carga y muestra la pregunta actual.
             */
            function loadQuestion() {
                if (currentQuestionIndex >= questions.length) {
                    showResults();
                    return;
                }

                const currentQuestion = questions[currentQuestionIndex];
                quizContainer.innerHTML = `
                    <div class="question-card">
                        <p class="question-text">${currentQuestionIndex + 1}. ${currentQuestion.question}</p>
                        <div class="options-container">
                            ${currentQuestion.options.map((option, index) => `
                                <button class="option-button" data-option="${option}">
                                    ${option}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;

                // Añade el event listener a los botones de opción
                const optionsContainer = quizContainer.querySelector('.options-container');
                optionsContainer.addEventListener('click', handleOptionClick);

                // Resalta la respuesta del usuario si ya ha respondido y la comprueba
                const savedAnswer = userAnswers[currentQuestionIndex];
                if (savedAnswer !== null) {
                    const selectedButton = optionsContainer.querySelector(`[data-option="${savedAnswer}"]`);
                    if (selectedButton) {
                        checkAnswer(selectedButton);
                    }
                }

                // Actualiza el estado de los botones de navegación y la barra de progreso
                updateNavButtons();
                updateProgressBar();
            }

            /**
             * Maneja el evento de clic en una opción de respuesta.
             * @param {Event} event - El evento de clic.
             */
            function handleOptionClick(event) {
                const selectedOptionButton = event.target.closest('.option-button');
                if (!selectedOptionButton || selectedOptionButton.classList.contains('disabled')) {
                    return;
                }
                
                const selectedOption = selectedOptionButton.dataset.option;
                userAnswers[currentQuestionIndex] = selectedOption;
                saveQuizState();
                
                checkAnswer(selectedOptionButton);
            }

            /**
             * Verifica la respuesta seleccionada por el usuario y actualiza la UI.
             * @param {HTMLElement} selectedButton - El botón de opción seleccionado por el usuario.
             */
            function checkAnswer(selectedButton) {
                const currentQuestion = questions[currentQuestionIndex];
                const optionsContainer = quizContainer.querySelector('.options-container');

                // Deshabilita todos los botones de opción para evitar múltiples respuestas
                optionsContainer.querySelectorAll('.option-button').forEach(button => {
                    button.classList.add('disabled');
                    button.removeEventListener('click', handleOptionClick);
                });

                if (selectedButton.dataset.option === currentQuestion.correctAnswer) {
                    selectedButton.classList.add('correct-answer');
                    if (!scoredQuestions[currentQuestionIndex]) {
                        score++;
                        scoredQuestions[currentQuestionIndex] = true;
                        saveQuizState();
                    }
                    updateQuestionCard(true, currentQuestion);
                } else {
                    selectedButton.classList.add('incorrect-answer');
                    if (scoredQuestions[currentQuestionIndex]) {
                        score--;
                        scoredQuestions[currentQuestionIndex] = false;
                        saveQuizState();
                    }
                    const correctButton = optionsContainer.querySelector(`[data-option="${currentQuestion.correctAnswer}"]`);
                    if (correctButton) {
                        correctButton.classList.add('correct-answer');
                    }
                    updateQuestionCard(false, currentQuestion);
                }
            }

            /**
             * Actualiza el estilo de la tarjeta de pregunta y añade feedback.
             * @param {boolean} isCorrect - Indica si la respuesta es correcta.
             * @param {object} currentQuestion - El objeto de la pregunta actual.
             */
            function updateQuestionCard(isCorrect, currentQuestion) {
                const questionCard = quizContainer.querySelector('.question-card');
                const feedbackMessage = document.createElement('p');
                feedbackMessage.classList.add('feedback');

                if (isCorrect) {
                    questionCard.classList.add('correct');
                    feedbackMessage.textContent = '¡Correcto!';
                    feedbackMessage.classList.add('correct');
                } else {
                    questionCard.classList.add('incorrect');
                    feedbackMessage.textContent = 'Incorrecto. La respuesta correcta es la marcada en verde.';
                    feedbackMessage.classList.add('incorrect');
                }
                questionCard.appendChild(feedbackMessage);

                // Muestra la explicación
                if (currentQuestion.explanation) {
                    const solutionDiv = document.createElement('div');
                    solutionDiv.classList.add('solution');
                    solutionDiv.innerHTML = `<strong>Explicación:</strong> <span class="solution-text">${currentQuestion.explanation}</span>`;
                    questionCard.appendChild(solutionDiv);
                }
            }

            /**
             * Muestra los resultados finales del quiz.
             */
            function showResults() {
                quizContainer.classList.add('hidden');
                prevBtn.classList.add('hidden');
                nextBtn.classList.add('hidden');
                restartInlineBtn.classList.add('hidden');
                progressBar.parentElement.classList.add('hidden');
                finalScoreDiv.classList.remove('hidden');

                // Calcula y muestra las estadísticas
                const correctAnswers = userAnswers.filter((answer, index) => answer === questions[index].correctAnswer).length;
                const unansweredQuestions = userAnswers.filter(answer => answer === null).length;
                const incorrectAnswers = questions.length - correctAnswers - unansweredQuestions;

                finalScoreDisplay.textContent = `Tu puntuación final es ${correctAnswers} de ${questions.length}`;
                correctCountSpan.textContent = correctAnswers;
                incorrectCountSpan.textContent = incorrectAnswers;
                unansweredCountSpan.textContent = unansweredQuestions;
            }

            /**
             * Actualiza el estado de los botones de navegación.
             */
            function updateNavButtons() {
                prevBtn.disabled = currentQuestionIndex === 0;
                nextBtn.textContent = currentQuestionIndex === questions.length - 1 ? 'Finalizar' : 'Siguiente';
            }

            /**
             * Actualiza la barra de progreso.
             */
            function updateProgressBar() {
                const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
                progressBar.style.width = `${progress}%`;
            }

            /**
             * Reinicia el quiz a su estado inicial.
             */
            function restartQuiz() {
                currentQuestionIndex = 0;
                score = 0;
                userAnswers.fill(null);
                scoredQuestions.fill(false);
                localStorage.clear(); // Limpia el localStorage
                
                quizContainer.classList.remove('hidden');
                prevBtn.classList.remove('hidden');
                nextBtn.classList.remove('hidden');
                restartInlineBtn.classList.remove('hidden');
                progressBar.parentElement.classList.remove('hidden');
                finalScoreDiv.classList.add('hidden');
                loadQuestion();
            }

            // Event listeners
            prevBtn.addEventListener('click', () => {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    saveQuizState();
                    loadQuestion();
                }
            });

            nextBtn.addEventListener('click', () => {
                if (currentQuestionIndex < questions.length - 1) {
                    currentQuestionIndex++;
                    saveQuizState();
                    loadQuestion();
                } else {
                    showResults();
                }
            });

            restartBtn.addEventListener('click', restartQuiz);
            restartInlineBtn.addEventListener('click', restartQuiz);

            // Carga inicial
            window.onload = function() {
                loadQuizState();
                loadQuestion();
            };
        });
    </script>
</body>
</html>


