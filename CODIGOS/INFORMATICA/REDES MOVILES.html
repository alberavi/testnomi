<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redes Moviles</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        .question-card {
            background-color: #e2e8f0;
            border-radius: 8px;
            padding: 15px 20px;
            margin-bottom: 15px;
            transition: background-color 0.3s ease, transform 0.2s ease;
            position: relative;
            overflow: hidden;
            border: 1px solid #cbd5e1;
        }
        .question-text {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 10px;
        }
        .options-list {
            list-style: none;
            padding: 0;
            margin-top: 10px;
        }
        .option-item {
            margin-bottom: 8px;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            background-color: #f7fafc;
            border: 1px solid #e2e8f0;
            transition: background-color 0.2s ease, border-color 0.2s ease;
        }
        .option-item:hover {
            background-color: #edf2f7;
        }
        .option-item.selected {
            border-color: #4299e1;
            background-color: #ebf8ff;
        }
        .option-item.correct {
            background-color: #e6fffa;
            border-color: #38a169;
            color: #2f855a;
            font-weight: 600;
        }
        .option-item.incorrect {
            background-color: #fee2e2;
            border-color: #ef4444;
            color: #dc2626;
            font-weight: 600;
        }
        .feedback-message {
            margin-top: 10px;
            padding: 8px 10px;
            border-radius: 6px;
            font-weight: 500;
            display: none;
        }
        .feedback-message.correct {
            background-color: #d1fae5;
            color: #065f46;
        }
        .feedback-message.incorrect {
            background-color: #fee2e2;
            color: #ef4444;
        }
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            gap: 10px; /* Espacio entre botones */
        }
        .nav-button, .reset-button, .finish-button {
            flex: 1; /* Para que ocupen el mismo espacio */
            background-color: #4299e1;
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 700;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 10px rgba(66, 153, 225, 0.3);
        }
        .nav-button:hover, .reset-button:hover, .finish-button:hover {
            background-color: #3182ce;
            transform: translateY(-1px);
        }
        .nav-button:disabled {
            background-color: #a0aec0;
            cursor: not-allowed;
            box-shadow: none;
        }
        .reset-button {
            background-color: #ed8936; /* Naranja para reiniciar */
            box-shadow: 0 4px 10px rgba(237, 137, 54, 0.3);
        }
        .reset-button:hover {
            background-color: #dd6b20;
        }
        .finish-button {
            background-color: #48bb78; /* Verde para finalizar */
            box-shadow: 0 4px 10px rgba(72, 187, 120, 0.3);
        }
        .finish-button:hover {
            background-color: #38a169;
        }
        .title {
            text-align: center;
            color: #2c5282;
            margin-bottom: 30px;
            font-size: 2.25rem;
            font-weight: 700;
            letter-spacing: -0.025em;
        }
        .results-summary {
            background-color: #f7fafc;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #e2e8f0;
            text-align: center;
        }
        .results-summary h2 {
            font-size: 1.75rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 15px;
        }
        .results-summary p {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #4a5568;
        }
        .results-summary p.correct { color: #065f46; }
        .results-summary p.incorrect { color: #dc2626; }
        .results-summary p.unanswered { color: #d69e2e; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">REDES MOVILES</h1>

        <div id="quiz-container"></div>
        <div id="results-container" class="results-summary hidden"></div>

        <div class="navigation-buttons">
            <button id="prev-button" class="nav-button">Anterior</button>
            <button id="reset-button" class="reset-button">Reiniciar Test</button>
            <button id="next-button" class="nav-button">Siguiente</button>
            <button id="finish-button" class="finish-button hidden">Finalizar Test</button>
        </div>
    </div>

    <script>
        // Array de objetos para almacenar las preguntas y respuestas
        const quizData = [
            {
                question: "¿Qué comando se utiliza para listar el contenido de un directorio?",
                options: [
                    "a) cd",
                    "b) ls",
                    "c) pwd",
                    "d) mkdir"
                ],
                answer: "b) ls"
            },
            {
                question: "¿Cuál es el comando para cambiar de directorio?",
                options: [
                    "a) dir",
                    "b) move",
                    "c) cd",
                    "d) copy"
                ],
                answer: "c) cd"
            },
            {
                question: "¿Qué comando muestra la ruta del directorio actual?",
                options: [
                    "a) path",
                    "b) locate",
                    "c) pwd",
                    "d) where"
                ],
                answer: "c) pwd"
            },
            {
                question: "¿Cómo se crea un nuevo directorio en Linux?",
                options: [
                    "a) newdir",
                    "b) create_dir",
                    "c) mkd",
                    "d) mkdir"
                ],
                answer: "d) mkdir"
            },
            {
                question: "¿Qué comando se usa para eliminar un archivo?",
                options: [
                    "a) delete",
                    "b) remove",
                    "c) rm",
                    "d) erase"
                ],
                answer: "c) rm"
            },
            {
                question: "¿Cuál es el comando para copiar archivos o directorios?",
                options: [
                    "a) move",
                    "b) cp",
                    "c) copy",
                    "d) mv"
                ],
                answer: "b) cp"
            },
            {
                question: "¿Qué comando se utiliza para mover o renombrar archivos/directorios?",
                options: [
                    "a) copy",
                    "b) transfer",
                    "c) mv",
                    "d) rename"
                ],
                answer: "c) mv"
            },
            {
                question: "¿Cómo se visualiza el contenido de un archivo de texto en la terminal?",
                options: [
                    "a) open",
                    "b) view",
                    "c) cat",
                    "d) show"
                ],
                answer: "c) cat"
            },
            {
                question: "¿Qué comando se usa para buscar archivos en el sistema?",
                options: [
                    "a) search",
                    "b) find",
                    "c) locate",
                    "d) grep"
                ],
                answer: "b) find"
            },
            {
                question: "¿Cuál es el comando para mostrar el manual de un comando?",
                options: [
                    "a) help",
                    "b) info",
                    "c) man",
                    "d) doc"
                ],
                answer: "c) man"
            },
            {
                question: "¿Qué comando se utiliza para apagar el sistema?",
                options: [
                    "a) off",
                    "b) shutdown",
                    "c) halt",
                    "d) poweroff"
                ],
                answer: "b) shutdown"
            },
            {
                question: "¿Cómo se reinicia el sistema?",
                options: [
                    "a) restart",
                    "b) reboot",
                    "c) reload",
                    "d) cycle"
                ],
                answer: "b) reboot"
            },
            {
                question: "¿Qué comando se usa para ver los procesos en ejecución?",
                options: [
                    "a) tasks",
                    "b) processes",
                    "c) ps",
                    "d) top"
                ],
                answer: "c) ps"
            },
            {
                question: "¿Cuál es el comando para terminar un proceso?",
                options: [
                    "a) stop",
                    "b) end",
                    "c) kill",
                    "d) halt"
                ],
                answer: "c) kill"
            },
            {
                question: "¿Qué comando se utiliza para ver el uso del disco?",
                options: [
                    "a) disk",
                    "b) df",
                    "c) du",
                    "d) space"
                ],
                answer: "b) df"
            },
            {
                question: "¿Cómo se comprueba el uso de memoria RAM?",
                options: [
                    "a) mem",
                    "b) free",
                    "c) ram",
                    "d) usage"
                ],
                answer: "b) free"
            },
            {
                question: "¿Qué comando se usa para descargar archivos desde la web?",
                options: [
                    "a) download",
                    "b) fetch",
                    "c) wget",
                    "d) get"
                ],
                answer: "c) wget"
            },
            {
                question: "¿Cuál es el comando para gestionar paquetes en sistemas Debian/Ubuntu?",
                options: [
                    "a) yum",
                    "b) pacman",
                    "c) apt",
                    "d) dnf"
                ],
                answer: "c) apt"
            },
            {
                question: "¿Qué comando se utiliza para cambiar los permisos de un archivo?",
                options: [
                    "a) perm",
                    "b) chmod",
                    "c) chown",
                    "d) rights"
                ],
                answer: "b) chmod"
            },
            {
                question: "¿Cómo se cambia el propietario de un archivo?",
                options: [
                    "a) owner",
                    "b) chgrp",
                    "c) chown",
                    "d) setowner"
                ],
                answer: "c) chown"
            }
        ];

        const quizContainer = document.getElementById('quiz-container');
        const resultsContainer = document.getElementById('results-container');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const resetButton = document.getElementById('reset-button');
        const finishButton = document.getElementById('finish-button');

        let currentQuestionIndex = 0;
        let userAnswers = []; // Almacena { questionIndex: X, selectedOption: Y, isCorrect: Z }

        // Inicializar o cargar el estado del test desde localStorage
        function loadQuizState() {
            const savedState = localStorage.getItem('linuxQuizState');
            if (savedState) {
                const state = JSON.parse(savedState);
                currentQuestionIndex = state.currentQuestionIndex;
                userAnswers = state.userAnswers;
            } else {
                resetQuizState();
            }
        }

        // Guardar el estado del test en localStorage
        function saveQuizState() {
            const state = {
                currentQuestionIndex: currentQuestionIndex,
                userAnswers: userAnswers
            };
            localStorage.setItem('linuxQuizState', JSON.stringify(state));
        }

        // Reiniciar el estado del test
        function resetQuizState() {
            currentQuestionIndex = 0;
            userAnswers = Array(quizData.length).fill(null); // Reiniciar todas las respuestas
            localStorage.removeItem('linuxQuizState');
            renderQuestion();
            hideResults();
            updateNavigationButtons();
        }

        // Función para renderizar la pregunta actual
        function renderQuestion() {
            quizContainer.innerHTML = ''; // Limpiar el contenedor
            resultsContainer.classList.add('hidden'); // Ocultar resultados si están visibles

            if (currentQuestionIndex >= quizData.length) {
                showResults();
                return;
            }

            const q = quizData[currentQuestionIndex];
            const questionCard = document.createElement('div');
            questionCard.classList.add('question-card', 'p-4', 'mb-4', 'rounded-lg', 'shadow-md');

            const questionText = document.createElement('p');
            questionText.classList.add('question-text', 'font-semibold', 'text-lg', 'mb-2');
            questionText.textContent = `${currentQuestionIndex + 1}. ${q.question}`;
            questionCard.appendChild(questionText);

            const optionsList = document.createElement('ul');
            optionsList.classList.add('options-list');

            q.options.forEach((option, optionIndex) => {
                const optionItem = document.createElement('li');
                optionItem.classList.add('option-item');
                optionItem.textContent = option;
                optionItem.setAttribute('data-option-index', optionIndex);

                // Comprobar si esta opción fue seleccionada previamente
                const userAnswer = userAnswers[currentQuestionIndex];
                if (userAnswer && userAnswer.selectedOption === option) {
                    optionItem.classList.add('selected');
                    if (userAnswer.isCorrect) {
                        optionItem.classList.add('correct');
                    } else {
                        optionItem.classList.add('incorrect');
                    }
                }

                optionItem.addEventListener('click', () => {
                    // Solo permitir seleccionar si la pregunta no ha sido respondida o si se permite cambiar la respuesta
                    if (!userAnswers[currentQuestionIndex]) { // Si aún no ha sido contestada
                        selectOption(option, optionItem);
                    } else {
                        // Si ya está contestada, permitir cambiar la respuesta si se desea
                        // Opcional: Puedes añadir una confirmación aquí si quieres evitar cambios accidentales
                        selectOption(option, optionItem);
                    }
                });
                optionsList.appendChild(optionItem);
            });
            questionCard.appendChild(optionsList);

            // Mensaje de feedback (correcto/incorrecto)
            const feedbackMessage = document.createElement('div');
            feedbackMessage.classList.add('feedback-message');
            questionCard.appendChild(feedbackMessage);

            // Mostrar feedback si la pregunta ya fue respondida
            const userAnswer = userAnswers[currentQuestionIndex];
            if (userAnswer) {
                if (userAnswer.isCorrect) {
                    feedbackMessage.textContent = '¡Correcto!';
                    feedbackMessage.classList.add('correct');
                } else {
                    feedbackMessage.textContent = `Incorrecto. La respuesta correcta es: ${q.answer}`;
                    feedbackMessage.classList.add('incorrect');
                }
                feedbackMessage.style.display = 'block';
            }

            quizContainer.appendChild(questionCard);
            updateNavigationButtons();
        }

        // Manejar la selección de una opción
        function selectOption(selectedOptionText, selectedOptionItem) {
            const q = quizData[currentQuestionIndex];
            const isCorrect = (selectedOptionText === q.answer);

            // Eliminar clases de selección de todas las opciones para esta pregunta
            const options = quizContainer.querySelectorAll('.option-item');
            options.forEach(item => {
                item.classList.remove('selected', 'correct', 'incorrect');
            });

            // Añadir clase 'selected' a la opción clickeada
            selectedOptionItem.classList.add('selected');

            // Actualizar el estado de la respuesta del usuario
            userAnswers[currentQuestionIndex] = {
                questionIndex: currentQuestionIndex,
                selectedOption: selectedOptionText,
                isCorrect: isCorrect
            };
            saveQuizState(); // Guardar el estado después de cada respuesta

            // Mostrar feedback
            const feedbackMessage = quizContainer.querySelector('.feedback-message');
            if (isCorrect) {
                feedbackMessage.textContent = '¡Correcto!';
                feedbackMessage.classList.remove('incorrect');
                feedbackMessage.classList.add('correct');
                selectedOptionItem.classList.add('correct'); // Marcar la opción seleccionada como correcta
            } else {
                feedbackMessage.textContent = `Incorrecto. La respuesta correcta es: ${q.answer}`;
                feedbackMessage.classList.remove('correct');
                feedbackMessage.classList.add('incorrect');
                selectedOptionItem.classList.add('incorrect'); // Marcar la opción seleccionada como incorrecta

                // Opcional: Resaltar la respuesta correcta si la seleccionada es incorrecta
                options.forEach(item => {
                    if (item.textContent === q.answer) {
                        item.classList.add('correct');
                    }
                });
            }
            feedbackMessage.style.display = 'block';
        }

        // Actualizar el estado de los botones de navegación
        function updateNavigationButtons() {
            prevButton.disabled = currentQuestionIndex === 0;
            nextButton.disabled = currentQuestionIndex === quizData.length - 1;

            if (currentQuestionIndex === quizData.length - 1) {
                finishButton.classList.remove('hidden');
                nextButton.classList.add('hidden');
            } else {
                finishButton.classList.add('hidden');
                nextButton.classList.remove('hidden');
            }
        }

        // Mostrar resultados finales
        function showResults() {
            quizContainer.innerHTML = ''; // Limpiar la pregunta
            resultsContainer.classList.remove('hidden'); // Mostrar el contenedor de resultados

            let correctCount = 0;
            let incorrectCount = 0;
            let unansweredCount = 0;

            userAnswers.forEach((answer, index) => {
                if (answer === null) {
                    unansweredCount++;
                } else if (answer.isCorrect) {
                    correctCount++;
                } else {
                    incorrectCount++;
                }
            });

            resultsContainer.innerHTML = `
                <h2>Resultados del Test</h2>
                <p class="correct">Preguntas Correctas: ${correctCount}</p>
                <p class="incorrect">Preguntas Incorrectas: ${incorrectCount}</p>
                <p class="unanswered">Preguntas Sin Contestar: ${unansweredCount}</p>
            `;

            // Ocultar botones de navegación y mostrar solo reiniciar
            prevButton.classList.add('hidden');
            nextButton.classList.add('hidden');
            finishButton.classList.add('hidden');
            resetButton.style.display = 'block'; // Asegurarse de que el botón de reiniciar esté visible
        }

        // Ocultar resultados
        function hideResults() {
            resultsContainer.classList.add('hidden');
            prevButton.classList.remove('hidden');
            nextButton.classList.remove('hidden');
            finishButton.classList.add('hidden');
        }

        // Event Listeners
        prevButton.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        });

        nextButton.addEventListener('click', () => {
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        });

        resetButton.addEventListener('click', resetQuizState);
        finishButton.addEventListener('click', showResults);

        // Cargar el test al cargar la página
        document.addEventListener('DOMContentLoaded', () => {
            loadQuizState();
            renderQuestion();
        });
    </script>
</body>
</html>
