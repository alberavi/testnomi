<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test POP3 e IMAP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }
        .card {
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 2rem;
        }
        .option-button {
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .option-button:not(.disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .selected {
            background-color: #3b82f6;
            color: #ffffff;
        }
        .correct {
            background-color: #10b981;
            color: #ffffff;
            cursor: default;
        }
        .incorrect {
            background-color: #ef4444;
            color: #ffffff;
            cursor: default;
        }
        .disabled {
            pointer-events: none;
            opacity: 0.6;
        }
        .quiz-navigation-btn {
            background-color: #4f46e5;
            color: #ffffff;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            transition: background-color 0.3s ease;
        }
        .quiz-navigation-btn:hover {
            background-color: #4338ca;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">
    <div id="quiz-container" class="container">
        <h1 style="color: #003366; font-family: 'Georgia', serif; font-size: 2rem; text-align: center; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);">CORREO IMAP Y POP3</h1>
        <div id="quiz-content" class="card">
            <!-- Questions and results will be rendered here -->
        </div>
        <div id="navigation-buttons" class="mt-8 flex justify-between">
            <button id="prev-btn" class="quiz-navigation-btn shadow-md disabled:opacity-50" disabled>Anterior</button>
            <button id="next-btn" class="quiz-navigation-btn shadow-md">Siguiente</button>
        </div>
    </div>
    <div id="custom-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full">
      <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
        <div class="mt-3 text-center">
          <h3 class="text-lg leading-6 font-medium text-gray-900">¿Estás seguro?</h3>
          <div class="mt-2 px-7 py-3">
            <p class="text-sm text-gray-500">¿Quieres reiniciar el test? Perderás todo tu progreso.</p>
          </div>
          <div class="items-center px-4 py-3">
            <button id="modal-confirm-btn" class="px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500">
              Sí, reiniciar
            </button>
            <button id="modal-cancel-btn" class="mt-2 px-4 py-2 bg-gray-200 text-gray-800 text-base font-medium rounded-md w-full shadow-sm hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400">
              Cancelar
            </button>
          </div>
        </div>
      </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Check if the environment provides localStorage.
            const isLocalStorageAvailable = typeof localStorage !== 'undefined';

            const quizData = [
                {
                    question: "¿Cuál es una ventaja del uso del protocolo IMAP en lugar de POP3?",
                    options: [
                        "Permite visualizar los correos directamente en el servidor sin descargarlos.",
                        "Es más sencillo que POP3.",
                        "No requiere autenticación.",
                        "Descarga los correos automáticamente del servidor."
                    ],
                    answer: 0
                },
                {
                    question: "¿Qué afirmación sobre POP3 e IMAP es INCORRECTA?",
                    options: [
                        "Con IMAP, los mensajes se almacenan en un servidor remoto y los usuarios pueden iniciar sesión en varios clientes de correo electrónico y leer los mismos mensajes.",
                        "POP3 solo admite la sincronización de correo unidireccional, lo que solo permite a los usuarios descargar correos electrónicos desde un servidor a un cliente.",
                        "Con IMAP, el correo enviado y recibido se almacena en el servidor hasta que el usuario lo elimina permanentemente.",
                        "Con POP3, si los usuarios organizan sus correos electrónicos en un dispositivo mediante carpetas, ya no tendrán que hacerlo en el resto de dispositivos porque se replica la organización en carpetas."
                    ],
                    answer: 3
                },
                {
                    question: "Si accedes a tu correo desde múltiples dispositivos (teléfono, tablet, PC), ¿qué protocolo es el más adecuado para mantener la sincronización?",
                    options: [
                        "POP3",
                        "IMAP",
                        "SMTP",
                        "HTTP"
                    ],
                    answer: 1
                },
                {
                    question: "¿Qué puerto usa POP3 sin seguridad?",
                    options: [
                        "143",
                        "993",
                        "110",
                        "995"
                    ],
                    answer: 2
                },
                {
                    question: "¿Qué puerto usa IMAP con seguridad (IMAPS)?",
                    options: [
                        "143",
                        "993",
                        "110",
                        "995"
                    ],
                    answer: 1
                },
                {
                    question: "¿Cuál de estos protocolos borra los correos del servidor por defecto tras la descarga?",
                    options: [
                        "IMAP",
                        "POP3",
                        "SMTP",
                        "MTA"
                    ],
                    answer: 1
                },
                {
                    question: "¿Qué protocolo es ideal si tienes poco espacio de almacenamiento en el servidor?",
                    options: [
                        "IMAP",
                        "POP3",
                        "SMTP",
                        "Ambos"
                    ],
                    answer: 1
                },
                {
                    question: "Con IMAP, ¿dónde se gestionan las carpetas y el estado de los mensajes (leído/no leído)?",
                    options: [
                        "En el cliente de correo localmente",
                        "En el servidor de correo",
                        "En el spool de correo",
                        "En el DNS"
                    ],
                    answer: 1
                },
                {
                    question: "Si borras un correo en un cliente POP3, ¿qué sucede con ese correo en otros dispositivos?",
                    options: [
                        "Se borra automáticamente de todos los dispositivos.",
                        "Se queda en el servidor para que otros dispositivos lo descarguen.",
                        "Se mantiene en el servidor hasta que otro dispositivo lo borre.",
                        "No afecta a otros dispositivos ya que la copia es local."
                    ],
                    answer: 3
                },
                {
                    question: "¿Qué comando POP3 se usa para marcar un mensaje para su borrado?",
                    options: [
                        "DELE",
                        "RETR",
                        "QUIT",
                        "STAT"
                    ],
                    answer: 0
                },
                {
                    question: "¿Qué comando IMAP se usa para borrar mensajes marcados con el flag '\\Deleted'?",
                    options: [
                        "DELE",
                        "FETCH",
                        "EXPUNGE",
                        "STORE"
                    ],
                    answer: 2
                },
                {
                    question: "Para leer solo los encabezados de un correo sin descargar el cuerpo, ¿qué protocolo sería más eficiente?",
                    options: [
                        "POP3",
                        "IMAP",
                        "SMTP",
                        "Ambos son igual de eficientes."
                    ],
                    answer: 1
                },
                {
                    question: "Una de las principales características de IMAP es que está orientado a...",
                    options: [
                        "descarga de correos.",
                        "uso offline.",
                        "carpetas en el servidor.",
                        "enviar correos."
                    ],
                    answer: 2
                },
                {
                    question: "El puerto 110 es para...",
                    options: [
                        "IMAP con seguridad",
                        "IMAP sin seguridad",
                        "POP3 sin seguridad",
                        "POP3 con seguridad"
                    ],
                    answer: 2
                },
                {
                    question: "El puerto 995 es para...",
                    options: [
                        "POP3 sin seguridad",
                        "IMAP con seguridad",
                        "POP3 con seguridad",
                        "IMAP sin seguridad"
                    ],
                    answer: 2
                },
                {
                    question: "¿Qué comando IMAP se usa para leer el contenido de un mensaje?",
                    options: [
                        "SELECT",
                        "FETCH",
                        "LIST",
                        "LOGIN"
                    ],
                    answer: 1
                },
                {
                    question: "La sincronización de correos electrónicos en múltiples dispositivos de forma bidireccional es una característica de:",
                    options: [
                        "POP3",
                        "IMAP",
                        "SMTP",
                        "Ninguno de los anteriores"
                    ],
                    answer: 1
                },
                {
                    question: "Si una persona prefiere acceder a su correo electrónico desde un único dispositivo y tener sus correos almacenados localmente, ¿qué protocolo debería usar?",
                    options: [
                        "IMAP",
                        "POP3",
                        "SMTP",
                        "MAA"
                    ],
                    answer: 1
                },
                {
                    question: "Con IMAP, el estado de un mensaje (leído, no leído, borrado) se almacena en:",
                    options: [
                        "el cliente de correo local.",
                        "el servidor.",
                        "ambos, cliente y servidor.",
                        "ninguno, es un estado temporal."
                    ],
                    answer: 1
                },
                {
                    question: "La función principal de IMAP es permitir la gestión de correos electrónicos:",
                    options: [
                        "localmente.",
                        "en el servidor.",
                        "exclusivamente en el cliente.",
                        "sin conexión a internet."
                    ],
                    answer: 1
                },
                {
                    question: "El protocolo POP3 es conocido por su...",
                    options: [
                        "complejidad.",
                        "sincronización avanzada.",
                        "simplicidad.",
                        "gestión de carpetas en el servidor."
                    ],
                    answer: 2
                },
                {
                    question: "¿Cuál de los siguientes no es un comando de POP3?",
                    options: [
                        "RETR",
                        "LIST",
                        "LOGIN",
                        "QUIT"
                    ],
                    answer: 2
                },
                {
                    question: "¿Qué protocolo es más adecuado para usuarios con conexión a internet inestable?",
                    options: [
                        "IMAP",
                        "POP3",
                        "SMTP",
                        "Ambos son igual de adecuados."
                    ],
                    answer: 1
                },
                {
                    question: "Con IMAP, ¿qué sucede con los correos que se descargan?",
                    options: [
                        "Se eliminan del servidor.",
                        "Se mantienen en el servidor.",
                        "Se almacenan localmente y se eliminan del servidor.",
                        "Se marcan como leídos y se eliminan del servidor."
                    ],
                    answer: 1
                },
                {
                    question: "Si el servidor de correo tiene un límite de espacio, el uso de POP3 podría ser una solución para:",
                    options: [
                        "organizar mejor los correos en el servidor.",
                        "dejar una copia de los correos en el servidor.",
                        "liberar espacio en el servidor al descargar los correos.",
                        "sincronizar los correos entre dispositivos."
                    ],
                    answer: 2
                },
                {
                    question: "¿Qué significa IMAP?",
                    options: [
                        "Internet Message Access Protocol",
                        "Internet Mail Application Protocol",
                        "Interactive Mail Access Protocol",
                        "Internal Mail Access Protocol"
                    ],
                    answer: 0
                },
                {
                    question: "¿Qué significa POP3?",
                    options: [
                        "Post Office Protocol version 3",
                        "Personal Office Protocol version 3",
                        "Post Office Procedure version 3",
                        "Private Office Protocol version 3"
                    ],
                    answer: 0
                },
                {
                    question: "POP3 se considera un protocolo 'de descarga' porque:",
                    options: [
                        "descarga los correos y los borra del servidor por defecto.",
                        "solo descarga los correos al cliente.",
                        "descarga los correos y los almacena en el servidor.",
                        "permite descargar los correos de forma selectiva."
                    ],
                    answer: 0
                },
                {
                    question: "Un usuario quiere tener sus correos organizados en carpetas y que estos cambios se reflejen en todos sus dispositivos. Elige el protocolo correcto:",
                    options: [
                        "POP3",
                        "IMAP",
                        "SMTP",
                        "HTTP"
                    ],
                    answer: 1
                },
                {
                    question: "¿Cuál de los siguientes es un puerto seguro para POP3?",
                    options: [
                        "110",
                        "143",
                        "993",
                        "995"
                    ],
                    answer: 3
                },
                {
                    question: "¿Cuál de los siguientes es un puerto seguro para IMAP?",
                    options: [
                        "110",
                        "143",
                        "993",
                        "995"
                    ],
                    answer: 2
                },
                {
                    question: "¿Qué protocolo permite ver el contenido de los correos sin necesidad de descargarlos?",
                    options: [
                        "POP3",
                        "IMAP",
                        "SMTP",
                        "MTA"
                    ],
                    answer: 1
                },
                {
                    question: "El protocolo que mantiene la información de los mensajes (leído, no leído) en el servidor es:",
                    options: [
                        "POP3",
                        "IMAP",
                        "SMTP",
                        "HTTP"
                    ],
                    answer: 1
                },
                {
                    question: "Si usas IMAP y borras un correo, ¿dónde se borra también?",
                    options: [
                        "Solo en el cliente.",
                        "Solo en el servidor.",
                        "En el servidor y en todos los clientes sincronizados.",
                        "No se borra, solo se archiva."
                    ],
                    answer: 2
                },
                {
                    question: "Para gestionar una gran cantidad de correos electrónicos en línea, ¿qué protocolo es más eficiente?",
                    options: [
                        "POP3",
                        "IMAP",
                        "SMTP",
                        "Ninguno, se debe usar webmail."
                    ],
                    answer: 1
                },
                {
                    question: "POP3 requiere autenticación, ¿cierto o falso?",
                    options: [
                        "Cierto",
                        "Falso",
                        "Solo si se usa SSL/TLS",
                        "Depende del servidor"
                    ],
                    answer: 0
                },
                {
                    question: "¿Qué protocolo fue diseñado para un entorno con múltiples clientes de correo?",
                    options: [
                        "POP3",
                        "IMAP",
                        "SMTP",
                        "Ambos"
                    ],
                    answer: 1
                },
                {
                    question: "El comando `RETR` en POP3 sirve para...",
                    options: [
                        "borrar un mensaje.",
                        "marcar un mensaje como leído.",
                        "descargar un mensaje específico del servidor.",
                        "listar todos los mensajes."
                    ],
                    answer: 2
                },
                {
                    question: "En IMAP, el comando `SELECT` se usa para...",
                    options: [
                        "seleccionar un mensaje para leer.",
                        "seleccionar una carpeta para trabajar con ella.",
                        "seleccionar los mensajes no leídos.",
                        "seleccionar los mensajes borrados."
                    ],
                    answer: 1
                },
                {
                    question: "Con POP3, si descargas un correo en tu PC, ¿estará disponible en tu teléfono?",
                    options: [
                        "Sí, si no se configuró para borrarlo del servidor.",
                        "No, porque POP3 borra el correo del servidor.",
                        "Sí, siempre y cuando ambos dispositivos usen POP3.",
                        "Sí, si se usa el puerto 995."
                    ],
                    answer: 0
                },
                {
                    question: "¿Cuál de estos protocolos es más eficiente en el uso de ancho de banda al solo descargar lo necesario?",
                    options: [
                        "POP3",
                        "IMAP",
                        "SMTP",
                        "No hay diferencia."
                    ],
                    answer: 1
                },
                {
                    question: "POP3 es un protocolo que se considera 'offline' porque...",
                    options: [
                        "requiere conexión constante.",
                        "la mayor parte del trabajo se hace localmente después de la descarga.",
                        "solo funciona sin conexión a internet.",
                        "descarga los correos a la memoria RAM."
                    ],
                    answer: 1
                },
                {
                    question: "La principal diferencia entre POP3 e IMAP radica en...",
                    options: [
                        "los puertos que utilizan.",
                        "la forma en que gestionan el almacenamiento de los correos.",
                        "si son seguros o no.",
                        "el tamaño de los correos que pueden manejar."
                    ],
                    answer: 1
                },
                {
                    question: "Si borras una carpeta de correos en un cliente IMAP, ¿dónde se replica la acción?",
                    options: [
                        "Solo en ese cliente.",
                        "Solo en el servidor.",
                        "En el servidor y en todos los demás clientes sincronizados.",
                        "No se puede borrar una carpeta con IMAP."
                    ],
                    answer: 2
                },
                {
                    question: "Un usuario con una conexión a internet muy lenta quiere leer sus correos de forma rápida. ¿Qué protocolo es mejor para él?",
                    options: [
                        "IMAP, ya que solo descarga los encabezados.",
                        "POP3, porque descarga todo de una vez.",
                        "SMTP, para enviar correos rápidamente.",
                        "Ninguno de los anteriores."
                    ],
                    answer: 0
                },
                {
                    question: "La gestión de carpetas en el servidor es una de las mayores ventajas de:",
                    options: [
                        "POP3",
                        "IMAP",
                        "SMTP",
                        "HTTP"
                    ],
                    answer: 1
                },
                {
                    question: "¿Qué protocolo de correo es más antiguo?",
                    options: [
                        "IMAP",
                        "POP3",
                        "Ambos son de la misma época.",
                        "Ninguno de los dos."
                    ],
                    answer: 1
                },
                {
                    question: "El comando `USER` se utiliza en POP3 para:",
                    options: [
                        "autenticar el nombre de usuario.",
                        "seleccionar un buzón de correo.",
                        "listar los correos.",
                        "leer un mensaje."
                    ],
                    answer: 0
                },
                {
                    question: "¿Cuál de los siguientes NO es una característica de IMAP?",
                    options: [
                        "Acceso a carpetas en el servidor.",
                        "Sincronización bidireccional.",
                        "Descarga total del correo por defecto.",
                        "Uso eficiente del ancho de banda."
                    ],
                    answer: 2
                },
                {
                    question: "Si en un cliente de correo con IMAP marcas un mensaje como 'no leído', ¿dónde se guarda ese estado?",
                    options: [
                        "Solo en el cliente local.",
                        "En el servidor, para que todos los clientes lo vean.",
                        "En un archivo de configuración del cliente.",
                        "En un archivo de registro del servidor."
                    ],
                    answer: 1
                }
            ];

            let currentQuestionIndex = 0;
            const answers = isLocalStorageAvailable && localStorage.getItem('quizAnswers') ? JSON.parse(localStorage.getItem('quizAnswers')) : new Array(quizData.length).fill(null);
            const quizContent = document.getElementById('quiz-content');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const modal = document.getElementById('custom-modal');
            const modalConfirmBtn = document.getElementById('modal-confirm-btn');
            const modalCancelBtn = document.getElementById('modal-cancel-btn');

            function saveState() {
                if (isLocalStorageAvailable) {
                    localStorage.setItem('quizAnswers', JSON.stringify(answers));
                }
            }

            function renderQuestion() {
                if (currentQuestionIndex < quizData.length) {
                    const question = quizData[currentQuestionIndex];
                    const hasAnswered = answers[currentQuestionIndex] !== null;
                    const correctAnswer = question.answer;

                    let optionsHtml = question.options.map((option, index) => {
                        let buttonClass = 'option-button w-full text-left p-4 my-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 hover:bg-gray-50';

                        if (hasAnswered) {
                            if (index === answers[currentQuestionIndex] && index !== correctAnswer) {
                                buttonClass += ' incorrect';
                            } else if (index === correctAnswer) {
                                buttonClass += ' correct';
                            } else {
                                buttonClass += ' disabled';
                            }
                        }
                        
                        return `<button class="${buttonClass}" data-option-index="${index}">${String.fromCharCode(97 + index)}) ${option}</button>`;
                    }).join('');

                    quizContent.innerHTML = `
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-semibold text-gray-800">Pregunta ${currentQuestionIndex + 1} de ${quizData.length}</h2>
                            <button id="reset-btn" class="text-sm px-4 py-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors">Reiniciar Test</button>
                        </div>
                        <p class="text-lg mb-6">${question.question}</p>
                        <div id="options-container" class="${hasAnswered ? 'disabled' : ''}">
                            ${optionsHtml}
                        </div>
                    `;

                    if (!hasAnswered) {
                        document.getElementById('options-container').addEventListener('click', (e) => {
                            const target = e.target.closest('.option-button');
                            if (target) {
                                const selectedOption = parseInt(target.dataset.optionIndex);
                                answers[currentQuestionIndex] = selectedOption;
                                saveState();

                                const questionData = quizData[currentQuestionIndex];
                                const correctAnswerIndex = questionData.answer;

                                if (selectedOption === correctAnswerIndex) {
                                    target.classList.add('correct');
                                } else {
                                    target.classList.add('incorrect');
                                    document.querySelector(`[data-option-index="${correctAnswerIndex}"]`).classList.add('correct');
                                }

                                document.querySelectorAll('.option-button').forEach(btn => btn.classList.add('disabled'));
                            }
                        });
                    }

                    document.getElementById('reset-btn').addEventListener('click', () => {
                        modal.classList.remove('hidden');
                    });
                } else {
                    renderResults();
                }

                updateNavigationButtons();
            }

            function renderResults() {
                let correctCount = 0;
                let incorrectCount = 0;
                let unansweredCount = 0;

                quizData.forEach((q, index) => {
                    const userAnswer = answers[index];
                    if (userAnswer === null) {
                        unansweredCount++;
                    } else if (userAnswer === q.answer) {
                        correctCount++;
                    } else {
                        incorrectCount++;
                    }
                });

                const totalQuestions = quizData.length;
                let resultsHtml = `<h2 class="text-3xl font-bold text-center mb-6">Resultados del Test</h2>`;

                resultsHtml += `
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-8">
                        <div class="p-6 bg-blue-100 rounded-lg">
                            <p class="text-4xl font-extrabold text-blue-600">${totalQuestions}</p>
                            <p class="text-lg text-blue-800">Total de Preguntas</p>
                        </div>
                        <div class="p-6 bg-green-100 rounded-lg">
                            <p class="text-4xl font-extrabold text-green-600">${correctCount}</p>
                            <p class="text-lg text-green-800">Correctas</p>
                        </div>
                        <div class="p-6 bg-red-100 rounded-lg">
                            <p class="text-4xl font-extrabold text-red-600">${incorrectCount}</p>
                            <p class="text-lg text-red-800">Incorrectas</p>
                        </div>
                    </div>
                `;
                
                resultsHtml += `<div class="p-6 bg-yellow-100 rounded-lg text-center mb-8"><p class="text-4xl font-extrabold text-yellow-600">${unansweredCount}</p><p class="text-lg text-yellow-800">Sin Contestar</p></div>`;


                resultsHtml += `
                    <h3 class="text-2xl font-semibold mb-4">Revisión de Respuestas</h3>
                    <div class="space-y-4">
                `;

                quizData.forEach((q, index) => {
                    const userAnswer = answers[index];
                    const isCorrect = userAnswer === q.answer;
                    const cardColor = userAnswer === null ? 'bg-gray-50' : isCorrect ? 'bg-green-50' : 'bg-red-50';
                    const answerText = q.options[q.answer];
                    const userAnswerText = userAnswer !== null ? q.options[userAnswer] : 'No contestada';
                    
                    resultsHtml += `
                        <div class="p-4 rounded-lg border ${cardColor} transition-colors duration-200">
                            <p class="font-bold text-lg">Pregunta ${index + 1}: ${q.question}</p>
                            <p class="mt-2 ${isCorrect ? 'text-green-600' : 'text-red-600'}">Tu respuesta: <span class="font-semibold">${userAnswerText}</span></p>
                            <p class="text-green-600">Respuesta correcta: <span class="font-semibold">${answerText}</span></p>
                        </div>
                    `;
                });

                resultsHtml += `</div>
                    <div class="mt-8 text-center">
                        <button id="restart-quiz-btn" class="quiz-navigation-btn shadow-md">Reiniciar Test</button>
                    </div>
                `;

                quizContent.innerHTML = resultsHtml;
                document.getElementById('restart-quiz-btn').addEventListener('click', () => {
                    modal.classList.remove('hidden');
                });
                document.getElementById('navigation-buttons').classList.add('hidden');
            }

            function resetQuiz() {
                answers.fill(null);
                saveState();
                currentQuestionIndex = 0;
                renderQuestion();
                document.getElementById('navigation-buttons').classList.remove('hidden');
            }

            function updateNavigationButtons() {
                prevBtn.disabled = currentQuestionIndex === 0;
                if (currentQuestionIndex >= quizData.length - 1) {
                    nextBtn.textContent = 'Finalizar Test';
                } else {
                    nextBtn.textContent = 'Siguiente';
                }
            }
            
            prevBtn.addEventListener('click', () => {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    renderQuestion();
                }
            });

            nextBtn.addEventListener('click', () => {
                if (currentQuestionIndex < quizData.length - 1) {
                    currentQuestionIndex++;
                    renderQuestion();
                } else if (currentQuestionIndex === quizData.length - 1) {
                    currentQuestionIndex++;
                    renderResults();
                }
            });

            modalConfirmBtn.addEventListener('click', () => {
              resetQuiz();
              modal.classList.add('hidden');
            });

            modalCancelBtn.addEventListener('click', () => {
              modal.classList.add('hidden');
            });

            // Initial render
            renderQuestion();
        });
    </script>
</body>
</html>

