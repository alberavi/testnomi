<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COMANDOS DE WINDOWS</title>
    <!-- Enlace a Tailwind CSS para las clases de la estructura HTML -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS completo para el estilo del quiz -->
    <style>
        /* Estilos generales del cuerpo */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }

        /* Contenedor principal del quiz */
        .container {
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 30px;
            max-width: 800px;
            width: 100%;
            margin-top: 20px;
        }

        /* Tarjeta de la pregunta */
        .question-card {
            background-color: #f8fafc;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease-in-out;
        }

        /* Estilo para la tarjeta de pregunta correcta */
        .question-card.correct {
            background-color: #d4edda;
            border-color: #28a745;
        }

        /* Estilo para la tarjeta de pregunta incorrecta */
        .question-card.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
        }

        /* Texto de la pregunta */
        .question-text {
            font-size: 1.15rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        /* Botones de opciones */
        .option-button {
            display: block;
            width: 100%;
            text-align: left;
            padding: 12px 18px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid #cbd5e0;
            background-color: #ffffff;
            color: #4a5568;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        /* Efecto hover para los botones de opciones */
        .option-button:hover:not(.disabled) {
            background-color: #e2e8f0;
            border-color: #a0aec0;
        }

        /* Estilo para el botón de opción seleccionado */
        .option-button.selected {
            border-color: #4299e1;
            background-color: #ebf8ff;
            font-weight: 600;
        }

        /* Estilo para la respuesta correcta */
        .option-button.correct-answer {
            background-color: #28a745;
            color: #ffffff;
            border-color: #28a745;
            font-weight: 700;
        }

        /* Estilo para la respuesta incorrecta */
        .option-button.incorrect-answer {
            background-color: #dc3545;
            color: #ffffff;
            border-color: #dc3545;
            font-weight: 700;
        }

        /* Estilo para los botones deshabilitados */
        .option-button.disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }

        /* Contenedor de la solución */
        .solution {
            margin-top: 15px;
            padding: 10px 15px;
            border-radius: 8px;
            background-color: #e0f2f7;
            color: #2c5282;
            font-size: 0.95rem;
            font-weight: 500;
            border: 1px solid #90cdf4;
        }

        /* Contenedor del feedback (correcto/incorrecto) */
        .feedback {
            margin-top: 15px;
            font-weight: 600;
            font-size: 1rem;
            text-align: center;
        }

        /* Estilo para feedback correcto */
        .feedback.correct {
            color: #28a745;
        }

        /* Estilo para feedback incorrecto */
        .feedback.incorrect {
            color: #dc3545;
        }

        /* Contenedor de los botones de navegación */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }

        /* Estilo base para los botones de navegación */
        .nav-button {
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            flex-grow: 1;
            text-align: center;
        }

        /* Estilo para el botón "Anterior" */
        .nav-button.prev {
            background-color: #6b7280;
            color: #ffffff;
        }
        .nav-button.prev:hover:not(:disabled) {
            background-color: #4b5563;
            transform: translateY(-2px);
        }

        /* Estilo para el botón "Siguiente" */
        .nav-button.next {
            background-color: #4299e1;
            color: #ffffff;
        }
        .nav-button.next:hover:not(:disabled) {
            background-color: #3182ce;
            transform: translateY(-2px);
        }

        /* Estilo para el botón de reinicio en línea */
        .nav-button.restart-inline {
            background-color: #f50b0b;
            color: #ffffff;
        }
        .nav-button.restart-inline:hover:not(:disabled) {
            background-color: #ac0505;
            transform: translateY(-2px);
        }

        /* Estilo para los botones deshabilitados */
        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Barra de progreso */
        .progress-bar-container {
            width: 100%;
            background-color: #e2e8f0;
            border-radius: 5px;
            height: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: #4299e1;
            width: 0%;
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        /* Visualización de la puntuación final */
        .score-display {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: #2d3748;
            margin-top: 20px;
        }

        /* Resumen de resultados */
        .results-summary {
            margin-top: 20px;
            padding: 20px;
            background-color: #f8fafc;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
        }

        .results-summary p {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #2d3748;
        }

        .results-summary p strong {
            font-weight: 700;
        }

        /* Botón de reinicio final */
        .restart-button {
            display: block;
            width: fit-content;
            margin: 20px auto 0 auto;
            padding: 12px 30px;
            background-color: #48bb78;
            color: #ffffff;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .restart-button:hover {
            background-color: #38a169;
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
         <h1 style="color: #003366; font-family: 'Georgia', serif; font-size: 2rem; text-align: center; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);">COMANDOS DE WINDOWS</h1>

        <!-- Barra de progreso -->
        <div class="progress-bar-container">
            <div id="progressBar" class="progress-bar"></div>
        </div>

        <!-- Contenedor principal de las preguntas -->
        <div id="quizContainer">
            <!-- Las preguntas se cargarán dinámicamente aquí -->
        </div>

        <!-- Botones de navegación -->
        <div class="navigation-buttons">
            <button id="prevBtn" class="nav-button prev" disabled>Anterior</button>
            <button id="restartInlineBtn" class="nav-button restart-inline">Reiniciar Test</button>
            <button id="nextBtn" class="nav-button next">Siguiente</button>
        </div>

        <!-- Contenedor de la puntuación final -->
        <div id="finalScore" class="hidden">
            <div class="score-display"></div>
            <div class="results-summary">
                <p><strong>Preguntas Correctas:</strong> <span id="correctCount">0</span></p>
                <p><strong>Preguntas Incorrectas:</strong> <span id="incorrectCount">0</span></p>
                <p><strong>Preguntas Sin Contestar:</strong> <span id="unansweredCount">0</span></p>
            </div>
            <button id="restartBtn" class="restart-button">Reiniciar Test</button>
        </div>
    </div>

 <script>
    // Array de preguntas y respuestas
    const quizData = [
            {
                question: "¿Qué comando se utiliza para editar las directivas de grupo locales?",
                options: ["gpupdate", "gpresult", "gpedit.msc", "dsquery"],
                correctAnswer: "gpedit.msc"
            },
            {
                question: "¿Qué comando se utiliza para actualizar las políticas de grupo?",
                options: ["gpresult", "gpupdate", "dsquery", "net user"],
                correctAnswer: "gpupdate"
            },
            {
                question: "¿Qué comando lista los servidores en un dominio?",
                options: ["dsquery computer", "dsquery user", "dsquery server", "net view"],
                correctAnswer: "dsquery server"
            },
            {
                question: "¿Qué comando se usa para crear un nuevo usuario en el dominio?",
                options: ["net user /add", "dsadd user", "net localgroup /add", "dsmod user"],
                correctAnswer: "dsadd user"
            },
            {
                question: "¿Qué comando muestra los usuarios locales en un sistema?",
                options: ["net user", "whoami", "dsquery user", "net accounts"],
                correctAnswer: "net user"
            },
            {
                question: "¿Qué comando se utiliza para ver y cambiar las políticas de cuentas de usuario en una computadora local?",
                options: ["net user", "net accounts", "net config", "net view"],
                correctAnswer: "net accounts"
            },
            {
                question: "¿Qué comando se utiliza para añadir o borrar una máquina del dominio?",
                options: ["net computer", "net session", "net share", "net group"],
                correctAnswer: "net computer"
            },
            {
                question: "¿Qué comando se usa para listar los usuarios conectados a un servidor compartido?",
                options: ["net share", "net use", "net session", "net view"],
                correctAnswer: "net session"
            },
            {
                question: "¿Qué comando detiene el servicio de cola de impresión?",
                options: ["net start spooler", "net pause spooler", "net stop spooler", "net continue spooler"],
                correctAnswer: "net stop spooler"
            },
            {
                question: "¿Qué comando se utiliza para compartir un directorio, por ejemplo, 'c:\\Data' con el nombre público 'DataCompartido'?",
                options: ["net share DataCompartido=c:\\Data", "net use c:\\Data DataCompartido", "net group DataCompartido c:\\Data", "net view DataCompartido c:\\Data"],
                correctAnswer: "net share DataCompartido=c:\\Data"
            },
            {
                question: "¿Qué comando se usa para añadir un grupo local a la máquina?",
                options: ["net group", "net localgroup", "dsadd group", "net user group"],
                correctAnswer: "net localgroup"
            },
            {
                question: "¿Qué comando muestra la lista de máquinas del dominio actual?",
                options: ["net use", "net view", "net config", "net time"],
                correctAnswer: "net view"
            },
            {
                question: "¿Qué comando se utiliza para mapear una unidad de red?",
                options: ["net share", "net view", "net use", "net config"],
                correctAnswer: "net use"
            },
            {
                question: "¿Qué comando sincroniza la hora del equipo con la del dominio?",
                options: ["net time /set", "net config time", "net sync time", "net time /domain /set"],
                correctAnswer: "net time /domain /set"
            },
            {
                question: "¿Qué comando activa el firewall de Windows?",
                options: ["netsh firewall on", "netsh advfirewall set currentprofile state on", "netsh enable firewall", "netsh security firewall on"],
                correctAnswer: "netsh advfirewall set currentprofile state on"
            },
            {
                question: "¿Qué comando se utiliza para borrar la caché ARP?",
                options: ["ipconfig /flushdns", "netsh interface ip delete arpcache", "arp -d *", "netsh arp delete"],
                correctAnswer: "netsh interface ip delete arpcache"
            },
            {
                question: "¿Qué comando se usa para configurar una IP estática en una conexión de área local?",
                options: ["netsh interface ip set address name=\"Local Area Connection\" source=static", "ipconfig /static", "netsh ip static", "net config ip static"],
                correctAnswer: "netsh interface ip set address name=\"Local Area Connection\" source=static"
            },
            {
                question: "¿Qué comando realiza una copia de seguridad de la configuración de red?",
                options: ["netsh save", "netsh backup", "netsh dump", "netsh export"],
                correctAnswer: "netsh dump"
            },
            {
                question: "¿Qué comando se utiliza para copiar o hacer un backup de ficheros con opciones avanzadas?",
                options: ["copy", "xcopy", "robocopy", "move"],
                correctAnswer: "robocopy"
            },
            {
                question: "¿Qué comando muestra las entradas de la tabla ARP?",
                options: ["arp -a", "arp -show", "ipconfig /all", "netstat -r"],
                correctAnswer: "arp -a"
            },
            {
                question: "¿Qué comando borra la caché DNS?",
                options: ["ipconfig /renew", "ipconfig /release", "ipconfig /flushdns", "nslookup -clear"],
                correctAnswer: "ipconfig /flushdns"
            },
            {
                question: "¿Qué comando se utiliza para obtener la dirección física (MAC) de una interfaz de red?",
                options: ["ipconfig /all", "getmac", "netstat -e", "route print"],
                correctAnswer: "getmac"
            },
            {
                question: "¿Qué comando muestra la ruta que siguen los datagramas IP entre dos extremos?",
                options: ["ping", "netstat", "tracert", "ipconfig"],
                correctAnswer: "tracert"
            },
            {
                question: "¿Qué opción de `netstat` muestra el PID del proceso asociado a una conexión?",
                options: ["-a", "-p", "-r", "-o"],
                correctAnswer: "-o"
            },
            {
                question: "¿Qué comando se utiliza para la gestión de certificados digitales?",
                options: ["certmgr", "certutil", "cipher", "makecert"],
                correctAnswer: "certutil"
            },
            {
                question: "¿Qué comando muestra todos los certificados del almacén personal?",
                options: ["certutil -user -store MY", "certutil -listcerts", "certmgr.msc", "certutil -view"],
                correctAnswer: "certutil -user -store MY"
            },
            {
                question: "¿Qué comando se utiliza para la gestión de servicios (crear, iniciar, detener)?",
                options: ["services.msc", "tasklist", "sc", "net start"],
                correctAnswer: "sc"
            },
            {
                question: "¿Qué comando muestra información del usuario actual, incluyendo su SID?",
                options: ["whoami /user", "net user", "query user", "logoninfo"],
                correctAnswer: "whoami /user"
            },
            {
                question: "¿Qué herramienta se usa para la administración del fichero/base de datos del Active Directory (ntds.dit)?",
                options: ["dsmgmt", "adutil", "ntdsutil", "dsadmin"],
                correctAnswer: "ntdsutil"
            },
            {
                question: "¿Qué comando arranca el cliente de escritorio remoto?",
                options: ["remote.exe", "mstsc", "rdp", "connect-rdp"],
                correctAnswer: "mstsc"
            },
            {
                question: "¿Qué comando convierte un sistema de archivos de FAT16/32 a NTFS?",
                options: ["format", "diskpart", "convert", "chkdsk"],
                correctAnswer: "convert"
            },
            {
                question: "¿Qué comando se utiliza para la configuración de opciones de energía?",
                options: ["powercfg", "energycfg", "sleepcfg", "batterycfg"],
                correctAnswer: "powercfg"
            },
            {
                question: "¿Qué comando muestra la lista de tareas/procesos en ejecución?",
                options: ["taskmgr", "processlist", "tasklist", "get-process"],
                correctAnswer: "tasklist"
            },
            {
                question: "¿Qué comando abre la configuración del sistema?",
                options: ["sysconfig", "msconfig", "configsys", "systemctl"],
                correctAnswer: "msconfig"
            },
            {
                question: "¿Qué comando muestra información detallada del sistema?",
                options: ["systeminfo", "msinfo32", "dxdiag", "winver"],
                correctAnswer: "msinfo32"
            },
            {
                question: "¿Qué comando se utiliza para la gestión del arranque de Windows?",
                options: ["bootcfg", "bcdedit", "startupcfg", "bootrec"],
                correctAnswer: "bcdedit"
            },
            {
                question: "¿Qué comando permite ejecutar un comando como otro usuario?",
                options: ["runas", "sudo", "execas", "userun"],
                correctAnswer: "runas"
            },
            {
                question: "¿Qué comando se utiliza para enviar un mensaje a otro usuario en la red?",
                options: ["sendmsg", "write", "msg", "net send"],
                correctAnswer: "msg"
            },
            {
                question: "¿Qué comandos se utilizan para guardar y restaurar el directorio actual, generalmente en un script?",
                options: ["cd /save, cd /restore", "pushd, popd", "savepath, restorepath", "dirsave, dirrestore"],
                correctAnswer: "pushd, popd"
            },
            // Nuevas preguntas (61)
            {
                question: "¿Qué comando de 'dsquery' se usa para listar computadoras en el dominio?",
                options: ["dsquery user", "dsquery server", "dsquery computer", "dsquery group"],
                correctAnswer: "dsquery computer"
            },
            {
                question: "¿Cuál es el parámetro de 'gpresult' para ver los datos de resumen de RSoP?",
                options: ["/Z", "/H", "/R", "/V"],
                correctAnswer: "/R"
            },
            {
                question: "¿Qué parámetro de 'gpupdate' fuerza la actualización de las políticas de grupo?",
                options: ["/sync", "/refresh", "/force", "/apply"],
                correctAnswer: "/force"
            },
            {
                question: "¿Qué comando de 'dsquery' mostraría información de un usuario de dominio con 'samid' 'noma'?",
                options: ["dsquery user -name noma", "dsquery user -samid noma", "dsquery user -ou noma", "dsquery user -display noma"],
                correctAnswer: "dsquery user -samid noma"
            },
            {
                question: "¿Qué comando se utiliza para modificar un usuario de dominio, por ejemplo, cambiar la contraseña?",
                options: ["dsadd user", "dsmod user", "dsget user", "dsrm user"],
                correctAnswer: "dsmod user"
            },
            {
                question: "¿Qué comando se usa para dar de alta un equipo en el dominio en una OU específica?",
                options: ["dsadd user", "dsmod computer", "dsadd computer", "net computer /add"],
                correctAnswer: "dsadd computer"
            },
            {
                question: "¿Qué opción de 'net user' permite establecer si es obligatorio tener contraseña para una cuenta?",
                options: ["/passwordchg", "/expires", "/passwordreq", "/active"],
                correctAnswer: "/passwordreq"
            },
            {
                question: "¿Qué opción de 'net user' permite establecer si el usuario puede cambiar la contraseña?",
                options: ["/passwordreq", "/passwordchg", "/expires", "/active"],
                correctAnswer: "/passwordchg"
            },
            {
                question: "¿Qué comando se usa para borrar un usuario local?",
                options: ["net user [nombre] /delete", "net user delete", "del user", "remove user"],
                correctAnswer: "net user [nombre] /delete" 
            },
            {
                question: "¿Qué comando de 'net accounts' se utiliza para configurar la longitud mínima de la contraseña?",
                options: ["/MAXPWAGE", "/UNIQUEPW", "/MINPWLEN", "/PWLENGTH"],
                correctAnswer: "/MINPWLEN"
            },
            {
                question: "¿Qué comando de 'net accounts' se utiliza para configurar el número de contraseñas únicas cuando se cambia?",
                options: ["/MINPWLEN", "/MAXPWAGE", "/UNIQUEPW", "/PWCOUNT"],
                correctAnswer: "/UNIQUEPW"
            },
            {
                question: "¿Qué comando de 'net print' se usa para mostrar las colas de impresión compartidas?",
                options: ["net print /all", "net print \\\\equipo", "net print queues", "net print -s"],
                correctAnswer: "net print \\\\equipo"
            },
            {
                question: "¿Qué opción de 'net print' se utiliza para liberar un trabajo de impresión retenido?",
                options: ["/hold", "/delete", "/release", "/resume"],
                correctAnswer: "/release"
            },
            {
                question: "¿Qué comando de 'net share' se utiliza para borrar un recurso compartido?",
                options: ["/remove", "/delete", "/delshare", "/unshare"],
                correctAnswer: "/delete"
            },
            {
                question: "¿Qué comando se usa para añadir usuarios a un grupo de dominio, por ejemplo, 'pepe' y 'luis' al grupo 'desarrolladores'?",
                options: ["net group desarrolladores pepe luis /add", "net group desarrolladores add pepe luis", "net adduser desarrolladores pepe luis", "net localgroup desarrolladores pepe luis /add"],
                correctAnswer: "net group desarrolladores pepe luis /add" 
            },
            {
                question: "¿Qué opción de 'net view \\nombreEquipo' muestra todos los recursos compartidos de un equipo, incluyendo los ocultos?",
                options: ["/hidden", "/all", "/shares", "/verbose"],
                correctAnswer: "/all"
            },
            {
                question: "¿Qué opción de 'net use' asegura que el mapeo de unidad se realice en cada inicio de sesión?",
                options: ["/connect", "/auto", "/persistent:yes", "/remember"],
                correctAnswer: "/persistent:yes"
            },
            {
                question: "¿Qué comando de 'net config server' cierra las sesiones inactivas después de un cierto número de minutos?",
                options: ["/timeout", "/disconnect", "/autologoff", "/autodisconnect:minutos"],
                correctAnswer: "/autodisconnect:minutos"
            },
            {
                question: "¿Qué comando de 'net time' sincroniza la hora del equipo con la de un servidor de tiempos específico?",
                options: ["net time /set", "net time /sync", "net time /rstdomain[:dominio] /set", "net time /server"],
                correctAnswer: "net time /rstdomain[:dominio] /set"
            },
            {
                question: "¿Qué comando de 'netsh advfirewall' añade una regla para permitir el tráfico entrante en el puerto 80 TCP?",
                options: ["netsh advfirewall add rule port=80", "netsh advfirewall firewall add rule name=\"Open Port 80\" dir=in action=allow protocol=TCP localport=80", "netsh firewall allow port 80", "netsh rule add port 80"],
                correctAnswer: "netsh advfirewall firewall add rule name=\"Open Port 80\" dir=in action=allow protocol=TCP localport=80"
            },
            {
                question: "¿Qué comando de 'netsh advfirewall' activa el servicio de Escritorio Remoto (RDP)?",
                options: ["netsh advfirewall enable rdp", "netsh advfirewall firewall set rule group=\"remote desktop\" new enable=Yes", "netsh rdp enable", "netsh advfirewall allow rdp"],
                correctAnswer: "netsh advfirewall firewall set rule group=\"remote desktop\" new enable=Yes"
            },
            {
                question: "¿Qué comando de 'netsh interface ip' muestra la configuración TCP/IP de las interfaces?",
                options: ["netsh ip show", "netsh interface ip show config", "netsh config ip", "netsh show ip"],
                correctAnswer: "netsh interface ip show config"
            },
            {
                question: "¿Qué comando de 'netsh interface ip' configura una interfaz para obtener una dirección IP dinámicamente (DHCP)?",
                options: ["netsh interface ip set address name=\"Local Area Connection\" source=dhcp", "netsh ip dhcp", "netsh interface ip get dhcp", "netsh dhcp enable"],
                correctAnswer: "netsh interface ip set address name=\"Local Area Connection\" source=dhcp"
            },
            {
                question: "¿Qué comando de 'netsh interface ip' añade un servidor DNS a una conexión?",
                options: ["netsh interface ip add dnsservers \"Local Area Connection\" 10.0.0.1", "netsh ip add dns", "netsh dns add", "netsh config dns"],
                correctAnswer: "netsh interface ip add dnsservers \"Local Area Connection\" 10.0.0.1"
            },
            {
                question: "¿Qué comando de 'netsh' se utiliza para trabajar contra un servidor remoto específico?",
                options: ["netsh remote", "netsh connect", "netsh set machine servidorNominas", "netsh target"],
                correctAnswer: "netsh set machine servidorNominas"
            },
            {
                question: "¿Qué comando de 'netsh wlan' se utiliza para bloquear una red Wi-Fi por su SSID?",
                options: ["netsh wlan block ssid", "netsh wlan add filter permission=block ssid=\"WLAN name\" networktype=infrastructure", "netsh wlan disable ssid", "netsh wlan restrict"],
                correctAnswer: "netsh wlan add filter permission=block ssid=\"WLAN name\" networktype=infrastructure"
            },
            {
                question: "¿Qué comando de 'netsh http' se usa para publicar una nueva IP de escucha?",
                options: ["netsh http listen", "netsh http add iplisten address=1.1.1.1", "netsh http set ip", "netsh http bind ip"],
                correctAnswer: "netsh http add iplisten address=1.1.1.1"
            },
            {
                question: "¿Qué comando de 'netsh' se utiliza para restaurar una configuración de red guardada en un archivo de texto copia_configuracion.txt?",
                options: ["netsh import", "netsh load", "netsh restore", "netsh exec"],
                correctAnswer: "netsh exec"
            },
            {
                question: "¿Qué opción de 'robocopy' se utiliza para copiar subcarpetas, incluso si están vacías?",
                options: ["/S", "/E", "/MIR", "/MOV"],
                correctAnswer: "/E"
            },
            {
                question: "¿Qué opción de 'robocopy' realiza una copia en modo espejo, eliminando archivos en el destino que ya no existen en el origen?",
                options: ["/S", "/E", "/MIR", "/MOV"],
                correctAnswer: "/MIR"
            },
            {
                question: "¿Qué opción de 'robocopy' simula la operación de copia sin realizar cambios reales?",
                options: ["/D", "/T", "/L", "/S"],
                correctAnswer: "/L"
            },
            {
                question: "¿Qué opción de 'robocopy' se utiliza para copiar archivos de un determinado tamaño, por ejemplo, mayores a X bytes?",
                options: ["/SIZE", "/MAX:bytes", "/MIN:bytes", "/BYTES"],
                correctAnswer: "/MIN:bytes"
            },
            {
                question: "¿Qué opción de 'robocopy' conserva los permisos de los archivos copiados?",
                options: ["/PERM", "/ACL", "/SEC", "/COPYALL"],
                correctAnswer: "/SEC"
            },
            {
                question: "¿Qué comando de 'arp' se utiliza para eliminar una entrada específica de la tabla ARP?",
                options: ["arp -a", "arp -delete", "arp -d direccion_ip", "arp -r"],
                correctAnswer: "arp -d direccion_ip"
            },
            {
                question: "¿Qué comando de 'arp' se utiliza para agregar una entrada estática a la tabla ARP?",
                options: ["arp -a", "arp -add", "arp -s direccion_ip direccion_mac", "arp -set"],
                correctAnswer: "arp -s direccion_ip direccion_mac"
            },
            {
                question: "¿Qué comando de 'ipconfig' muestra las resoluciones DNS de la caché?",
                options: ["ipconfig /all", "ipconfig /dns", "ipconfig /displaydns", "ipconfig /showdns"],
                correctAnswer: "ipconfig /displaydns"
            },
            {
                question: "¿Qué comando de 'ipconfig' renueva la dirección IP de las interfaces?",
                options: ["ipconfig /release", "ipconfig /renew", "ipconfig /refresh", "ipconfig /getnew"],
                correctAnswer: "ipconfig /renew"
            },
            {
                question: "¿Qué comando de 'route' se utiliza para mostrar la tabla de enrutamiento?",
                options: ["route show", "route display", "route print", "route list"],
                correctAnswer: "route print"
            },
            {
                question: "¿Qué opción de 'tracert' evita la conversión de direcciones IP a nombres de host?",
                options: ["-h", "-w", "-d", "-n"],
                correctAnswer: "-d"
            },
            {
                question: "¿Qué opción de 'tracert' especifica el número máximo de saltos en la búsqueda del objetivo?",
                options: ["-w", "-h", "-j", "-r"],
                correctAnswer: "-h"
            },
            {
                question: "¿Qué opción de 'tracert' establece el tiempo de espera en milisegundos para cada respuesta?",
                options: ["-t", "-s", "-w", "-timeout"],
                correctAnswer: "-w"
            },
            {
                question: "¿Qué opción de 'netstat' muestra todas las conexiones y puertos de escucha?",
                options: ["-n", "-o", "-p", "-a"],
                correctAnswer: "-a"
            },
            {
                question: "¿Qué opción de 'netstat' muestra los puertos y las direcciones en formato numérico?",
                options: ["-a", "-o", "-n", "-p"],
                correctAnswer: "-n"
            },
            {
                question: "¿Qué comando de 'nslookup' se utiliza para consultar registros de tipo TXT?",
                options: ["nslookup -type=TXT", "nslookup -query=TXT", "nslookup -TXT", "nslookup -q=TXT"],
                correctAnswer: "nslookup -type=TXT"
            },
            {
                question: "¿Qué comando de 'certutil' se utiliza para importar un certificado PFX?",
                options: ["certutil -import", "certutil -p MyPassword -importpfx MyCert.pfx", "certutil -addpfx", "certutil -installpfx"],
                correctAnswer: "certutil -p MyPassword -importpfx MyCert.pfx"
            },
            {
                question: "¿Qué comando de 'sc' se utiliza para crear un nuevo servicio?",
                options: ["sc new", "sc add", "sc create", "sc install"],
                correctAnswer: "sc create"
            },
            {
                question: "¿Qué opción de 'whoami' muestra los grupos a los que pertenece el usuario actual?",
                options: ["/user", "/priv", "/groups", "/membership"],
                correctAnswer: "/groups"
            },
            {
                question: "¿Qué opción de 'whoami' muestra los privilegios de seguridad del usuario actual?",
                options: ["/user", "/groups", "/priv", "/rights"],
                correctAnswer: "/priv"
            },
            {
                question: "¿Qué comando de 'dsquery' se usa para listar usuarios en el dominio?",
                options: ["dsquery computer", "dsquery user", "dsquery server", "dsquery group"],
                correctAnswer: "dsquery user"
            },
            {
                question: "¿Qué comando de 'dsquery' se usa para listar grupos en el dominio?",
                options: ["dsquery computer", "dsquery user", "dsquery server", "dsquery group"],
                correctAnswer: "dsquery group"
            },
            {
                question: "¿Qué comando de 'dsget' se usa para mostrar las propiedades de los equipos en el directorio?",
                options: ["dsget user", "dsget server", "dsget computer", "dsget group"],
                correctAnswer: "dsget computer"
            },
            {
                question: "¿Qué comando de 'dsget' se usa para mostrar las propiedades de los usuarios en el directorio?",
                options: ["dsget user", "dsget server", "dsget computer", "dsget group"],
                correctAnswer: "dsget user"
            },
            {
                question: "¿Qué comando de 'dsget' se usa para mostrar las propiedades de los grupos en el directorio?",
                options: ["dsget user", "dsget server", "dsget computer", "dsget group"],
                correctAnswer: "dsget group"
            },
            {
                question: "¿Qué comando de 'dsadd' se usa para crear y añadir un grupo?",
                options: ["dsadd user", "dsadd computer", "dsadd group", "dsadd ou"],
                correctAnswer: "dsadd group"
            },
            {
                question: "¿Qué comando de 'dsmod' se usa para modificar las propiedades de un grupo?",
                options: ["dsmod user", "dsmod computer", "dsmod group", "dsmod ou"],
                correctAnswer: "dsmod group"
            },
            {
                question: "¿Qué comando de 'dsrm' se usa para eliminar un objeto del directorio?",
                options: ["dsrm user", "dsrm computer", "dsrm group", "dsrm"],
                correctAnswer: "dsrm"
            },
            {
                question: "¿Qué comando se usa para ver la ayuda de las opciones de 'gpresult'?",
                options: ["gpresult -help", "gpresult /?", "gpresult help", "gpresult -h"],
                correctAnswer: "gpresult /?"
            },
            {
                question: "¿Qué comando de 'net user' se usa para cambiar la contraseña de un usuario local sin especificarla directamente en la línea de comando?",
                options: ["net user [nombre] /change", "net user [nombre] *", "net user [nombre] /password", "net user [nombre] /setpw"],
                correctAnswer: "net user [nombre] *" 
            },
            {
                question: "¿Qué opción de 'net user' permite controlar los momentos en los que un usuario puede usar la computadora o hacer login?",
                options: ["/logontimes", "/hours", "/times", "/schedule"],
                correctAnswer: "/times"
            },
            {
                question: "¿Qué opción de 'net user' permite especificar la lista de equipos desde donde un usuario puede hacer login?",
                options: ["/computers", "/machines", "/workstations", "/devices"],
                correctAnswer: "/workstations"
            },
            {
                question: "¿Qué comando de 'net print' se usa para retener un trabajo de impresión?",
                options: ["net print /pause", "net print /stop", "net print /hold", "net print /delay"],
                correctAnswer: "net print /hold"
            },
            {
                question: "¿Qué comando de 'net share' se usa para limitar el número máximo de usuarios simultáneos en un recurso compartido?",
                options: ["/maxusers", "/limit", "/users:", "/connections"],
                correctAnswer: "/users:"
            },
            {
                question: "¿Qué comando de 'net group' se usa para añadir usuarios a un grupo de dominio?",
                options: ["net group [nombre_grupo] [usuario] /add", "net group desarrolladores add pepe luis", "net adduser desarrolladores pepe luis", "net localgroup desarrolladores pepe luis /add"],
                correctAnswer: "net group [nombre_grupo] [usuario] /add" 
            },
            {
                question: "¿Qué comando de 'net localgroup' se usa para añadir usuarios a un grupo local?",
                options: ["net localgroup [nombre_grupo] [usuario] /add", "net localgroup [nombre_grupo] add [usuario]", "net adduserlocal [usuario] [nombre_grupo]", "net localgroup [nombre_grupo] /adduser [usuario]"],
                correctAnswer: "net localgroup [nombre_grupo] [usuario] /add" 
            },
            {
                question: "¿Qué comando de 'net view' se usa para ver las máquinas de un dominio específico?",
                options: ["net view /domain:[dominio]", "net view -d [dominio]", "net view [dominio]", "net view --domain [dominio]"],
                correctAnswer: "net view /domain:[dominio]" 
            },
            {
                question: "¿Qué comando de 'net use' se usa para mapear una unidad de red con credenciales específicas?",
                options: ["net use /credentials", "net use /auth", "net use /user:usuario password", "net use /login"],
                correctAnswer: "net use /user:usuario password"
            },
            {
                question: "¿Qué comando de 'netsh http' se usa para asociar un certificado SSL con una IP y puerto específicos?",
                options: ["netsh http add ssl", "netsh http bind ssl", "netsh http add sslcert ipport=1.1.1.1:443 certhash=0102030405060708090A0B0C0D0E0F1011121314 appid={00112233-4455-6677-8899-AABBCCDDEEFF}", "netsh http set ssl"],
                correctAnswer: "netsh http add sslcert ipport=1.1.1.1:443 certhash=0102030405060708090A0B0C0D0E0F1011121314 appid={00112233-4455-6677-8899-AABBCCDDEEFF}"
            },
            {
                question: "¿Qué comando de 'netsh' se usa para hacer una copia de seguridad de la configuración de red en un archivo de texto?",
                options: ["netsh save > file.txt", "netsh backup > file.txt", "netsh dump > copia_configuracion.txt", "netsh export > file.txt"],
                correctAnswer: "netsh dump > copia_configuracion.txt"
            },
            {
                question: "¿Qué opción de 'robocopy' se usa para mover archivos y eliminarlos del origen después de ser copiados?",
                options: ["/COPY", "/MOVE", "/MOV", "/TRANSFER"],
                correctAnswer: "/MOV"
            },
            {
                question: "¿Qué opción de 'robocopy' se usa para mover archivos y carpetas y eliminarlos del origen después de ser copiados?",
                options: ["/COPY", "/MOVE", "/MOV", "/TRANSFER"],
                correctAnswer: "/MOVE"
            },
            {
                question: "¿Qué opción de 'robocopy' se usa para copiar archivos que son más nuevos que una determinada antigüedad (días)?",
                options: ["/NEWER", "/AGE", "/MAXAGE:dias", "/MINAGE:dias"],
                correctAnswer: "/MINAGE:dias"
            },
            {
                question: "¿Qué opción de 'robocopy' se usa para copiar archivos que son más antiguos que una determinada antigüedad (días)?",
                options: ["/OLDER", "/AGE", "/MAXAGE:dias", "/MINAGE-.dias"],
                correctAnswer: "/MAXAGE:dias"
            },
            {
                question: "¿Qué opción de 'robocopy' permite que la operación de copia sea reiniciable en caso de interrupción?",
                options: ["/RESUME", "/RESTART", "/Z", "/CONTINUE"],
                correctAnswer: "/Z"
            },
            {
                question: "¿Qué opción de 'robocopy' se usa para excluir archivos que coinciden con un patrón específico?",
                options: ["/EXCLUDE", "/SKIP", "/XF", "/IGNORE"],
                correctAnswer: "/XF"
            },
            {
                question: "¿Qué comando de 'arp' se usa para eliminar todas las entradas de la tabla ARP?",
                options: ["arp -d all", "arp -d *", "arp -clear", "arp -flush"],
                correctAnswer: "arp -d *"
            },
            {
                question: "¿Qué comando de 'ipconfig' se usa para liberar las conexiones de red (desactivar DHCP)?",
                options: ["ipconfig /renew", "ipconfig /release", "ipconfig /disconnect", "ipconfig /down"],
                correctAnswer: "ipconfig /release"
            },
            {
                question: "¿Qué opción de 'tracert' fuerza el uso de IPv4?",
                options: ["-v4", "-ipv4", "-4", "-ip4"],
                correctAnswer: "-4"
            },
            {
                question: "¿Qué opción de 'tracert' fuerza el uso de IPv6?",
                options: ["-v6", "-ipv6", "-6", "-ip6"],
                correctAnswer: "-6"
            },
            {
                question: "¿Qué comando es similar a 'tracert' pero también calcula estadísticas de pérdida y latencia?",
                options: ["ping", "netstat", "pathping", "route"],
                correctAnswer: "pathping"
            },
            {
                question: "¿Qué opción de 'netstat' filtra las conexiones por protocolo (TCP, UDP)?",
                options: ["-a", "-o", "-n", "-p protocolo"],
                correctAnswer: "-p protocolo"
            },
            {
                question: "¿Qué opción de 'netstat' muestra el contenido de la tabla de rutas?",
                options: ["-a", "-o", "-n", "-r"],
                correctAnswer: "-r"
            },
            {
                question: "¿Qué comando de 'certutil' se usa para importar una Autoridad de Certificación (CA) al almacén raíz?",
                options: ["certutil -add CA", "certutil -addstore Root MyCert.cer", "certutil -import Root", "certutil -install CA"],
                correctAnswer: "certutil -addstore Root MyCert.cer"
            },
            {
                question: "¿Qué comando de 'sc' se usa para detener un servicio?",
                options: ["sc stop [nombreDelServicio]", "sc end [nombreDelServicio]", "sc terminate [nombreDelServicio]", "sc close [nombreDelServicio]"],
                correctAnswer: "sc stop [nombreDelServicio]" 
            },
            {
                question: "¿Qué comando de 'sc' se usa para eliminar un servicio?",
                options: ["sc remove [nombreDelServicio]", "sc delete [nombreDelServicio]", "sc uninstall [nombreDelServicio]", "sc clear [nombreDelServicio]"],
                correctAnswer: "sc delete [nombreDelServicio]" 
            },
            {
                question: "¿Qué comando de 'sc' se usa para iniciar un servicio?",
                options: ["sc start [nombreDelServicio]", "sc run [nombreDelServicio]", "sc activate [nombreDelServicio]", "sc enable [nombreDelServicio]"],
                correctAnswer: "sc start [nombreDelServicio]" 
            },
            {
                question: "¿Qué comando de 'whoami' muestra el nombre de usuario y el SID?",
                options: ["whoami /sid", "whoami /user", "whoami /info", "whoami /id"],
                correctAnswer: "whoami /user"
            },
            {
                question: "¿Qué comando se usa para convertir un volumen de FAT a NTFS, especificando que se ejecutará en modo detallado?",
                options: ["convert [volumen] /FS:NTFS /V", "convert [volumen] /toNTFS /verbose", "convert [volumen] /detailed", "convert [volumen] /NTFS /log"],
                correctAnswer: "convert [volumen] /FS:NTFS /V"
            },
            {
                question: "¿Qué comando de 'powercfg' se usa para enumerar todos los planes de energía?",
                options: ["powercfg /list", "powercfg /show", "powercfg /plans", "powercfg /R"],
                correctAnswer: "powercfg /list"
            },
            {
                question: "¿Qué comando de 'powercfg' se usa para mostrar el contenido de un plan de energía específico?",
                options: ["powercfg /query", "powercfg /display", "powercfg /info", "powercfg /Q"],
                correctAnswer: "powercfg /Q"
            },
            {
                question: "¿Qué comando de 'msconfig' permite cargar solo los servicios y controladores de dispositivo básicos al iniciar Windows?",
                options: ["Inicio normal", "Inicio selectivo", "Inicio con diagnóstico", "Modo seguro"],
                correctAnswer: "Inicio con diagnóstico"
            },
            {
                question: "¿Qué comando de 'msinfo32' muestra el nombre del sistema operativo y su versión?",
                options: ["systeminfo", "msinfo32", "winver", "get-osinfo"],
                correctAnswer: "msinfo32"
            },
            {
                question: "¿Qué comando de 'bcdedit' se usa para mostrar la configuración actual del gestor de arranque de Windows?",
                options: ["bcdedit /display", "bcdedit /show", "bcdedit /enum", "bcdedit"],
                correctAnswer: "bcdedit"
            },
            {
                question: "¿Qué comando de 'runas' se usa para especificar que el comando se ejecutará solo en la red?",
                options: ["/network", "/netonly", "/remote", "/online"],
                correctAnswer: "/netonly"
            },
            {
                question: "¿Qué comando de 'runas' se usa para especificar que el perfil del usuario no debe cargarse?",
                options: ["/noprofile", "/temp", "/guest", "/light"],
                correctAnswer: "/noprofile"
            },
            {
                question: "¿Qué comando de 'msg' se usa para enviar un mensaje a una sesión específica?",
                options: ["msg [usuario] [sesión]", "msg /session:[sesión] [usuario]", "msg [usuario] /s:[sesión]", "msg [nombre_de_usuario_o_sesion_id]"],
                correctAnswer: "msg [nombre_de_usuario_o_sesion_id]"
            }
        ];

     
                // Variables de estado del quiz
        let currentQuestionIndex = 0;
        let score = 0;
        // userAnswers guarda el texto de la opción seleccionada (o null)
        // Corregido: Usar quizData.length en lugar de questions.length
        const userAnswers = new Array(quizData.length).fill(null);
        // scoredQuestions guarda true si la pregunta fue respondida correctamente, false si fue incorrecta o no respondida
        // Corregido: Usar quizData.length en lugar de questions.length
        const scoredQuestions = new Array(quizData.length).fill(false); 

        // Referencias a los elementos del DOM
        const quizContainer = document.getElementById('quizContainer');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const restartBtn = document.getElementById('restartBtn');
        const restartInlineBtn = document.getElementById('restartInlineBtn');
        const finalScoreDiv = document.getElementById('finalScore');
        const progressBar = document.getElementById('progressBar');
        const finalScoreDisplay = finalScoreDiv.querySelector('.score-display');
        const correctCountSpan = document.getElementById('correctCount');
        const incorrectCountSpan = document.getElementById('incorrectCount');
        const unansweredCountSpan = document.getElementById('unansweredCount');

        /**
         * Carga el estado del quiz guardado en localStorage.
         * Si no existe, inicializa un nuevo estado.
         */
        function loadQuizState() {
            try {
                const savedState = JSON.parse(localStorage.getItem('quizState'));
                if (savedState) {
                    currentQuestionIndex = savedState.currentQuestionIndex;
                    score = savedState.score;
                    // Asegurarse de que los arrays tengan el tamaño correcto y copiar los valores
                    userAnswers.splice(0, savedState.userAnswers.length, ...savedState.userAnswers);
                    scoredQuestions.splice(0, savedState.scoredQuestions.length, ...savedState.scoredQuestions);
                }
            } catch (e) {
                console.error("Error al cargar el estado del quiz:", e);
                // Si hay un error, el estado se reiniciará a los valores por defecto
            }
        }

        /**
         * Guarda el estado actual del quiz en localStorage.
         */
        function saveQuizState() {
            const quizState = {
                currentQuestionIndex: currentQuestionIndex,
                score: score,
                userAnswers: userAnswers,
                scoredQuestions: scoredQuestions
            };
            localStorage.setItem('quizState', JSON.stringify(quizState));
        }

        /**
         * Carga y muestra la pregunta actual.
         */
        function loadQuestion() {
            // Corregido: Usar quizData.length en lugar de questions.length
            if (currentQuestionIndex >= quizData.length) {
                showResults();
                return;
            }

            // Corregido: Usar quizData en lugar de questions
            const currentQuestion = quizData[currentQuestionIndex];
            quizContainer.innerHTML = `
                <div class="question-card">
                    <p class="question-text"></p>
                    <div class="options-container">
                        ${currentQuestion.options.map(() => `
                            <button class="option-button"></button>
                        `).join('')}
                    </div>
                    <div class="solution hidden">
                        <strong>Solución:</strong> <span class="solution-text"></span>
                    </div>
                </div>
            `;

            const questionTextElement = quizContainer.querySelector('.question-text');
            const optionsContainer = quizContainer.querySelector('.options-container');
            const questionCard = quizContainer.querySelector('.question-card');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');

            // Usar textContent para insertar el texto de la pregunta de forma segura
            questionTextElement.textContent = `${currentQuestionIndex + 1}. ${currentQuestion.question}`;

            // Asignar el texto y los atributos data-option a cada botón de opción
            currentQuestion.options.forEach((option, index) => {
                optionButtons[index].textContent = option; // Inserta el texto como texto plano
                optionButtons[index].dataset.option = option; // Guarda la opción original para la lógica
                optionButtons[index].addEventListener('click', handleOptionClick);
            });

            // Resalta la respuesta del usuario si ya ha respondido y aplica estilos
            const savedAnswer = userAnswers[currentQuestionIndex];
            if (savedAnswer !== null) {
                // Encuentra el botón por su atributo data-option, que contiene la respuesta guardada
                const selectedButton = optionsContainer.querySelector(`[data-option="${savedAnswer}"]`);
                if (selectedButton) {
                    // Deshabilita todos los botones para que no se pueda cambiar la respuesta
                    optionButtons.forEach(button => {
                        button.classList.add('disabled');
                        button.removeEventListener('click', handleOptionClick); // Remover listener si ya está respondida
                    });

                    // Aplica los estilos de la respuesta guardada
                    const isCorrect = (savedAnswer === currentQuestion.correctAnswer);
                    if (isCorrect) {
                        selectedButton.classList.add('correct-answer');
                        questionCard.classList.add('correct');
                    } else {
                        selectedButton.classList.add('incorrect-answer');
                        questionCard.classList.add('incorrect');
                        // Muestra la respuesta correcta si la guardada fue incorrecta
                        const correctButton = optionsContainer.querySelector(`[data-option="${currentQuestion.correctAnswer}"]`);
                        if (correctButton) {
                            correctButton.classList.add('correct-answer');
                        }
                    }
                    // Añadir feedback visual (Correcto/Incorrecto)
                    updateQuestionCardVisuals(isCorrect);
                }
            }

            // Actualiza el estado de los botones de navegación y la barra de progreso
            updateNavButtons();
            updateProgressBar();
        }

        /**
         * Maneja el evento de clic en una opción de respuesta.
         * @param {Event} event - El evento de clic.
         */
        function handleOptionClick(event) {
            const selectedOptionButton = event.target;
            const selectedOption = selectedOptionButton.dataset.option; // Obtiene la opción del atributo data-option
            // Corregido: Usar quizData en lugar de questions
            const currentQuestion = quizData[currentQuestionIndex];
            const optionsContainer = quizContainer.querySelector('.options-container');
            const questionCard = quizContainer.querySelector('.question-card');

            // Deshabilita todos los botones de opción para evitar múltiples respuestas
            optionsContainer.querySelectorAll('.option-button').forEach(button => {
                button.classList.add('disabled');
                button.removeEventListener('click', handleOptionClick);
            });

            // Actualiza la respuesta del usuario y la guarda
            userAnswers[currentQuestionIndex] = selectedOption;
            
            // Comprueba si la respuesta es correcta
            const isCorrectAttempt = (selectedOption === currentQuestion.correctAnswer);

            if (isCorrectAttempt) {
                selectedOptionButton.classList.add('correct-answer');
                questionCard.classList.add('correct');
                // Si no se ha puntuado antes, añade un punto y marca como correcta
                if (!scoredQuestions[currentQuestionIndex]) { // scoredQuestions[index] will be false if not yet scored
                    score++;
                    scoredQuestions[currentQuestionIndex] = true; // Marca como correcta
                }
            } else {
                selectedOptionButton.classList.add('incorrect-answer');
                questionCard.classList.add('incorrect');
                // Si se había puntuado como correcta (porque el usuario cambió de opinión), quita el punto
                if (scoredQuestions[currentQuestionIndex]) { // scoredQuestions[index] will be true if it was previously correct
                    score--;
                    scoredQuestions[currentQuestionIndex] = false; // Marca como incorrecta
                }
                // Resalta la respuesta correcta
                const correctAnswerButton = optionsContainer.querySelector(`[data-option="${currentQuestion.correctAnswer}"]`);
                if (correctAnswerButton) {
                    correctAnswerButton.classList.add('correct-answer');
                }
            }
            
            saveQuizState(); // Guarda el estado después de actualizar score y scoredQuestions

            // Añadir feedback visual (Correcto/Incorrecto)
            updateQuestionCardVisuals(isCorrectAttempt);

            // Muestra la solución detallada si existe (aunque no hay en tu questions actual)
            if (currentQuestion.solution) {
                const solutionDiv = quizContainer.querySelector('.solution');
                solutionDiv.classList.remove('hidden');
                solutionDiv.querySelector('.solution-text').textContent = currentQuestion.solution;
            }
        }

        /**
         * Actualiza el estilo de la tarjeta de pregunta y añade feedback visual.
         * @param {boolean} isCorrect - Indica si la respuesta es correcta.
         */
        function updateQuestionCardVisuals(isCorrect) {
            const questionCard = document.querySelector('.question-card');
            // Eliminar feedback anterior si existe
            const existingFeedback = questionCard.querySelector('.feedback');
            if (existingFeedback) {
                existingFeedback.remove();
            }

            const feedbackMessage = document.createElement('p');
            feedbackMessage.classList.add('feedback');

            if (isCorrect) {
                feedbackMessage.textContent = '¡Correcto!';
                feedbackMessage.classList.add('correct');
            } else {
                feedbackMessage.textContent = 'Incorrecto. La respuesta correcta es la marcada en verde.';
                feedbackMessage.classList.add('incorrect');
            }
            questionCard.appendChild(feedbackMessage);
        }

        /**
         * Muestra los resultados finales del quiz.
         */
        function showResults() {
            quizContainer.classList.add('hidden');
            prevBtn.classList.add('hidden');
            nextBtn.classList.add('hidden');
            restartInlineBtn.classList.add('hidden');
            progressBar.parentElement.classList.add('hidden');
            finalScoreDiv.classList.remove('hidden');

            // Calcula y muestra las estadísticas
            const correctAnswers = scoredQuestions.filter(isCorrect => isCorrect).length;
            // Una respuesta es incorrecta si el usuario respondió (no es null) Y no fue marcada como correcta (scoredQuestions[index] es false)
            const incorrectAnswers = userAnswers.filter((answer, index) => answer !== null && !scoredQuestions[index]).length;
            const unansweredQuestions = userAnswers.filter(answer => answer === null).length;

            // Corregido: Usar quizData.length en lugar de questions.length
            finalScoreDisplay.textContent = `Tu puntuación final es ${correctAnswers} de ${quizData.length}`;
            correctCountSpan.textContent = correctAnswers;
            incorrectCountSpan.textContent = incorrectAnswers;
            unansweredCountSpan.textContent = unansweredQuestions;
        }
		
        /**
         * Actualiza el estado de los botones de navegación.
         */
        function updateNavButtons() {
            prevBtn.disabled = currentQuestionIndex === 0;
            // Corregido: Usar quizData.length en lugar de questions.length
            nextBtn.textContent = currentQuestionIndex === quizData.length - 1 ? 'Finalizar' : 'Siguiente';
        }

        /**
         * Actualiza la barra de progreso.
         */
        function updateProgressBar() {
            // Corregido: Usar quizData.length en lugar de questions.length
            const progress = ((currentQuestionIndex + 1) / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        /**
         * Reinicia el quiz a su estado inicial.
         */
        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers.fill(null);
            scoredQuestions.fill(false);
            localStorage.clear(); // Limpia el localStorage
            
            quizContainer.classList.remove('hidden');
            prevBtn.classList.remove('hidden');
            nextBtn.classList.remove('hidden');
            restartInlineBtn.classList.remove('hidden');
            progressBar.parentElement.classList.remove('hidden');
            finalScoreDiv.classList.add('hidden');
            loadQuestion();
        }

        // Event listeners
        prevBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        });

        nextBtn.addEventListener('click', () => {
            // Corregido: Usar quizData.length en lugar de questions.length
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                showResults();
            }
        });

        restartBtn.addEventListener('click', restartQuiz);
        restartInlineBtn.addEventListener('click', restartQuiz);

        // Carga inicial
        window.onload = function() {
            loadQuizState();
            loadQuestion();
        };
    </script>
</body>
</html>
