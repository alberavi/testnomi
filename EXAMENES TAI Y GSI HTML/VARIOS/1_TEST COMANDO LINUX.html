<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COMANDOS LINUX - Test Interactivo</title>
    <!-- Enlace a Tailwind CSS para las clases de la estructura HTML -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS para el estilo del quiz -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Color de fondo claro */
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            background-color: #ffffff; /* Fondo blanco para el contenedor */
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 30px;
            max-width: 800px;
            width: 100%;
            margin: auto;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 700;
            color: #1a202c; /* Título oscuro */
        }

        .header p {
            font-size: 1rem;
            color: #4a5568; /* Subtítulo gris */
            margin-top: 5px;
        }

        .question-box {
            background-color: #f7fafc; /* Fondo de la pregunta */
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e2e8f0;
        }

        .question-box p {
            font-size: 1.125rem;
            font-weight: 600;
            color: #2d3748;
        }

        .options-list {
            margin-top: 15px;
        }

        .option-button {
            display: block;
            width: 100%;
            text-align: left;
            padding: 12px 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid #cbd5e0;
            background-color: #fff;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            font-size: 1rem;
            color: #4a5568;
        }
        
        /* Estilos de los botones para estados */
        .option-button:hover:not([disabled]) {
            background-color: #e2e8f0;
            transform: translateY(-2px);
        }

        .option-button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .option-button.correct {
            background-color: #c6f6d5; /* Verde claro */
            border-color: #38a169; /* Verde más oscuro */
            color: #276749;
            font-weight: 600;
        }

        .option-button.incorrect {
            background-color: #fed7d7; /* Rojo claro */
            border-color: #e53e3e; /* Rojo más oscuro */
            color: #9b2c2c;
            font-weight: 600;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .nav-button {
            background-color: #4299e1; /* Azul principal */
            color: #ffffff;
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 8px;
            transition: background-color 0.2s;
        }

        .nav-button:hover:not([disabled]) {
            background-color: #3182ce;
        }

        .nav-button:disabled {
            background-color: #a0aec0;
            cursor: not-allowed;
        }
        
        .progress-bar {
            background-color: #e2e8f0;
            border-radius: 9999px;
            height: 8px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress {
            background-color: #4299e1;
            height: 100%;
            transition: width 0.3s ease;
        }

        .results {
            text-align: center;
            padding: 30px;
            background-color: #f7fafc;
            border-radius: 15px;
            border: 1px solid #e2e8f0;
        }

        .results h2 {
            font-size: 2rem;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 10px;
        }

        .results p {
            font-size: 1.25rem;
            color: #4a5568;
            margin-bottom: 20px;
        }

        .result-stats p {
            font-size: 1rem;
            margin-top: 5px;
            color: #4a5568;
        }
        
        .correct-stat {
            color: #38a169;
            font-weight: 600;
        }

        .incorrect-stat {
            color: #e53e3e;
            font-weight: 600;
        }

        .unanswered-stat {
            color: #4a5568;
            font-weight: 600;
        }

        .restart-button {
            background-color: #48bb78; /* Verde para reiniciar */
            color: #ffffff;
            font-weight: 600;
            padding: 12px 24px;
            border-radius: 9999px;
            transition: background-color 0.2s;
            margin-top: 20px;
        }

        .restart-button:hover {
            background-color: #38a169;
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container" id="quizContainer">
        <div class="header">
            <h1 id="quiz-title">Test de Comandos Linux</h1>
            <p id="quiz-subtitle">Pon a prueba tus conocimientos sobre los comandos más comunes de Linux.</p>
        </div>
        
        <!-- Contenedor de la pregunta y opciones -->
        <div id="question-area">
            <div class="progress-bar">
                <div id="progress-bar-fill" class="progress" style="width: 0%;"></div>
            </div>
            
            <div class="question-box">
                <p id="question-text">Cargando pregunta...</p>
            </div>
            
            <div id="options-container" class="options-list">
                <!-- Las opciones se generarán aquí con JavaScript -->
            </div>
        </div>
        
        <!-- Controles de navegación -->
        <div class="controls">
            <button id="prev-button" class="nav-button" disabled>Anterior</button>
            <button id="restart-button" class="restart-button">Reiniciar Test</button>
            <button id="next-button" class="nav-button">Siguiente</button>
        </div>
        
    </div>

    <!-- Contenedor de resultados (inicialmente oculto) -->
    <div id="results-container" class="container hidden">
        <div class="results">
            <h2>Resultados del Test</h2>
            <p>¡Has completado el test!</p>
            <p>Tu puntuación final es: <span id="final-score" class="font-bold">0/0</span></p>
            <div id="result-stats" class="result-stats">
                <p>Correctas: <span id="correct-count" class="correct-stat">0</span></p>
                <p>Incorrectas: <span id="incorrect-count" class="incorrect-stat">0</span></p>
                <p>Sin responder: <span id="unanswered-count" class="unanswered-stat">0</span></p>
            </div>
        </div>
    </div>

    <script>
        // Datos del quiz (ahora con el índice numérico como respuesta)
        const questions = [
           {
                question: "¿Qué comando se usa para mostrar el directorio de trabajo actual?",
                options: ["ls", "cd", "pwd", "mkdir"],
                correctAnswer: 2,
                userAnswer: null // Added to store user's answer for persistence
            },
            {
                question: "¿Cuál es la función del comando `whoami`?",
                options: ["Mostrar la fecha y hora", "Mostrar el nombre del usuario actual", "Listar archivos", "Crear un nuevo usuario"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué hace el comando `time + comando`?",
                options: ["Cambia la hora del sistema", "Muestra el historial de comandos", "Mide el tiempo de ejecución de un comando", "Sincroniza el reloj del sistema"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para crear un nuevo directorio?",
                options: ["touch", "rmdir", "mkdir", "cat"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Cuál es el propósito del comando `touch`?",
                options: ["Borrar un fichero", "Crear un fichero vacío o actualizar su fecha de acceso/modificación", "Copiar un fichero", "Mover un fichero"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para editar un fichero y su contenido, o crearlo si no existe?",
                options: ["cat", "less", "more", "vi"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Para qué se utiliza el comando `tar`?",
                options: ["Comprimir ficheros individualmente", "Empaquetar y/o comprimir ficheros", "Listar el contenido de un directorio", "Borrar directorios recursivamente"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando permite cambiar al usuario root?",
                options: ["login root", "su -", "sudo -u root", "useradd root"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Cuál es la función principal de `chmod`?",
                options: ["Cambiar el propietario de un fichero", "Cambiar los permisos de un fichero", "Borrar un fichero", "Crear un enlace simbólico"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para cambiar el propietario de un fichero?",
                options: ["chgrp", "chown", "chmod", "useradd"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para buscar ficheros en el sistema de archivos?",
                options: ["locate", "grep", "search", "find"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Para qué sirve el comando `stat`?",
                options: ["Mostrar el estado de la red", "Mostrar información detallada de un fichero", "Comprobar el estado del sistema", "Ver estadísticas de uso de CPU"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra la ruta completa de un comando?",
                options: ["whereis", "type", "which", "man"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para borrar un fichero?",
                options: ["rmdir", "del", "remove", "rm"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Cuál es la función del comando `ln`?",
                options: ["Listar directorios", "Crear enlaces (soft o hard links)", "Cargar módulos del kernel", "Ver el contenido de un fichero"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Para qué se utiliza el comando `cat`?",
                options: ["Concatenar ficheros", "Ver el contenido de un fichero", "Crear un fichero", "Copiar un fichero"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra las últimas líneas de un fichero?",
                options: ["head", "more", "less", "tail"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para contar palabras, líneas, caracteres o bytes de un fichero?",
                options: ["count", "wc", "sum", "calc"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Cuál es la función de `grep`?",
                options: ["Copiar ficheros", "Filtrar texto en ficheros o salida de comandos", "Cambiar permisos", "Comprimir directorios"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra el espacio en disco de los sistemas de ficheros?",
                options: ["du", "free", "df", "lsblk"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Para qué sirve el comando `ps`?",
                options: ["Mostrar el historial de comandos", "Mostrar procesos en ejecución", "Ver el uso de memoria RAM", "Gestionar servicios del sistema"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra dinámicamente una tabla con los procesos en ejecución?",
                options: ["ps", "pstree", "htop", "top"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Cuál es el propósito del comando `nice`?",
                options: ["Cambiar el nombre de un proceso", "Establecer prioridad a un comando", "Terminar un proceso", "Mostrar información de red"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando reinicia el sistema?",
                options: ["shutdown -h now", "reboot", "init 6", "poweroff"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué archivo contiene los nombres de equipos y sus direcciones IP?",
                options: ["/etc/network/interfaces", "/etc/resolv.conf", "/etc/hosts", "/etc/hostname"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para enviar paquetes ICMP echo request para ver si un vecino está activo?",
                options: ["traceroute", "netstat", "ping", "ip route"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Cuál es la función de `nslookup` o `host`?",
                options: ["Configurar interfaces de red", "Buscar nombres en el servidor DNS", "Listar conexiones de red", "Ver la tabla de encaminamiento"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para crear un nuevo usuario en el sistema?",
                options: ["adduser", "userdel", "usermod", "passwd"],
                correctAnswer: 0,
                userAnswer: null
            },
            {
                question: "¿Qué comando permite cambiar la contraseña de un usuario?",
                options: ["chage", "usermod", "passwd", "gpasswd"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Para qué se usa el comando `nmap`?",
                options: ["Análisis de tráfico de red", "Escaneo de puertos abiertos de un servidor", "Ver conexiones de red", "Gestionar interfaces de red"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra información de usuarios conectados?",
                options: ["id", "whoami", "w", "who"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra TODA la información del sistema operativo?",
                options: ["hostname", "uname -r", "uname -a", "cat /proc/version"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para montar una partición?",
                options: ["fdisk", "mkfs", "mount", "lsblk"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Cuál es el comando para listar todas las tareas programadas de tu usuario?",
                options: ["crontab -e", "crontab -l", "at -l", "cron -list"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para añadir o borrar módulos del kernel?",
                options: ["lsmod", "modinfo", "modprobe", "insmod"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Cuál es la función de `free`?",
                options: ["Liberar espacio en disco", "Mostrar información de la memoria RAM", "Optimizar el uso de CPU", "Ver procesos inactivos"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para dar formato a un nuevo disco duro?",
                options: ["fdisk", "mount", "mkfs", "lvm"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Para qué sirve el comando `kill`?",
                options: ["Reiniciar el sistema", "Terminar procesos", "Suspender un proceso", "Listar procesos"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando te permite encontrar el ID del proceso de un programa en ejecución?",
                options: ["ps", "top", "pidof", "pgrep"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando permite ejecutar un comando repetidamente a intervalos de tiempo?",
                options: ["sleep", "loop", "repeat", "watch"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para programar la ejecución de un comando o script para un momento determinado?",
                options: ["cron", "at", "schedule", "job"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Cuál es el comando base para la gestión de paquetes .deb en Ubuntu?",
                options: ["apt", "yum", "rpm", "dpkg"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver el hardware conectado (PCI, USB, etc.)?",
                options: ["lspci", "lsusb", "lshw", "hwinfo"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra mensajes de diagnóstico cuando arranca el S.O.?",
                options: ["logread", "dmesg", "journalctl", "syslog"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para configurar parámetros del kernel en tiempo de ejecución?",
                options: ["modprobe", "sysctl", "uname", "kernelctl"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para crear un volumen físico en LVM?",
                options: ["vgcreate", "lvcreate", "pvcreate", "mkfs"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Cuál es el comando para copiar un archivo a un servidor remoto de forma eficiente y con opciones de preservación?",
                options: ["cp", "scp", "ftp", "rsync"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para limitar el uso de CPU de un proceso?",
                options: ["nice", "renice", "cpulimit", "kill"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando permite apagar, reiniciar o suspender el sistema de forma controlada?",
                options: ["reboot", "poweroff", "halt", "shutdown"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza en Red Hat para instalar un paquete?",
                options: ["apt install", "dpkg -i", "yum install", "rpm -i"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra información sobre conexiones de red, encaminamiento, etc., siendo la alternativa moderna a `netstat`?",
                options: ["ifconfig", "ip a", "ss", "route"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para listar los dispositivos USB conectados?",
                options: ["lspci", "lsusb", "lshw -usb", "dmesg | grep usb"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para revisar y reparar errores en una partición de sistema de archivos ext?",
                options: ["fsck", "badblocks", "e2fsck", "mkfs"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para mostrar la tabla de encaminamiento, siendo una alternativa a `netstat -nr`?",
                options: ["ip neigh", "ip addr", "ip route list", "route -n"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando permite crear un arreglo tipo RAID (por ejemplo, RAID1)?",
                options: ["fdisk", "lvm", "mdadm", "parted"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para mostrar la configuración de red, siendo la alternativa moderna a `ifconfig`?",
                options: ["netstat", "ip address", "route", "nmcli"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para mostrar el árbol de procesos?",
                options: ["ps -ef", "top", "pstree", "htop"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para mostrar las librerías compartidas de las que depende un programa?",
                options: ["ldconfig", "ldd", "objdump", "readelf"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para la gestión de interfaces de red de forma interactiva y en línea de comandos?",
                options: ["ifconfig", "ip", "networkctl", "nmcli"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver los montajes permanentes del sistema?",
                options: ["mount", "df -h", "vi /etc/mtab", "cat /etc/fstab"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando permite añadir un grupo al sistema?",
                options: ["useradd", "groupmod", "addgroup", "gpasswd"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para cambiar la información de expiración de una cuenta y contraseñas?",
                options: ["passwd", "usermod", "chage", "userdel"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para ver los límites de recursos (hard/soft limits) para usuarios?",
                options: ["free", "df", "ulimit", "quota"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver el nombre del kernel del sistema?",
                options: ["uname -s", "uname -r", "uname -v", "cat /proc/version"],
                correctAnswer: 0,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra el nombre del host del sistema?",
                options: ["hostname", "uname -n", "cat /etc/hostname", "Todas las anteriores"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para ver la versión del kernel?",
                options: ["uname -r", "uname -v", "cat /proc/sys/kernel/version", "Todas las anteriores"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver el tipo de procesador?",
                options: ["lscpu", "cat /proc/cpuinfo", "uname -p", "Todas las anteriores"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra el sistema operativo?",
                options: ["uname -o", "lsb_release -a", "cat /etc/os-release", "Todas las anteriores"],
                correctAnswer: 0,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para desmontar una partición por su punto de montaje?",
                options: ["unmount", "umount", "fdisk -u", "rmount"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para listar las particiones de disco?",
                options: ["df -h", "lsblk -f", "fdisk -l", "Todas las anteriores"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comodín en crontab se utiliza para especificar todos los valores de un campo?",
                options: ["-", ",", "*", "/"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comodín en crontab se usa para especificar rangos de valores (ej. min, horas)?",
                options: ["*", "/", "-", ","],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comodín en crontab se utiliza para especificar valores puntuales (ej. 17, 25)?",
                options: ["-", "*", "/", ","],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comodín en crontab se usa para especificar valores escalonados (ej. cada 3 min)?",
                options: ["*", "-", ",", "/"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver una lista completa de los parámetros del kernel en tiempo de ejecución?",
                options: ["sysctl -a", "sysctl -p", "cat /proc/sys", "kernelctl list"],
                correctAnswer: 0,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para mostrar la información del procesador (arquitectura, cores, etc.)?",
                options: ["cpuinfo", "lscpu", "procinfo", "top -c"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para listar los módulos del kernel cargados actualmente?",
                options: ["modprobe", "modinfo", "lsmod", "dmesg"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `free` muestra la información de memoria RAM en un formato legible para humanos?",
                options: ["-b", "-m", "-g", "-h"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para consultar los límites blandos de recursos para el usuario actual?",
                options: ["ulimit -Hn", "ulimit -Sn", "ulimit -Sa", "ulimit -Ha"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para ver solo las conexiones TCP con `netstat`?",
                options: ["netstat -au", "netstat -at", "netstat -l", "netstat -nr"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `netstat` se utiliza para que no resuelva las IPs a nombres?",
                options: ["-l", "-n", "-e", "-p"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para ver solo las conexiones en estado LISTEN con `netstat`?",
                options: ["netstat -atn", "netstat -au", "netstat -l", "netstat -ie"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `netstat` muestra el PID/ProgramName (requiere superusuario)?",
                options: ["-l", "-t", "-n", "-p"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver los interfaces de red con `netstat`?",
                options: ["netstat -nr", "netstat -ie", "netstat -ac", "netstat -s"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para ver la tabla de encaminamiento con `netstat`?",
                options: ["netstat -ie", "netstat -ac", "netstat -nr", "netstat -s"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para crear un volumen físico en LVM (Logical Volume Manager)?",
                options: ["vgcreate", "lvcreate", "pvcreate", "mkfs"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando LVM se usa para crear un grupo de volúmenes?",
                options: ["pvcreate", "lvcreate", "vgcreate", "vgextend"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando LVM se utiliza para crear un volumen lógico?",
                options: ["pvcreate", "vgcreate", "lvcreate", "lvresize"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para verificar y reparar errores en un sistema de archivos ext3/ext4?",
                options: ["fsck", "badblocks", "e2fsck", "tune2fs"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `rsync` se usa para copiar archivos de forma recursiva, conservando permisos, tiempos, etc.?",
                options: ["-v", "-z", "-a", "-h"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `cpulimit` se usa para especificar el PID del proceso a limitar?",
                options: ["-l", "-p", "-t", "-c"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué señal de `kill` se usa para forzar la terminación de un proceso (SIGKILL)?",
                options: ["-1", "-2", "-9", "-15"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para matar todos los procesos con un nombre específico (ej. 'chrome')?",
                options: ["kill -1", "pkill o killall", "kill -9", "xkill"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `watch` se usa para especificar el intervalo de tiempo entre ejecuciones del comando?",
                options: ["-i", "-t", "-n", "-s"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para cancelar un apagado programado con `shutdown`?",
                options: ["shutdown -h", "shutdown -r", "shutdown -c", "shutdown -k"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando en Ubuntu se usa para actualizar la lista de paquetes disponibles?",
                options: ["sudo apt upgrade", "sudo apt install", "sudo apt update", "sudo apt autoremove"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `dpkg` se usa para eliminar un paquete y sus archivos de configuración?",
                options: ["-r", "-P", "-s", "-i"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando en Red Hat se utiliza para actualizar todos los paquetes instalados?",
                options: ["yum install", "yum remove", "yum update", "yum search"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `rpm` se utiliza para actualizar un paquete si ya está instalado?",
                options: ["-i", "-e", "-q", "-U"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver los dispositivos conectados al PCI?",
                options: ["lsusb", "lshw", "lspci", "hwinfo"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver los montajes actuales del sistema?",
                options: ["mount", "df -h", "cat /etc/fstab", "vi /etc/mtab"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para ver el nombre de nuestro host?",
                options: ["hostname", "uname -n", "cat /etc/hostname", "Todas las anteriores"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué archivo de configuración de red indica en qué orden se resuelven los nombres de equipo o de dominio?",
                options: ["/etc/hosts", "/etc/resolv.conf", "/etc/host.conf", "/etc/network/interfaces"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para mostrar la tabla de vecinos ARP?",
                options: ["arp -a", "ip neigh", "netstat -r", "Ambas A y B son correctas"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para añadir una entrada estática ARP manualmente?",
                options: ["arp -d", "ip neigh flush", "arp -s", "ip route add"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para buscar nombres en el servidor DNS?",
                options: ["ping", "traceroute", "nslookup", "dig"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para hacer consultas DNS más detalladas que `nslookup`?",
                options: ["host", "dig", "getent", "resolvectl"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué archivo contiene la configuración del comando `sudo` para hacer operaciones como otro usuario?",
                options: ["/etc/passwd", "/etc/group", "/etc/shadow", "/etc/sudoers"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `useradd` crea el directorio personal del nuevo usuario?",
                options: ["-s", "-G", "-d", "-m"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para entrar en la sesión de otro usuario?",
                options: ["login", "su -", "ssh", "useradd"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para eliminar un grupo del sistema?",
                options: ["groupmod", "delgroup", "groupdel", "Ambas B y C son correctas"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para administrar miembros y contraseñas de grupos?",
                options: ["groupadd", "usermod", "gpasswd", "chgrp"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `usermod` se usa para añadir un usuario a un grupo suplementario?",
                options: ["-d", "-s", "-aG", "-g"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver los dispositivos PCI, PCI Express o USB conectados?",
                options: ["lsusb", "lspci", "lshw", "hwinfo"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para ver el nivel de ejecución (runlevel) del S.O.?",
                options: ["init", "telinit", "runlevel", "systemctl get-default"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando permite cambiar el proceso de runlevel?",
                options: ["runlevel", "telinit", "systemctl isolate", "Ambas B y C son correctas"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para apagar el sistema con el runlevel 0?",
                options: ["shutdown -h now", "init 0", "poweroff", "Todas las anteriores"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para reiniciar el sistema con el runlevel 6?",
                options: ["reboot", "init 6", "shutdown -r now", "Todas las anteriores"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando en Ubuntu se utiliza para buscar paquetes basándose en palabras clave?",
                options: ["apt search", "apt-cache search", "dpkg -S", "yum search"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando `apt` se usa para limpiar dependencias innecesarias?",
                options: ["apt clean", "apt autoclean", "apt autoremove", "apt purge"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `dpkg` muestra el contenido de un paquete .deb?",
                options: ["-s", "-l", "-c", "-i"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando `yum` se usa para limpiar el caché de paquetes?",
                options: ["yum clean all", "yum remove cache", "yum clear", "yum reset"],
                correctAnswer: 0,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `rpm` se utiliza para verificar la integridad de un paquete?",
                options: ["-i", "-q", "-V", "-L"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para ver la información de un módulo del kernel en cuestión?",
                options: ["lsmod", "modprobe", "modinfo", "dmesg"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para eliminar un módulo del kernel?",
                options: ["modprobe -r", "rmmod", "modprobe -d", "Ambas A y B son correctas"],
                correctAnswer: 3,
                userAnswer: null
            }
        ];

        // Elementos del DOM
        const quizContainer = document.getElementById('quizContainer');
        const resultsContainer = document.getElementById('results-container');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const progressBarFill = document.getElementById('progress-bar-fill');
        const finalScoreSpan = document.getElementById('final-score');
        const restartButton = document.getElementById('restart-button');
        const correctCountSpan = document.getElementById('correct-count');
        const incorrectCountSpan = document.getElementById('incorrect-count');
        const unansweredCountSpan = document.getElementById('unanswered-count');

        // Estado del quiz
        let currentQuestionIndex = 0;
        let quizCompleted = false;
        // userAnswers ahora guarda el índice de la opción seleccionada para cada pregunta
        let userAnswers = new Array(questions.length).fill(null);

        // Cargar el estado del quiz desde localStorage
        function loadQuizState() {
            const savedState = localStorage.getItem('quizState');
            if (savedState) {
                const state = JSON.parse(savedState);
                currentQuestionIndex = state.currentQuestionIndex;
                userAnswers = state.userAnswers;
                quizCompleted = state.quizCompleted;
            }
        }

        // Guardar el estado del quiz en localStorage
        function saveQuizState() {
            const state = {
                currentQuestionIndex,
                userAnswers,
                quizCompleted
            };
            localStorage.setItem('quizState', JSON.stringify(state));
        }

        // Función para mostrar una pregunta
        function displayQuestion() {
            if (quizCompleted) return;

            const currentQuestion = questions[currentQuestionIndex];
            const userAnswerIndex = userAnswers[currentQuestionIndex];
            const hasAnswered = userAnswerIndex !== null;

            questionText.textContent = `${currentQuestionIndex + 1}. ${currentQuestion.question}`;
            optionsContainer.innerHTML = '';

            currentQuestion.options.forEach((option, index) => {
                const optionButton = document.createElement('button');
                optionButton.textContent = option;
                optionButton.classList.add('option-button');

                // Si ya se ha respondido la pregunta, deshabilita los botones y aplica los estilos
                if (hasAnswered) {
                    optionButton.disabled = true;

                    // Aplica la clase 'incorrect' si la respuesta del usuario es incorrecta y es la opción seleccionada
                    if (index === userAnswerIndex && index !== currentQuestion.correctAnswer) {
                        optionButton.classList.add('incorrect');
                    }
                    
                    // Aplica la clase 'correct' a la respuesta correcta
                    if (index === currentQuestion.correctAnswer) {
                        optionButton.classList.add('correct');
                    }
                }

                optionButton.addEventListener('click', () => selectOption(index));
                optionsContainer.appendChild(optionButton);
            });

            updateProgress();
            updateNavigationButtons();
        }

        // Función para seleccionar una opción
        function selectOption(selectedIndex) {
            // Guarda el índice de la respuesta seleccionada
            userAnswers[currentQuestionIndex] = selectedIndex;
            saveQuizState();
            // Vuelve a renderizar la pregunta para que los estilos se apliquen
            displayQuestion();
        }

        // Función para pasar a la siguiente pregunta
        function goToNextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveQuizState();
            } else {
                completeQuiz();
            }
        }

        // Función para volver a la pregunta anterior
        function goToPreviousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
                saveQuizState();
            }
        }

        // Función para actualizar el estado de los botones de navegación
        function updateNavigationButtons() {
            prevButton.disabled = currentQuestionIndex === 0;
            
            // Permite avanzar sin contestar
            nextButton.disabled = false;

            // Cambiar el texto del botón si es la última pregunta
            if (currentQuestionIndex === questions.length - 1) {
                nextButton.textContent = "Finalizar";
            } else {
                nextButton.textContent = "Siguiente";
            }
        }
        
        // Función para actualizar la barra de progreso
        function updateProgress() {
            const progress = ((currentQuestionIndex) / questions.length) * 100;
            progressBarFill.style.width = `${progress}%`;
        }
        
        // Función para completar el quiz y mostrar los resultados
        function completeQuiz() {
            quizCompleted = true;
            calculateFinalScore();
            showResults();
            saveQuizState();
        }

        // Función para calcular la puntuación final y las estadísticas
        function calculateFinalScore() {
            let correctCount = 0;
            let incorrectCount = 0;
            let unansweredCount = 0;

            questions.forEach((q, index) => {
                const userAnswerIndex = userAnswers[index];
                if (userAnswerIndex !== null) {
                    // Ahora se compara el índice de la respuesta del usuario con el índice de la respuesta correcta
                    if (userAnswerIndex === q.correctAnswer) {
                        correctCount++;
                    } else {
                        incorrectCount++;
                    }
                } else {
                    unansweredCount++;
                }
            });
            
            finalScoreSpan.textContent = `${correctCount}/${questions.length}`;
            correctCountSpan.textContent = correctCount;
            incorrectCountSpan.textContent = incorrectCount;
            unansweredCountSpan.textContent = unansweredCount;
        }

        // Función para mostrar los resultados
        function showResults() {
            quizContainer.classList.add('hidden');
            resultsContainer.classList.remove('hidden');
        }

        // Función para reiniciar el quiz
        function restartQuiz() {
            currentQuestionIndex = 0;
            quizCompleted = false;
            userAnswers = new Array(questions.length).fill(null);
            localStorage.clear();
            
            resultsContainer.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            displayQuestion();
        }

        // Event listeners para los botones de navegación
        prevButton.addEventListener('click', goToPreviousQuestion);
        nextButton.addEventListener('click', goToNextQuestion);

        // Event listener para el botón de reiniciar
        restartButton.addEventListener('click', restartQuiz);

        // Inicializar el quiz al cargar la página
        document.addEventListener('DOMContentLoaded', () => {
            loadQuizState();
            if (quizCompleted) {
                calculateFinalScore();
                showResults();
            } else {
                displayQuestion();
            }
        });
    </script>
</body>
</html>
