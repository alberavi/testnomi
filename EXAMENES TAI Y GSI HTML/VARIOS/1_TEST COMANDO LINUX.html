<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COMANDOS LINUX - Test Interactivo</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Dark background */
            color: #e2e8f0; /* Light text */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
        }
        .quiz-container {
            background-color: #2d3748; /* Slightly lighter dark background for container */
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            width: 100%;
            max-width: 600px;
            text-align: center;
            position: relative; /* Needed for absolute positioning of buttons */
        }
        .question-text {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 2rem;
            color: #cbd5e0;
        }
        .option-button {
            background-color: #4a5568; /* Darker grey for buttons */
            color: #e2e8f0;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            margin-bottom: 0.75rem;
            width: 100%;
            text-align: left;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .option-button:hover:not(.correct):not(.incorrect) {
            background-color: #6a7a90;
            transform: translateY(-2px);
        }
        .option-button.correct {
            background-color: #48bb78; /* Green for correct */
            border-color: #38a169;
            color: #1a202c;
            font-weight: bold;
        }
        .option-button.incorrect {
            background-color: #ef4444; /* Red for incorrect */
            border-color: #dc2626;
            color: #1a202c;
            font-weight: bold;
        }
        .nav-button {
            background-color: #3182ce; /* Blue for navigation buttons */
            color: #ffffff;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            margin-top: 1.5rem;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            font-weight: 600;
            /* Position the buttons */
            position: absolute;
            bottom: 1rem;
        }
        .nav-button:hover {
            background-color: #2c5282;
            transform: translateY(-2px);
        }
        #prev-button {
            left: 1rem; /* Position previous button to the left */
        }
        #next-button {
            right: 1rem; /* Position next button to the right */
        }
        .restart-button {
            background-color: #3182ce; /* Blue for restart */
            color: #ffffff;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            margin-top: 1.5rem;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            font-weight: 600;
            position: absolute;
            bottom: 1rem;
            left: 50%;
            transform: translateX(-50%); /* Center the restart button */
        }
        .restart-button:hover {
            background-color: #2c5282;
            transform: translateY(-2px) translateX(-50%);
        }
        .results-container {
            margin-top: 2rem;
            font-size: 1.25rem;
            font-weight: 600;
            color: #cbd5e0;
        }
        .message-box {
            background-color: #4a5568;
            border-radius: 0.75rem;
            padding: 1rem;
            margin-top: 1rem;
            font-size: 1rem;
            color: #e2e8f0;
        }
    </style>
</head>
<body class="selection:bg-blue-500 selection:text-white">
    <div class="quiz-container">
        <h1 class="text-3xl font-bold mb-6 text-white">COMANDOS LINUX</h1>
        <div id="quiz-area">
            <p id="question-text" class="question-text"></p>
            <div id="options-container" class="grid grid-cols-1 gap-3">
                <!-- Options will be loaded here by JavaScript -->
            </div>
            <div id="feedback-message" class="message-box hidden"></div>
        </div>
        <div id="results-area" class="results-container hidden">
            <p>Test Completado!</p>
            <p>Tu puntuación: <span id="score-display">0</span>/<span id="total-questions">0</span></p>
        </div>
        <!-- Navigation buttons -->
        <button id="prev-button" class="nav-button">Anterior</button>
        <button id="next-button" class="nav-button">Siguiente</button>
        <!-- Restart button -->
        <button id="restart-button" class="restart-button">Reiniciar Test</button>
    </div>

    <script>
        // Array de preguntas y respuestas
        const questions = [
            {
                question: "¿Qué comando se usa para mostrar el directorio de trabajo actual?",
                options: ["ls", "cd", "pwd", "mkdir"],
                correctAnswer: 2,
                userAnswer: null // Added to store user's answer for persistence
            },
            {
                question: "¿Cuál es la función del comando `whoami`?",
                options: ["Mostrar la fecha y hora", "Mostrar el nombre del usuario actual", "Listar archivos", "Crear un nuevo usuario"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué hace el comando `time + comando`?",
                options: ["Cambia la hora del sistema", "Muestra el historial de comandos", "Mide el tiempo de ejecución de un comando", "Sincroniza el reloj del sistema"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para crear un nuevo directorio?",
                options: ["touch", "rmdir", "mkdir", "cat"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Cuál es el propósito del comando `touch`?",
                options: ["Borrar un fichero", "Crear un fichero vacío o actualizar su fecha de acceso/modificación", "Copiar un fichero", "Mover un fichero"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para editar un fichero y su contenido, o crearlo si no existe?",
                options: ["cat", "less", "more", "vi"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Para qué se utiliza el comando `tar`?",
                options: ["Comprimir ficheros individualmente", "Empaquetar y/o comprimir ficheros", "Listar el contenido de un directorio", "Borrar directorios recursivamente"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando permite cambiar al usuario root?",
                options: ["login root", "su -", "sudo -u root", "useradd root"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Cuál es la función principal de `chmod`?",
                options: ["Cambiar el propietario de un fichero", "Cambiar los permisos de un fichero", "Borrar un fichero", "Crear un enlace simbólico"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para cambiar el propietario de un fichero?",
                options: ["chgrp", "chown", "chmod", "useradd"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para buscar ficheros en el sistema de archivos?",
                options: ["locate", "grep", "search", "find"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Para qué sirve el comando `stat`?",
                options: ["Mostrar el estado de la red", "Mostrar información detallada de un fichero", "Comprobar el estado del sistema", "Ver estadísticas de uso de CPU"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra la ruta completa de un comando?",
                options: ["whereis", "type", "which", "man"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para borrar un fichero?",
                options: ["rmdir", "del", "remove", "rm"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Cuál es la función del comando `ln`?",
                options: ["Listar directorios", "Crear enlaces (soft o hard links)", "Cargar módulos del kernel", "Ver el contenido de un fichero"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Para qué se utiliza el comando `cat`?",
                options: ["Concatenar ficheros", "Ver el contenido de un fichero", "Crear un fichero", "Copiar un fichero"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra las últimas líneas de un fichero?",
                options: ["head", "more", "less", "tail"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para contar palabras, líneas, caracteres o bytes de un fichero?",
                options: ["count", "wc", "sum", "calc"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Cuál es la función de `grep`?",
                options: ["Copiar ficheros", "Filtrar texto en ficheros o salida de comandos", "Cambiar permisos", "Comprimir directorios"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra el espacio en disco de los sistemas de ficheros?",
                options: ["du", "free", "df", "lsblk"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Para qué sirve el comando `ps`?",
                options: ["Mostrar el historial de comandos", "Mostrar procesos en ejecución", "Ver el uso de memoria RAM", "Gestionar servicios del sistema"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra dinámicamente una tabla con los procesos en ejecución?",
                options: ["ps", "pstree", "htop", "top"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Cuál es el propósito del comando `nice`?",
                options: ["Cambiar el nombre de un proceso", "Establecer prioridad a un comando", "Terminar un proceso", "Mostrar información de red"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando reinicia el sistema?",
                options: ["shutdown -h now", "reboot", "init 6", "poweroff"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué archivo contiene los nombres de equipos y sus direcciones IP?",
                options: ["/etc/network/interfaces", "/etc/resolv.conf", "/etc/hosts", "/etc/hostname"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para enviar paquetes ICMP echo request para ver si un vecino está activo?",
                options: ["traceroute", "netstat", "ping", "ip route"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Cuál es la función de `nslookup` o `host`?",
                options: ["Configurar interfaces de red", "Buscar nombres en el servidor DNS", "Listar conexiones de red", "Ver la tabla de encaminamiento"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para crear un nuevo usuario en el sistema?",
                options: ["adduser", "userdel", "usermod", "passwd"],
                correctAnswer: 0,
                userAnswer: null
            },
            {
                question: "¿Qué comando permite cambiar la contraseña de un usuario?",
                options: ["chage", "usermod", "passwd", "gpasswd"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Para qué se usa el comando `nmap`?",
                options: ["Análisis de tráfico de red", "Escaneo de puertos abiertos de un servidor", "Ver conexiones de red", "Gestionar interfaces de red"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra información de usuarios conectados?",
                options: ["id", "whoami", "w", "who"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra TODA la información del sistema operativo?",
                options: ["hostname", "uname -r", "uname -a", "cat /proc/version"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para montar una partición?",
                options: ["fdisk", "mkfs", "mount", "lsblk"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Cuál es el comando para listar todas las tareas programadas de tu usuario?",
                options: ["crontab -e", "crontab -l", "at -l", "cron -list"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para añadir o borrar módulos del kernel?",
                options: ["lsmod", "modinfo", "modprobe", "insmod"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Cuál es la función de `free`?",
                options: ["Liberar espacio en disco", "Mostrar información de la memoria RAM", "Optimizar el uso de CPU", "Ver procesos inactivos"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para dar formato a un nuevo disco duro?",
                options: ["fdisk", "mount", "mkfs", "lvm"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Para qué sirve el comando `kill`?",
                options: ["Reiniciar el sistema", "Terminar procesos", "Suspender un proceso", "Listar procesos"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando te permite encontrar el ID del proceso de un programa en ejecución?",
                options: ["ps", "top", "pidof", "pgrep"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando permite ejecutar un comando repetidamente a intervalos de tiempo?",
                options: ["sleep", "loop", "repeat", "watch"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para programar la ejecución de un comando o script para un momento determinado?",
                options: ["cron", "at", "schedule", "job"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Cuál es el comando base para la gestión de paquetes .deb en Ubuntu?",
                options: ["apt", "yum", "rpm", "dpkg"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver el hardware conectado (PCI, USB, etc.)?",
                options: ["lspci", "lsusb", "lshw", "hwinfo"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra mensajes de diagnóstico cuando arranca el S.O.?",
                options: ["logread", "dmesg", "journalctl", "syslog"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para configurar parámetros del kernel en tiempo de ejecución?",
                options: ["modprobe", "sysctl", "uname", "kernelctl"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para crear un volumen físico en LVM?",
                options: ["vgcreate", "lvcreate", "pvcreate", "mkfs"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Cuál es el comando para copiar un archivo a un servidor remoto de forma eficiente y con opciones de preservación?",
                options: ["cp", "scp", "ftp", "rsync"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para limitar el uso de CPU de un proceso?",
                options: ["nice", "renice", "cpulimit", "kill"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando permite apagar, reiniciar o suspender el sistema de forma controlada?",
                options: ["reboot", "poweroff", "halt", "shutdown"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza en Red Hat para instalar un paquete?",
                options: ["apt install", "dpkg -i", "yum install", "rpm -i"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra información sobre conexiones de red, encaminamiento, etc., siendo la alternativa moderna a `netstat`?",
                options: ["ifconfig", "ip a", "ss", "route"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para listar los dispositivos USB conectados?",
                options: ["lspci", "lsusb", "lshw -usb", "dmesg | grep usb"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para revisar y reparar errores en una partición de sistema de archivos ext?",
                options: ["fsck", "badblocks", "e2fsck", "mkfs"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para mostrar la tabla de encaminamiento, siendo una alternativa a `netstat -nr`?",
                options: ["ip neigh", "ip addr", "ip route list", "route -n"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando permite crear un arreglo tipo RAID (por ejemplo, RAID1)?",
                options: ["fdisk", "lvm", "mdadm", "parted"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para mostrar la configuración de red, siendo la alternativa moderna a `ifconfig`?",
                options: ["netstat", "ip address", "route", "nmcli"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para mostrar el árbol de procesos?",
                options: ["ps -ef", "top", "pstree", "htop"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para mostrar las librerías compartidas de las que depende un programa?",
                options: ["ldconfig", "ldd", "objdump", "readelf"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para la gestión de interfaces de red de forma interactiva y en línea de comandos?",
                options: ["ifconfig", "ip", "networkctl", "nmcli"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver los montajes permanentes del sistema?",
                options: ["mount", "df -h", "cat /etc/mtab", "vi /etc/fstab"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando permite añadir un grupo al sistema?",
                options: ["useradd", "groupmod", "addgroup", "gpasswd"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para cambiar la información de expiración de una cuenta y contraseñas?",
                options: ["passwd", "usermod", "chage", "userdel"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para ver los límites de recursos (hard/soft limits) para usuarios?",
                options: ["free", "df", "ulimit", "quota"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver el nombre del kernel del sistema?",
                options: ["uname -s", "uname -r", "uname -v", "cat /proc/version"],
                correctAnswer: 0,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra el nombre del host del sistema?",
                options: ["hostname", "uname -n", "cat /etc/hostname", "Todas las anteriores"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para ver la versión del kernel?",
                options: ["uname -r", "uname -v", "cat /proc/sys/kernel/version", "Todas las anteriores"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver el tipo de procesador?",
                options: ["lscpu", "cat /proc/cpuinfo", "uname -p", "Todas las anteriores"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando muestra el sistema operativo?",
                options: ["uname -o", "lsb_release -a", "cat /etc/os-release", "Todas las anteriores"],
                correctAnswer: 0,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para desmontar una partición por su punto de montaje?",
                options: ["unmount", "umount", "fdisk -u", "rmount"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para listar las particiones de disco?",
                options: ["df -h", "lsblk -f", "fdisk -l", "Todas las anteriores"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comodín en crontab se utiliza para especificar todos los valores de un campo?",
                options: ["-", ",", "*", "/"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comodín en crontab se usa para especificar rangos de valores (ej. min, horas)?",
                options: ["*", "/", "-", ","],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comodín en crontab se utiliza para especificar valores puntuales (ej. 17, 25)?",
                options: ["-", "*", "/", ","],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comodín en crontab se usa para especificar valores escalonados (ej. cada 3 min)?",
                options: ["*", "-", ",", "/"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver una lista completa de los parámetros del kernel en tiempo de ejecución?",
                options: ["sysctl -a", "sysctl -p", "cat /proc/sys", "kernelctl list"],
                correctAnswer: 0,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para mostrar la información del procesador (arquitectura, cores, etc.)?",
                options: ["cpuinfo", "lscpu", "procinfo", "top -c"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para listar los módulos del kernel cargados actualmente?",
                options: ["modprobe", "modinfo", "lsmod", "dmesg"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `free` muestra la información de memoria RAM en un formato legible para humanos?",
                options: ["-b", "-m", "-g", "-h"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para consultar los límites blandos de recursos para el usuario actual?",
                options: ["ulimit -Hn", "ulimit -Sn", "ulimit -Sa", "ulimit -Ha"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para ver solo las conexiones TCP con `netstat`?",
                options: ["netstat -au", "netstat -at", "netstat -l", "netstat -nr"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `netstat` se utiliza para que no resuelva las IPs a nombres?",
                options: ["-l", "-n", "-e", "-p"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para ver solo las conexiones en estado LISTEN con `netstat`?",
                options: ["netstat -atn", "netstat -au", "netstat -l", "netstat -ie"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `netstat` muestra el PID/ProgramName (requiere superusuario)?",
                options: ["-l", "-t", "-n", "-p"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver los interfaces de red con `netstat`?",
                options: ["netstat -nr", "netstat -ie", "netstat -ac", "netstat -s"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para ver la tabla de encaminamiento con `netstat`?",
                options: ["netstat -ie", "netstat -ac", "netstat -nr", "netstat -s"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para crear un volumen físico en LVM (Logical Volume Manager)?",
                options: ["vgcreate", "lvcreate", "pvcreate", "mkfs"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando LVM se usa para crear un grupo de volúmenes?",
                options: ["pvcreate", "lvcreate", "vgcreate", "vgextend"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando LVM se utiliza para crear un volumen lógico?",
                options: ["pvcreate", "vgcreate", "lvcreate", "lvresize"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para verificar y reparar errores en un sistema de archivos ext3/ext4?",
                options: ["fsck", "badblocks", "e2fsck", "tune2fs"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `rsync` se usa para copiar archivos de forma recursiva, conservando permisos, tiempos, etc.?",
                options: ["-v", "-z", "-a", "-h"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `cpulimit` se usa para especificar el PID del proceso a limitar?",
                options: ["-l", "-p", "-t", "-c"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué señal de `kill` se usa para forzar la terminación de un proceso (SIGKILL)?",
                options: ["-1", "-2", "-9", "-15"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para matar todos los procesos con un nombre específico (ej. 'chrome')?",
                options: ["killall", "pkill", "kill -9", "xkill"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `watch` se usa para especificar el intervalo de tiempo entre ejecuciones del comando?",
                options: ["-i", "-t", "-n", "-s"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para cancelar un apagado programado con `shutdown`?",
                options: ["shutdown -h", "shutdown -r", "shutdown -c", "shutdown -k"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando en Ubuntu se usa para actualizar la lista de paquetes disponibles?",
                options: ["sudo apt upgrade", "sudo apt install", "sudo apt update", "sudo apt autoremove"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `dpkg` se usa para eliminar un paquete y sus archivos de configuración?",
                options: ["-r", "-P", "-s", "-i"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando en Red Hat se utiliza para actualizar todos los paquetes instalados?",
                options: ["yum install", "yum remove", "yum update", "yum search"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `rpm` se utiliza para actualizar un paquete si ya está instalado?",
                options: ["-i", "-e", "-q", "-U"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver los dispositivos conectados al PCI?",
                options: ["lsusb", "lshw", "lspci", "hwinfo"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver los montajes actuales del sistema?",
                options: ["mount", "df -h", "cat /etc/fstab", "vi /etc/mtab"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para ver el nombre de nuestro host?",
                options: ["hostname", "uname -n", "cat /etc/hostname", "Todas las anteriores"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué archivo de configuración de red indica en qué orden se resuelven los nombres de equipo o de dominio?",
                options: ["/etc/hosts", "/etc/resolv.conf", "/etc/host.conf", "/etc/network/interfaces"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para mostrar la tabla de vecinos ARP?",
                options: ["arp -a", "ip neigh", "netstat -r", "Ambas A y B son correctas"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para añadir una entrada estática ARP manualmente?",
                options: ["arp -d", "ip neigh flush", "arp -s", "ip route add"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para buscar nombres en el servidor DNS?",
                options: ["ping", "traceroute", "nslookup", "dig"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para hacer consultas DNS más detalladas que `nslookup`?",
                options: ["host", "dig", "getent", "resolvectl"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué archivo contiene la configuración del comando `sudo` para hacer operaciones como otro usuario?",
                options: ["/etc/passwd", "/etc/group", "/etc/shadow", "/etc/sudoers"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `useradd` crea el directorio personal del nuevo usuario?",
                options: ["-s", "-G", "-d", "-m"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para entrar en la sesión de otro usuario?",
                options: ["login", "su -", "ssh", "useradd"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para eliminar un grupo del sistema?",
                options: ["groupmod", "delgroup", "groupdel", "Ambas B y C son correctas"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para administrar miembros y contraseñas de grupos?",
                options: ["groupadd", "usermod", "gpasswd", "chgrp"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `usermod` se usa para añadir un usuario a un grupo suplementario?",
                options: ["-d", "-s", "-aG", "-g"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para ver los dispositivos PCI, PCI Express o USB conectados?",
                options: ["lsusb", "lspci", "lshw", "hwinfo"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para ver el nivel de ejecución (runlevel) del S.O.?",
                options: ["init", "telinit", "runlevel", "systemctl get-default"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando permite cambiar el proceso de runlevel?",
                options: ["runlevel", "telinit", "systemctl isolate", "Ambas B y C son correctas"],
                correctAnswer: 3,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para apagar el sistema con el runlevel 0?",
                options: ["shutdown -h now", "init 0", "poweroff", "Todas las anteriores"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para reiniciar el sistema con el runlevel 6?",
                options: ["reboot", "init 6", "shutdown -r now", "Todas las anteriores"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando en Ubuntu se utiliza para buscar paquetes basándose en palabras clave?",
                options: ["apt search", "apt-cache search", "dpkg -S", "yum search"],
                correctAnswer: 1,
                userAnswer: null
            },
            {
                question: "¿Qué comando `apt` se usa para limpiar dependencias innecesarias?",
                options: ["apt clean", "apt autoclean", "apt autoremove", "apt purge"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `dpkg` muestra el contenido de un paquete .deb?",
                options: ["-s", "-l", "-c", "-i"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando `yum` se usa para limpiar el caché de paquetes?",
                options: ["yum clean all", "yum remove cache", "yum clear", "yum reset"],
                correctAnswer: 0,
                userAnswer: null
            },
            {
                question: "¿Qué opción de `rpm` se utiliza para verificar la integridad de un paquete?",
                options: ["-i", "-q", "-V", "-L"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se usa para ver la información de un módulo del kernel en cuestión?",
                options: ["lsmod", "modprobe", "modinfo", "dmesg"],
                correctAnswer: 2,
                userAnswer: null
            },
            {
                question: "¿Qué comando se utiliza para eliminar un módulo del kernel?",
                options: ["modprobe -r", "rmmod", "modprobe -d", "Ambas A y B son correctas"],
                correctAnswer: 3,
                userAnswer: null
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let quizCompleted = false;

        const quizArea = document.getElementById('quiz-area');
        const resultsArea = document.getElementById('results-area');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const feedbackMessage = document.getElementById('feedback-message');
        const scoreDisplay = document.getElementById('score-display');
        const totalQuestionsDisplay = document.getElementById('total-questions');
        const restartButton = document.getElementById('restart-button');
        const prevButton = document.getElementById('prev-button'); // Get previous button
        const nextButton = document.getElementById('next-button'); // Get next button

        // Función para cargar el estado del quiz desde LocalStorage
        function loadQuizState() {
            const savedIndex = localStorage.getItem('currentQuestionIndex');
            const savedScore = localStorage.getItem('score');
            const savedQuizCompleted = localStorage.getItem('quizCompleted');
            const savedQuestions = localStorage.getItem('questions'); // Load saved questions array

            if (savedIndex !== null && savedScore !== null) {
                currentQuestionIndex = parseInt(savedIndex);
                score = parseInt(savedScore);
                quizCompleted = savedQuizCompleted === 'true'; // Convert string to boolean
            }

            if (savedQuestions !== null) {
                // Parse the saved questions and merge with the initial questions array
                const parsedQuestions = JSON.parse(savedQuestions);
                questions.forEach((q, index) => {
                    if (parsedQuestions[index] && parsedQuestions[index].userAnswer !== undefined) {
                        q.userAnswer = parsedQuestions[index].userAnswer;
                    }
                });
            }
        }

        // Función para guardar el estado del quiz en LocalStorage
        function saveQuizState() {
            localStorage.setItem('currentQuestionIndex', currentQuestionIndex);
            localStorage.setItem('score', score);
            localStorage.setItem('quizCompleted', quizCompleted);
            localStorage.setItem('questions', JSON.stringify(questions)); // Save the entire questions array
        }

        // Función para mostrar la pregunta actual
        function displayQuestion() {
            if (currentQuestionIndex >= questions.length) {
                showResults();
                return;
            }

            // Hide results area if it's visible
            resultsArea.classList.add('hidden');
            quizArea.classList.remove('hidden');

            const question = questions[currentQuestionIndex];
            questionText.textContent = `${currentQuestionIndex + 1}. ${question.question}`; // Add question number
            optionsContainer.innerHTML = ''; // Clear previous options
            feedbackMessage.classList.add('hidden'); // Hide feedback

            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('option-button');
                button.onclick = () => selectAnswer(index);

                // If user has already answered this question, highlight their answer
                if (question.userAnswer !== null) {
                    if (index === question.userAnswer) {
                        if (index === question.correctAnswer) {
                            button.classList.add('correct');
                        } else {
                            button.classList.add('incorrect');
                        }
                    } else if (index === question.correctAnswer) {
                        button.classList.add('correct'); // Highlight correct answer even if not selected
                    }
                    button.onclick = null; // Disable clicking if already answered
                }
                optionsContainer.appendChild(button);
            });

            // Update button states
            updateNavigationButtons();
        }

        // Función para manejar la selección de una respuesta
        function selectAnswer(selectedIndex) {
            const question = questions[currentQuestionIndex];
            const buttons = optionsContainer.querySelectorAll('.option-button');

            // Disable all buttons after selection
            buttons.forEach(button => button.onclick = null);

            // Store user's answer
            question.userAnswer = selectedIndex;

            if (selectedIndex === question.correctAnswer) {
                // Only increment score if the question hasn't been answered correctly before
                // This prevents score from increasing if user revisits and re-selects
                if (question.userAnswer === null || question.userAnswer !== question.correctAnswer) {
                    score++;
                }
                buttons[selectedIndex].classList.add('correct');
                feedbackMessage.textContent = "¡Correcto!";
                feedbackMessage.classList.remove('hidden');
            } else {
                // Only decrement score if the question was previously answered correctly
                if (question.userAnswer === question.correctAnswer) {
                    score--;
                }
                buttons[selectedIndex].classList.add('incorrect');
                buttons[question.correctAnswer].classList.add('correct'); // Highlight correct answer
                feedbackMessage.textContent = "Incorrecto. La respuesta correcta era: " + question.options[question.correctAnswer];
                feedbackMessage.classList.remove('hidden');
            }

            saveQuizState(); // Save state after each answer
            updateNavigationButtons(); // Update button states after answering
        }

        // Función para mostrar los resultados finales
        function showResults() {
            quizArea.classList.add('hidden');
            resultsArea.classList.remove('hidden');
            scoreDisplay.textContent = score;
            totalQuestionsDisplay.textContent = questions.length;
            quizCompleted = true; // Mark quiz as completed
            saveQuizState(); // Save completed state
            // Hide navigation buttons when results are shown
            prevButton.classList.add('hidden');
            nextButton.classList.add('hidden');
        }

        // Función para reiniciar el test
        function restartQuiz() {
            localStorage.clear(); // Clear all saved data
            currentQuestionIndex = 0;
            score = 0;
            quizCompleted = false;
            // Reset all user answers in the questions array
            questions.forEach(q => q.userAnswer = null);
            quizArea.classList.remove('hidden');
            resultsArea.classList.add('hidden');
            displayQuestion();
            // Show navigation buttons again
            prevButton.classList.remove('hidden');
            nextButton.classList.remove('hidden');
        }

        // Función para ir a la pregunta anterior
        function goToPreviousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
                saveQuizState();
            }
        }

        // Función para ir a la pregunta siguiente
        function goToNextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveQuizState();
            } else {
                // If it's the last question and user tries to go next, show results
                showResults();
            }
        }

        // Función para actualizar el estado de los botones de navegación
        function updateNavigationButtons() {
            prevButton.disabled = currentQuestionIndex === 0;
            nextButton.disabled = currentQuestionIndex === questions.length - 1 && questions[currentQuestionIndex].userAnswer !== null; // Disable next if on last question and answered
            
            // Show/hide buttons based on quiz completion
            if (quizCompleted) {
                prevButton.classList.add('hidden');
                nextButton.classList.add('hidden');
            } else {
                prevButton.classList.remove('hidden');
                nextButton.classList.remove('hidden');
            }
        }

        // Event listeners para los botones de navegación
        prevButton.addEventListener('click', goToPreviousQuestion);
        nextButton.addEventListener('click', goToNextQuestion);

        // Event listener para el botón de reiniciar
        restartButton.addEventListener('click', restartQuiz);

        // Inicializar el quiz al cargar la página
        document.addEventListener('DOMContentLoaded', () => {
            loadQuizState();
            if (quizCompleted) {
                showResults(); // If quiz was completed, show results directly
            } else {
                displayQuestion(); // Otherwise, continue or start the quiz
            }
        });
    </script>
</body>
</html>
