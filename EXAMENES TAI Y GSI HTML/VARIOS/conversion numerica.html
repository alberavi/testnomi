<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CONVERSION NUMÉRICA</title> <!-- Título actualizado aquí -->
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }
        .container {
            background-color: #ffffff;
            border-radius: 1rem; /* rounded-2xl */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-xl */
            padding: 2.5rem; /* p-10 */
            width: 100%;
            max-width: 600px;
            text-align: center;
            position: relative;
        }
        .option-button {
            background-color: #e0e7ff; /* indigo-100 */
            color: #374151; /* gray-700 */
            padding: 1rem 1.5rem; /* py-4 px-6 */
            border-radius: 0.75rem; /* rounded-xl */
            margin-bottom: 0.75rem; /* mb-3 */
            width: 100%;
            text-align: left;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.2s;
            font-weight: 600; /* font-semibold */
            border: 2px solid transparent;
        }
        .option-button:hover {
            background-color: #c7d2fe; /* indigo-200 */
            transform: translateY(-2px);
        }
        .option-button.selected {
            border-color: #6366f1; /* indigo-500 */
            background-color: #a5b4fc; /* indigo-300 */
        }
        .option-button.correct {
            background-color: #d1fae5; /* green-100 */
            border-color: #34d399; /* green-400 */
            color: #065f46; /* green-800 */
        }
        .option-button.incorrect {
            background-color: #fee2e2; /* red-100 */
            border-color: #ef4444; /* red-500 */
            color: #991b1b; /* red-800 */
        }
        .feedback {
            margin-top: 1rem; /* mt-4 */
            font-weight: 600; /* font-semibold */
        }
        .feedback.correct-text {
            color: #10b981; /* green-500 */
        }
        .feedback.incorrect-text {
            color: #ef4444; /* red-500 */
        }
        .nav-button {
            background-color: #6366f1; /* indigo-500 */
            color: white;
            padding: 0.75rem 1.5rem; /* py-3 px-6 */
            border-radius: 0.75rem; /* rounded-xl */
            font-weight: 600; /* font-semibold */
            cursor: pointer;
            transition: background-color 0.2s;
            margin-top: 1.5rem; /* mt-6 */
        }
        .nav-button:hover {
            background-color: #4f46e5; /* indigo-600 */
        }
        .reset-button {
            background-color: #ef4444; /* red-500 */
            color: white;
            padding: 0.5rem 1rem; /* py-2 px-4 */
            border-radius: 0.5rem; /* rounded-lg */
            font-weight: 600; /* font-semibold */
            cursor: pointer;
            transition: background-color 0.2s;
            position: absolute;
            top: 1rem;
            right: 1rem;
            z-index: 10;
        }
        .reset-button:hover {
            background-color: #dc2626; /* red-600 */
        }
        .results-section {
            text-align: left;
            margin-top: 2rem;
        }
        .results-section p {
            margin-bottom: 0.5rem;
            font-size: 1.125rem; /* text-lg */
        }
        .results-section .correct-count {
            color: #10b981; /* green-500 */
        }
        .results-section .incorrect-count {
            color: #ef4444; /* red-500 */
        }
        .results-section .unanswered-count {
            color: #f59e0b; /* amber-500 */
        }
        .question-counter {
            margin-bottom: 1rem;
            font-size: 1.125rem; /* text-lg */
            color: #6b7280; /* gray-500 */
        }
        .main-quiz-title { /* Nueva clase para el título principal */
            margin-bottom: 1.5rem; /* Espacio debajo del título */
            color: #1a202c; /* Color de texto oscuro */
        }
    </style>
</head>
<body>
    <div class="container">
        <button id="resetButton" class="reset-button">Reiniciar Test</button>
        <h1 class="text-3xl font-bold mb-6 main-quiz-title">CONVERSION NUMÉRICA</h1> <!-- Título principal visible en la página -->
        <div id="quizContent">
            <!-- Content will be loaded here by JavaScript -->
        </div>
    </div>

    <script>
        // Define las preguntas del test
        const questions = [
            {
                question: "¿Cuál es el valor decimal de 101 en base 2?",
                options: ["3", "4", "5", "6"],
                correctAnswerIndex: 2 // '5'
            },
            {
                question: "¿Cuál de los siguientes números no es válido en base octal?",
                options: ["12 en base 8", "77 en base 8", "81 en base 8", "0 en base 8"],
                correctAnswerIndex: 2 // '81 en base 8'
            },
            {
                question: "¿Cuál es el valor decimal de 231 en base 8?",
                options: ["145", "153", "161", "170"],
                correctAnswerIndex: 1 // '153'
            },
            {
                question: "Si convertimos el número binario 00011001 a hexadecimal, ¿cuál es el resultado?",
                options: ["19 en base 16", "1A en base 16", "21 en base 16", "29 en base 16"],
                correctAnswerIndex: 0 // '19 en base 16'
            },
            {
                question: "Para convertir un número decimal a binario, ¿qué operación se realiza repetidamente?",
                options: ["Multiplicar por 2", "Dividir entre 2", "Sumar 2", "Restar 2"],
                correctAnswerIndex: 1 // 'Dividir entre 2'
            },
            // --- Nuevas 35 preguntas ---
            {
                question: "¿Cuál es el valor binario del número decimal 10?",
                options: ["1001", "1010", "1100", "1110"],
                correctAnswerIndex: 1 // '1010'
            },
            {
                question: "¿Cuál es el valor binario del número decimal 25?",
                options: ["11001", "10110", "11010", "10011"],
                correctAnswerIndex: 0 // '11001'
            },
            {
                question: "¿Cuál es el valor binario del número decimal 64?",
                options: ["1000000", "100000", "1100000", "1010101"],
                correctAnswerIndex: 0 // '1000000'
            },
            {
                question: "¿Cuál es el valor octal del número decimal 15?",
                options: ["17 en base 8", "15 en base 8", "13 en base 8", "11 en base 8"],
                correctAnswerIndex: 2 // '17 en base 8' (1*8 + 7 = 15)
            },
            {
                question: "¿Cuál es el valor octal del número decimal 70?",
                options: ["106 en base 8", "108 en base 8", "110 en base 8", "112 en base 8"],
                correctAnswerIndex: 0 // '106 en base 8' (1*64 + 0*8 + 6 = 70)
            },
            {
                question: "¿Cuál es el valor hexadecimal del número decimal 16?",
                options: ["F en base 16", "10 en base 16", "1A en base 16", "1B en base 16"],
                correctAnswerIndex: 1 // '10 en base 16'
            },
            {
                question: "¿Cuál es el valor hexadecimal del número decimal 255?",
                options: ["FE en base 16", "FF en base 16", "100 en base 16", "EF en base 16"],
                correctAnswerIndex: 1 // 'FF en base 16'
            },
            {
                question: "¿Cuál es el valor decimal del número binario 1101?",
                options: ["11", "12", "13", "14"],
                correctAnswerIndex: 2 // '13'
            },
            {
                question: "¿Cuál es el valor decimal del número binario 10000?",
                options: ["8", "16", "32", "64"],
                correctAnswerIndex: 1 // '16'
            },
            {
                question: "¿Cuál es el valor octal del número binario 111001?",
                options: ["71 en base 8", "72 en base 8", "73 en base 8", "74 en base 8"],
                correctAnswerIndex: 1 // '71 en base 8' (111 = 7, 001 = 1) -> 71
            },
            {
                question: "¿Cuál es el valor octal del número binario 101010?",
                options: ["52 en base 8", "53 en base 8", "54 en base 8", "55 en base 8"],
                correctAnswerIndex: 2 // '52 en base 8' (101 = 5, 010 = 2) -> 52
            },
            {
                question: "¿Cuál es el valor hexadecimal del número binario 11011010?",
                options: ["DA en base 16", "AD en base 16", "BD en base 16", "CB en base 16"],
                correctAnswerIndex: 0 // 'DA en base 16' (1101 = D, 1010 = A) -> DA
            },
            {
                question: "¿Cuál es el valor hexadecimal del número binario 01011110?",
                options: ["5E en base 16", "5F en base 16", "6E en base 16", "6F en base 16"],
                correctAnswerIndex: 0 // '5E en base 16' (0101 = 5, 1110 = E) -> 5E
            },
            {
                question: "¿Cuál es el valor decimal del número octal 37 en base 8?",
                options: ["30", "31", "32", "33"],
                correctAnswerIndex: 1 // '31' (3*8 + 7 = 31)
            },
            {
                question: "¿Cuál es el valor decimal del número octal 100 en base 8?",
                options: ["60", "64", "68", "72"],
                correctAnswerIndex: 1 // '64' (1*8^2 + 0*8^1 + 0*8^0 = 64)
            },
            {
                question: "¿Cuál es el valor binario del número octal 52 en base 8?",
                options: ["101010", "101101", "110010", "110101"],
                correctAnswerIndex: 0 // '101010' (5 = 101, 2 = 010)
            },
            {
                question: "¿Cuál es el valor binario del número octal 17 en base 8?",
                options: ["001111", "011110", "011011", "100111"],
                correctAnswerIndex: 0 // '001111' (1 = 001, 7 = 111)
            },
            {
                question: "¿Cuál es el valor hexadecimal del número octal 20 en base 8?",
                options: ["10 en base 16", "11 en base 16", "12 en base 16", "14 en base 16"],
                correctAnswerIndex: 0 // '10 en base 16' (20_8 = 16_10 = 10_16)
            },
            {
                question: "¿Cuál es el valor hexadecimal del número octal 123 en base 8?",
                options: ["53 en base 16", "54 en base 16", "55 en base 16", "56 en base 16"],
                correctAnswerIndex: 2 // '53 en base 16' (123_8 = 83_10 = 53_16)
            },
            {
                question: "¿Cuál es el valor decimal de la letra hexadecimal 'A'?",
                options: ["9", "10", "11", "12"],
                correctAnswerIndex: 1 // '10'
            },
            {
                question: "¿Cuál es el valor decimal del número hexadecimal FF en base 16?",
                options: ["240", "250", "255", "256"],
                correctAnswerIndex: 2 // '255'
            },
            {
                question: "¿Cuál es el valor binario del número hexadecimal C3 en base 16?",
                options: ["11000011", "11000101", "10110011", "11010011"],
                correctAnswerIndex: 0 // '11000011' (C = 1100, 3 = 0011)
            },
            {
                question: "¿Cuál es el valor binario del número hexadecimal 7D en base 16?",
                options: ["01111101", "01101111", "01011101", "01111110"],
                correctAnswerIndex: 0 // '01111101' (7 = 0111, D = 1101)
            },
            {
                question: "¿Cuál es el valor octal del número hexadecimal 10 en base 16?",
                options: ["10 en base 8", "16 en base 8", "20 en base 8", "24 en base 8"],
                correctAnswerIndex: 1 // '20 en base 8' (10_16 = 16_10 = 20_8)
            },
            {
                question: "¿Cuál es el valor octal del número hexadecimal 2F en base 16?",
                options: ["137 en base 8", "136 en base 8", "135 en base 8", "134 en base 8"],
                correctAnswerIndex: 0 // '137 en base 8' (2F_16 = 47_10 = 57_8)
            },
            {
                question: "¿Cuántos dígitos únicos tiene el sistema de numeración binario?",
                options: ["1", "2", "8", "10"],
                correctAnswerIndex: 1 // '2'
            },
            {
                question: "¿Cuál es la base del sistema de numeración octal?",
                options: ["2", "8", "10", "16"],
                correctAnswerIndex: 1 // '8'
            },
            {
                question: "¿Qué sistema de numeración utiliza las letras A-F?",
                options: ["Binario", "Octal", "Decimal", "Hexadecimal"],
                correctAnswerIndex: 3 // 'Hexadecimal'
            },
            {
                question: "¿Cuál es el dígito más grande permitido en el sistema octal?",
                options: ["7", "8", "9", "F"],
                correctAnswerIndex: 0 // '7'
            },
            {
                question: "Para convertir de binario a octal, se agrupan los bits de:",
                options: ["2 en 2", "3 en 3", "4 en 4", "5 en 5"],
                correctAnswerIndex: 1 // '3 en 3'
            },
            {
                question: "Para convertir de binario a hexadecimal, se agrupan los bits de:",
                options: ["2 en 2", "3 en 3", "4 en 4", "5 en 5"],
                correctAnswerIndex: 2 // '4 en 4'
            },
            {
                question: "¿Qué representa un 'bit' en informática?",
                options: ["Un byte de información", "La unidad más pequeña de información", "Un carácter alfanumérico", "Una dirección de memoria"],
                correctAnswerIndex: 1 // 'La unidad más pequeña de información'
            },
            {
                question: "¿Cuántos bits forman un 'byte'?",
                options: ["4", "8", "16", "32"],
                correctAnswerIndex: 1 // '8'
            },
            {
                question: "¿Cuál es el valor decimal de 1000 en base 2?",
                options: ["4", "6", "8", "10"],
                correctAnswerIndex: 2 // '8'
            },
            {
                question: "¿Cuál es el valor binario de 7 en decimal?",
                options: ["101", "110", "111", "100"],
                correctAnswerIndex: 2 // '111'
            },
            {
                question: "¿Cuál es el valor decimal de 1A en base 16?",
                options: ["20", "26", "27", "30"],
                correctAnswerIndex: 1 // '26'
            },
            {
                question: "¿Cuál es el valor octal de 10 en decimal?",
                options: ["10 en base 8", "12 en base 8", "8 en base 8", "A en base 8"],
                correctAnswerIndex: 1 // '12 en base 8'
            },
            {
                question: "¿Cuál es el valor binario de 3 en octal?",
                options: ["011", "11", "10", "110"],
                correctAnswerIndex: 0 // '011'
            },
            {
                question: "¿Cuál es el valor decimal de 123 en base 4?",
                options: ["21", "23", "25", "27"],
                correctAnswerIndex: 2 // '27' (1*4^2 + 2*4^1 + 3*4^0 = 16 + 8 + 3 = 27)
            },
            {
                question: "¿Cuál es el valor hexadecimal de 25 en decimal?",
                options: ["19 en base 16", "1A en base 16", "1B en base 16", "1C en base 16"],
                correctAnswerIndex: 0 // '19 en base 16'
            }
        ];

        let currentQuestionIndex = 0;
        let userAnswers = []; // Stores the index of the selected option for each question
        let quizCompleted = false;

        const quizContent = document.getElementById('quizContent');
        const resetButton = document.getElementById('resetButton');

        // --- LocalStorage Functions ---
        function saveQuizState() {
            localStorage.setItem('quizState', JSON.stringify({
                currentQuestionIndex: currentQuestionIndex,
                userAnswers: userAnswers,
                quizCompleted: quizCompleted
            }));
        }

        function loadQuizState() {
            const savedState = localStorage.getItem('quizState');
            if (savedState) {
                const state = JSON.parse(savedState);
                currentQuestionIndex = state.currentQuestionIndex;
                userAnswers = state.userAnswers;
                quizCompleted = state.quizCompleted;
            } else {
                // Initialize if no state found
                currentQuestionIndex = 0;
                userAnswers = new Array(questions.length).fill(null); // null means not answered
                quizCompleted = false;
            }
        }

        function resetQuiz() {
            // No confirmation dialog as per instructions for iframe environment
            localStorage.removeItem('quizState');
            currentQuestionIndex = 0;
            userAnswers = new Array(questions.length).fill(null);
            quizCompleted = false;
            renderQuestion();
        }

        // --- Quiz Rendering Functions ---
        function renderQuestion() {
            // Clear previous content
            quizContent.innerHTML = '';

            if (quizCompleted) {
                displayResults();
                return;
            }

            if (currentQuestionIndex >= questions.length) {
                quizCompleted = true;
                saveQuizState();
                displayResults();
                return;
            }

            const questionData = questions[currentQuestionIndex];

            // Question Counter
            const counterDiv = document.createElement('div');
            counterDiv.className = 'question-counter';
            counterDiv.textContent = `Pregunta ${currentQuestionIndex + 1} de ${questions.length}`;
            quizContent.appendChild(counterDiv);

            // Question Text
            const questionElement = document.createElement('h2');
            questionElement.className = 'text-2xl font-bold mb-6 text-gray-800';
            questionElement.textContent = questionData.question;
            quizContent.appendChild(questionElement);

            // Options
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'flex flex-col space-y-3';
            questionData.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-button';
                button.textContent = option;
                button.dataset.index = index;
                button.onclick = () => selectAnswer(index);

                // If user has already answered this question, show their selection and correctness
                if (userAnswers[currentQuestionIndex] !== null) {
                    if (index === userAnswers[currentQuestionIndex]) {
                        button.classList.add('selected');
                    }
                    if (index === questionData.correctAnswerIndex) {
                        button.classList.add('correct');
                    } else if (index === userAnswers[currentQuestionIndex] && index !== questionData.correctAnswerIndex) {
                        button.classList.add('incorrect');
                    }
                    button.disabled = true; // Disable buttons after an answer is selected
                }
                optionsDiv.appendChild(button);
            });
            quizContent.appendChild(optionsDiv);

            // Feedback Message
            const feedbackDiv = document.createElement('div');
            feedbackDiv.id = 'feedbackMessage';
            feedbackDiv.className = 'feedback';
            quizContent.appendChild(feedbackDiv);

            // Next Button
            const nextButton = document.createElement('button');
            nextButton.id = 'nextButton';
            nextButton.className = 'nav-button';
            nextButton.textContent = (currentQuestionIndex === questions.length - 1) ? 'Ver Resultados' : 'Siguiente Pregunta';
            nextButton.onclick = goToNextQuestion;
            // The next button is always enabled now, so no need to disable it initially
            // nextButton.disabled = true;
            // nextButton.classList.add('opacity-50', 'cursor-not-allowed');
            quizContent.appendChild(nextButton);

            // If an answer was previously selected, show feedback immediately
            if (userAnswers[currentQuestionIndex] !== null) {
                const selectedOptionIndex = userAnswers[currentQuestionIndex];
                const feedbackMessage = document.getElementById('feedbackMessage');
                if (selectedOptionIndex === questionData.correctAnswerIndex) {
                    feedbackMessage.textContent = '¡Correcto!';
                    feedbackMessage.classList.add('correct-text');
                } else {
                    feedbackMessage.textContent = 'Incorrecto. La respuesta correcta era: ' + questionData.options[questionData.correctAnswerIndex];
                    feedbackMessage.classList.add('incorrect-text');
                }
            }
        }

        function selectAnswer(selectedIndex) {
            // Only allow selection if not already answered
            if (userAnswers[currentQuestionIndex] === null) {
                userAnswers[currentQuestionIndex] = selectedIndex;
                saveQuizState();

                const questionData = questions[currentQuestionIndex];
                const feedbackMessage = document.getElementById('feedbackMessage');
                const optionButtons = quizContent.querySelectorAll('.option-button');
                // const nextButton = document.getElementById('nextButton'); // Not needed for enabling/disabling here anymore

                // Update button styles and disable them
                optionButtons.forEach((button, index) => {
                    button.disabled = true;
                    if (index === selectedIndex) {
                        button.classList.add('selected');
                    }
                    if (index === questionData.correctAnswerIndex) {
                        button.classList.add('correct');
                    } else if (index === selectedIndex && index !== questionData.correctAnswerIndex) {
                        button.classList.add('incorrect');
                    }
                });

                // Show feedback
                if (selectedIndex === questionData.correctAnswerIndex) {
                    feedbackMessage.textContent = '¡Correcto!';
                    feedbackMessage.classList.add('correct-text');
                } else {
                    feedbackMessage.textContent = 'Incorrecto. La respuesta correcta era: ' + questionData.options[questionData.correctAnswerIndex];
                    feedbackMessage.classList.add('incorrect-text');
                }

                // The next button is always enabled now, so no need to enable it here
                // nextButton.disabled = false;
                // nextButton.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        function goToNextQuestion() {
            currentQuestionIndex++;
            saveQuizState();
            renderQuestion();
        }

        function displayResults() {
            quizContent.innerHTML = '';

            const resultsTitle = document.createElement('h2');
            resultsTitle.className = 'text-3xl font-bold mb-6 text-gray-800';
            resultsTitle.textContent = 'Resultados del Test';
            quizContent.appendChild(resultsTitle);

            let correctCount = 0;
            let incorrectCount = 0;
            let unansweredCount = 0;

            userAnswers.forEach((answerIndex, qIndex) => {
                if (answerIndex === null) {
                    unansweredCount++;
                } else if (answerIndex === questions[qIndex].correctAnswerIndex) {
                    correctCount++;
                } else {
                    incorrectCount++;
                }
            });

            const resultsDiv = document.createElement('div');
            resultsDiv.className = 'results-section';

            const correctP = document.createElement('p');
            correctP.className = 'correct-count';
            correctP.textContent = `Respuestas Correctas: ${correctCount}`;
            resultsDiv.appendChild(correctP);

            const incorrectP = document.createElement('p');
            incorrectP.className = 'incorrect-count';
            incorrectP.textContent = `Respuestas Incorrectas: ${incorrectCount}`;
            resultsDiv.appendChild(incorrectP);

            const unansweredP = document.createElement('p');
            unansweredP.className = 'unanswered-count';
            unansweredP.textContent = `Preguntas No Contestadas: ${unansweredCount}`;
            resultsDiv.appendChild(unansweredP);

            quizContent.appendChild(resultsDiv);

            // Add a button to restart the quiz from results page
            const restartButton = document.createElement('button');
            restartButton.className = 'nav-button mt-8';
            restartButton.textContent = 'Volver a Empezar';
            restartButton.onclick = resetQuiz;
            quizContent.appendChild(restartButton);
        }

        // --- Event Listeners and Initial Load ---
        document.addEventListener('DOMContentLoaded', () => {
            loadQuizState();
            renderQuestion();
        });

        // The reset button is always present in the HTML, so just attach the listener
        resetButton.addEventListener('click', resetQuiz);
    </script>
</body>
</html>
