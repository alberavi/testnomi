<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Puertos de Red</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">
    <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-2xl">
       <h1 style="color: #003366; font-family: 'Georgia', serif; font-size: 3rem; text-align: center; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);">TEST PUERTOS</h1>

        <div id="test-container" class="space-y-6">
            <!-- Contenedor de la pregunta y opciones -->
            <div id="question-card" class="bg-gray-50 p-6 rounded-lg shadow-sm">
                <p id="question-text" class="text-xl font-semibold text-gray-700 mb-4"></p>
                <div id="options-container" class="space-y-3">
                    <!-- Opciones de respuesta se insertarán aquí -->
                </div>
            </div>

            <!-- Controles del test -->
            <div class="flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0 sm:space-x-4">
                <div id="progress-text" class="text-gray-500 font-medium"></div>
                
                <div class="flex space-x-2 w-full sm:w-auto">
                    <!-- BOTÓN ANTERIOR AÑADIDO AQUÍ -->
                    <button id="prev-btn" class="flex-1 sm:flex-none bg-gray-400 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow disabled:opacity-50" disabled>
                        Anterior
                    </button>
                    <!-- FIN DEL BOTÓN ANTERIOR -->

                    <button id="restart-btn" class="flex-1 sm:flex-none bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow">
                        Reiniciar Test
                    </button>
                    <button id="next-btn" class="flex-1 sm:flex-none bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow">
                        Siguiente
                    </button>
                </div>
            </div>
        </div>

        <!-- Contenedor del resultado, inicialmente oculto -->
        <div id="result-container" class="hidden text-center space-y-6">
            <h2 class="text-2xl font-bold text-gray-800">Resultados del Test</h2>
            <div class="space-y-2 text-lg">
                <p class="text-green-600">Correctas: <span id="correct-count" class="font-bold">0</span></p>
                <p class="text-red-600">Incorrectas: <span id="incorrect-count" class="font-bold">0</span></p>
                <p class="text-yellow-600">Sin contestar: <span id="unanswered-count" class="font-bold">0</span></p>
            </div>
            <button id="restart-final-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg transition duration-200 shadow-md">
                Reiniciar Test
            </button>
        </div>
    </div>

    <script>
        // Array de preguntas, respuestas y opciones. Se utilizará el contenido del PDF y la URL de Wikipedia.
        const questions = [
            // Preguntas del PDF
             {
                question: "¿Qué puerto usa el protocolo de transferencia de archivos FTP para datos?",
                options: ["20", "21", "22", "23"],
                answer: "20"
            },
            {
                question: "¿Qué puerto usa el protocolo FTP para control?",
                options: ["20", "21", "22", "23"],
                answer: "21"
            },
            {
                question: "¿Qué puerto usa el protocolo TELNET para acceso remoto?",
                options: ["20", "21", "22", "23"],
                answer: "23"
            },
            {
                question: "¿Qué puerto usa el protocolo SSH para acceso seguro?",
                options: ["21", "22", "23", "25"],
                answer: "22"
            },
            {
                question: "¿Qué puerto usa el protocolo SMTP para envío de correo?",
                options: ["25", "53", "80", "110"],
                answer: "25"
            },
            {
                question: "¿Qué puerto usa el protocolo DNS para resolución de nombres?",
                options: ["25", "53", "80", "110"],
                answer: "53"
            },
            {
                question: "¿Qué puerto usa el protocolo HTTP para navegación web?",
                options: ["53", "80", "143", "443"],
                answer: "80"
            },
            {
                question: "¿Qué puerto usa el protocolo POP3 para recibir correo?",
                options: ["80", "110", "143", "443"],
                answer: "110"
            },
            {
                question: "¿Qué puerto usa el protocolo IMAP para recibir correo?",
                options: ["110", "143", "443", "993"],
                answer: "143"
            },
            {
                question: "¿Qué puerto usa el protocolo HTTPS para navegación web segura?",
                options: ["80", "143", "443", "993"],
                answer: "443"
            },
            {
                question: "¿Qué puerto usa el protocolo RDP para acceso remoto?",
                options: ["3389", "5900", "5060", "23"],
                answer: "3389"
            },
            {
                question: "¿Qué puerto usa el protocolo VNC para acceso remoto?",
                options: ["3389", "5900", "5060", "23"],
                answer: "5900"
            },
            {
                question: "¿Qué puerto usa el protocolo FTPs",
                options: ["20-21", "989-990", "521", "179"],
                answer: "989-990"
            },
            {
                question: "¿Qué puerto usa el protocolo RIP para routing interior?",
                options: ["5060", "520", "521", "179"],
                answer: "520"
            },
            {
                question: "¿Qué puerto usa el protocolo BGP para routing exterior?",
                options: ["123", "179", "520", "631"],
                answer: "179"
            },
            {
                question: "¿Qué puerto usa el protocolo NTP para sincronización de tiempo?",
                options: ["123", "179", "520", "631"],
                answer: "123"
            },
            {
                question: "¿Qué puerto usa el protocolo CUPS/IPP para impresión?",
                options: ["123", "179", "520", "631"],
                answer: "631"
            },
            // Preguntas adicionales de la URL de Wikipedia
            {
                question: "¿Qué puerto es comúnmente utilizado por el protocolo DHCP?",
                options: ["67/68", "25", "80", "53"],
                answer: "67/68"
            },
            {
                question: "¿Qué puerto se asocia con el protocolo RIPng?",
                options: ["88", "520", "521", "445"],
                answer: "521"
            },
            {
                question: "¿Qué puerto utiliza el protocolo LDAP (Lightweight Directory Access Protocol)?",
                options: ["53", "88", "389", "636"],
                answer: "389"
            },
            {
                question: "¿Qué puerto se usa para Secure LDAP (LDAPS)?",
                options: ["389", "443", "636", "995"],
                answer: "636"
            },
            {
                question: "¿Qué puerto es para el protocolo SMB/CIFS (Server Message Block)?",
                options: ["139", "445", "8080", "1433"],
                answer: "445"
            },
            {
                question: "¿Qué puerto utiliza MySQL por defecto?",
                options: ["1433", "3306", "5432", "50000"],
                answer: "3306"
            },
            {
                question: "¿Qué puerto usa Oracle por defecto?",
                options: ["1521 remplazado por 2483/2484", "1523 remplazado por 2483/2484", "1521 remplazado por 2484/2485", "1521 remplazado por 2485/2486"],
                answer: "1521 remplazado por 2483/2484"
            },
            {
                question: "¿Qué puerto usa Microsoft SQL Server?",
                options: ["1433/1434", "3305/3306", "1432/1433", "1435/1436"],
                answer: "1433/1434"
            },
            {
                question: "¿Qué puerto utiliza PostgreSQL?",
                options: ["1433", "3306", "5432", "1521"],
                answer: "5432"
            },
            {
                question: "¿Qué puerto usa el protocolo POP3?",
                options: ["110-995", "143-993", "1701", "2049"],
                answer: "110-995"
            },
            {
                question: "¿Qué puerto usa el protocolo SMTP?",
                options: ["25 y 463/587/2525", "25 y 464/587/2525", "25 y 465/587/2525", "25 y 465/587/2521"],
                answer: "25 y 465/587/2525"
            },
            {
                question: "¿Qué puerto usa el protocolo DHCP6?",
                options: ["545 y 546", "546 y 547", "547 y 548", "548 y 549"],
                answer: "546 y 547"
            },
			
			//revisar
            {
                question: "¿Qué puerto usa el protocolo HHTPs?",
                options: ["443", "80", "111", "8080"],
                answer: "443"
            },
            {
                question: "¿Qué puerto usa el servicio IMAPs",
                options: ["135", "141", "143", "993"],
                answer: "111"
            },
            {
                question: "¿Qué puerto usa el protocolo POP3?",
                options: ["110/990", "110/995", "110/993", "110/443"],
                answer: "110/995"
            },
            {
                question: "¿Qué puerto se utiliza para el protocolo SFTP",
                options: ["21/22", "22", "989/990", "20/21"],
                answer: "22"
            },
            {
                question: "¿Qué puerto se usa para el protocolo RTCP?",
                options: ["137", "138", "139", "445"],
                answer: "137"
            },
            {
                question: "¿Qué puerto se usa para NetBIOS Datagram Service?",
                options: ["137", "138", "139", "445"],
                answer: "138"
            },
            {
                question: "¿Qué puerto se utiliza para NetBIOS Session Service?",
                options: ["137", "138", "139", "445"],
                answer: "139"
            },
            {
                question: "¿Qué puerto se usa para el protocolo SNMP (Simple Network Management Protocol)?",
                options: ["161", "162", "179", "520"],
                answer: "161"
            },
            {
                question: "¿Qué puerto se usa para las traps de SNMP?",
                options: ["161", "162", "179", "520"],
                answer: "162"
            },
            {
                question: "¿Qué puerto utiliza el protocolo NFS?",
                options: ["2190", "2049", "2048", "2041"],
                answer: "2049"
            },
         
            {
                question: "¿Qué puerto se usa para el protocolo de impresión LPD (Line Printer Daemon)?",
                options: ["515", "631", "9100", "2049"],
                answer: "515"
            },
           
            {
                question: "¿Qué puerto se usa para HTTP Proxy?",
                options: ["8080", "443", "80", "3128"],
                answer: "8080"
            },
  
            {
                question: "¿Qué puerto utiliza el protocolo SMB (Server Message Block)?",
                options: ["139", "445", "8080", "1433"],
                answer: "139"
            }
        ];

        let currentQuestionIndex = 0;
        let userAnswers = [];
        let shuffledQuestions = [];

        // Elementos del DOM
        const testContainer = document.getElementById('test-container');
        const resultContainer = document.getElementById('result-container');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const progressText = document.getElementById('progress-text');
        const prevBtn = document.getElementById('prev-btn'); // Nuevo botón Anterior
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        const restartFinalBtn = document.getElementById('restart-final-btn');
        const correctCount = document.getElementById('correct-count');
        const incorrectCount = document.getElementById('incorrect-count');
        const unansweredCount = document.getElementById('unanswered-count');

        // Función para cargar el test
        function loadTest() {
            // Verificar si hay un test guardado en localStorage
            const savedState = JSON.parse(localStorage.getItem('quizState'));
            if (savedState) {
                currentQuestionIndex = savedState.currentQuestionIndex;
                userAnswers = savedState.userAnswers;
                shuffledQuestions = savedState.shuffledQuestions;
            } else {
                // Si no hay test guardado, iniciar uno nuevo
                currentQuestionIndex = 0;
                userAnswers = new Array(questions.length).fill(null);
                // Asignar las preguntas en orden fijo
                shuffledQuestions = [...questions];
                saveState();
            }

            renderQuestion();
            testContainer.classList.remove('hidden');
            resultContainer.classList.add('hidden');
        }

        // Función para guardar el estado actual del test
        function saveState() {
            const quizState = {
                currentQuestionIndex,
                userAnswers,
                shuffledQuestions
            };
            localStorage.setItem('quizState', JSON.stringify(quizState));
        }

        // Función para renderizar la pregunta actual
        function renderQuestion() {
            if (currentQuestionIndex < shuffledQuestions.length) {
                const currentQuestion = shuffledQuestions[currentQuestionIndex];
                questionText.textContent = `${currentQuestionIndex + 1}. ${currentQuestion.question}`;
                optionsContainer.innerHTML = '';
                
                const options = currentQuestion.options;
                
                options.forEach(option => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.className = 'w-full text-left p-3 rounded-lg border border-gray-300 hover:bg-gray-200 transition duration-150';
                    button.addEventListener('click', () => handleAnswer(option));
                    optionsContainer.appendChild(button);
                });

                // Si la pregunta ya fue respondida, mostrar el feedback
                if (userAnswers[currentQuestionIndex] !== null) {
                    showFeedback();
                }

                updateControls();
                updateProgress();
            } else {
                showResults();
            }
        }

        // Función para manejar la respuesta del usuario y mostrar el feedback
        function handleAnswer(selectedOption) {
            // Guardar la respuesta y mostrar el feedback, incluso si ya estaba contestada.
            // Si ya estaba contestada, se sobrescribe la respuesta.
            userAnswers[currentQuestionIndex] = selectedOption;
            saveState();
            showFeedback();
        }

        // Función para mostrar los colores de las respuestas
        function showFeedback() {
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            const selectedOption = userAnswers[currentQuestionIndex];

            Array.from(optionsContainer.children).forEach(button => {
                // Habilitamos el botón para que se pueda cambiar la respuesta si se desea
                button.disabled = false;
                
                const isCorrect = button.textContent === currentQuestion.answer;
                const isSelected = button.textContent === selectedOption;
                
                // Resetear estilos de botón
                button.classList.remove('bg-gray-50', 'hover:bg-gray-200', 'bg-green-500', 'text-white', 'hover:bg-green-600', 'bg-red-500', 'text-white', 'hover:bg-red-600');
                button.classList.add('bg-gray-50', 'hover:bg-gray-200');
                
                if (isCorrect && isSelected) {
                    // Correcta y seleccionada
                    button.classList.remove('bg-gray-50', 'hover:bg-gray-200');
                    button.classList.add('bg-green-500', 'text-white', 'hover:bg-green-600');
                } else if (isSelected) {
                    // Incorrecta y seleccionada
                    button.classList.remove('bg-gray-50', 'hover:bg-gray-200');
                    button.classList.add('bg-red-500', 'text-white', 'hover:bg-red-600');
                }
                
                // Mostrar siempre el botón correcto, incluso si no fue seleccionado
                if (isCorrect && !isSelected) {
                     button.classList.remove('bg-gray-50', 'hover:bg-gray-200');
                     button.classList.add('bg-green-300'); // Un color verde más claro para la respuesta correcta no seleccionada
                }
            });
        }

        // Función para actualizar el texto de progreso
        function updateProgress() {
            progressText.textContent = `Pregunta ${currentQuestionIndex + 1} de ${shuffledQuestions.length}`;
        }
        
        // Función para actualizar el estado de los botones (Anterior/Siguiente)
        function updateControls() {
            // Deshabilitar "Anterior" si es la primera pregunta
            prevBtn.disabled = currentQuestionIndex === 0;

            // Cambiar el texto de "Siguiente" a "Finalizar" en la última pregunta
            if (currentQuestionIndex === shuffledQuestions.length - 1) {
                nextBtn.textContent = 'Finalizar Test';
                nextBtn.classList.remove('bg-blue-500', 'hover:bg-blue-600');
                nextBtn.classList.add('bg-green-600', 'hover:bg-green-700');
            } else {
                nextBtn.textContent = 'Siguiente';
                nextBtn.classList.remove('bg-green-600', 'hover:bg-green-700');
                nextBtn.classList.add('bg-blue-500', 'hover:bg-blue-600');
            }
        }


        // Manejador del botón "Anterior"
        prevBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                saveState();
                renderQuestion();
            }
        });

        // Manejador del botón "Siguiente"
        nextBtn.addEventListener('click', () => {
            currentQuestionIndex++;
            saveState();
            renderQuestion();
        });

        // Función para mostrar los resultados
        function showResults() {
            testContainer.classList.add('hidden');
            resultContainer.classList.remove('hidden');

            let correct = 0;
            let incorrect = 0;
            let unanswered = 0;

            userAnswers.forEach((answer, index) => {
                if (answer === null) {
                    unanswered++;
                } else if (answer === shuffledQuestions[index].answer) {
                    correct++;
                } else {
                    incorrect++;
                }
            });

            correctCount.textContent = correct;
            incorrectCount.textContent = incorrect;
            unansweredCount.textContent = unanswered;

            // Borrar el estado del test al finalizar
            localStorage.removeItem('quizState');
        }

        // Reiniciar el test
        function restartQuiz() {
            localStorage.removeItem('quizState');
            loadTest();
        }

        restartBtn.addEventListener('click', restartQuiz);
        restartFinalBtn.addEventListener('click', restartQuiz);

        // Iniciar el test cuando se carga la página
        document.addEventListener('DOMContentLoaded', loadTest);
    </script>
</body>
</html>
