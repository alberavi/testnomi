<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Interactivo VLAN</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .container {
            max-width: 800px;
        }
        .correct {
            background-color: #d1fae5;
            border-color: #34d399;
        }
        .incorrect {
            background-color: #fee2e2;
            border-color: #f87171;
        }
        .correct-answer {
            background-color: #d1fae5;
            border-color: #34d399;
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center p-4 min-h-screen">
    <div class="container mx-auto p-6 bg-white rounded-xl shadow-lg">
       <h1 style="color: #003366; font-family: 'Georgia', serif; font-size: 3rem; text-align: center; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);">COMANDOS CISCO VLAN</h1>

        <div id="quiz-container">
            <!-- Las preguntas se cargarán aquí -->
        </div>

        <div id="navigation-buttons" class="mt-6 flex justify-between items-center">
            <button id="prev-button" class="px-6 py-3 bg-gray-500 text-white font-semibold rounded-lg shadow-md hover:bg-gray-600 transition duration-300">
                Anterior
            </button>
            <div class="flex space-x-4">
                <button id="restart-button" class="px-6 py-3 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-red-600 transition duration-300">
                    Reiniciar Test
                </button>
                <button id="next-button" class="px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600 transition duration-300">
                    Siguiente
                </button>
            </div>
        </div>

        <div id="results" class="hidden mt-8 text-center">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">Resultado del Test</h2>
            <div class="text-xl">
                <p>Respuestas correctas: <span id="correct-count" class="font-bold text-green-600">0</span></p>
                <p>Respuestas incorrectas: <span id="incorrect-count" class="font-bold text-red-600">0</span></p>
                <p>Preguntas sin contestar: <span id="unanswered-count" class="font-bold text-yellow-600">0</span></p>
            </div>
            <button id="restart-from-results-button" class="mt-6 px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600 transition duration-300">
                Reiniciar Test
            </button>
        </div>
    </div>

    <script>
        const quizData = [
            {
                question: "En un switch Cisco, ¿qué comando se utiliza para crear una VLAN con el ID 10?",
                options: [
                    "create vlan 10",
                    "vlan 10",
                    "vlan add 10",
                    "make vlan 10"
                ],
                answer: "vlan 10"
            },
            {
                question: "¿Qué comando se utiliza para asignar un puerto al modo de acceso y a una VLAN específica?",
                options: [
                    "switchport mode access",
                    "switchport access vlan [ID]",
                    "switchport mode trunk",
                    "switchport access"
                ],
                answer: "switchport access vlan [ID]"
            },
            {
                question: "Para visualizar las VLANs existentes en un switch Cisco, ¿qué comando se debe ejecutar?",
                options: [
                    "show vlan",
                    "display vlan",
                    "show running-config vlan",
                    "show all vlans"
                ],
                answer: "show vlan"
            },
            {
                question: "¿Qué comando se utiliza para configurar un puerto como enlace troncal?",
                options: [
                    "switchport link trunk",
                    "switchport mode trunk",
                    "interface trunk",
                    "set trunk"
                ],
                answer: "switchport mode trunk"
            },
            {
                question: "¿Qué comando permite ver la configuración de los enlaces troncales en un switch?",
                options: [
                    "show trunk",
                    "show interfaces trunk",
                    "display trunk status",
                    "show running-config"
                ],
                answer: "show interfaces trunk"
            },
            {
                question: "El comando 'no shutdown' se usa para:",
                options: [
                    "Eliminar una VLAN",
                    "Apagar una interfaz",
                    "Activar una interfaz",
                    "Guardar la configuración"
                ],
                answer: "Activar una interfaz"
            },
            {
                question: "Para entrar en modo de configuración global en un switch, el comando es:",
                options: [
                    "configure terminal",
                    "config-t",
                    "conf term",
                    "Las opciones a) y b) son correctas."
                ],
                answer: "Las opciones a) y b) son correctas."
            },
            {
                question: "¿Qué comando se usa para asignar un puerto a una VLAN?",
                options: [
                    "switchport mode access",
                    "switchport access vlan 1",
                    "switchport trunk allowed vlan add 1",
                    "switchport port-security"
                ],
                answer: "switchport access vlan 1"
            },
            {
                question: "En un switch Cisco, el comando “show vlan brief” permite:",
                options: [
                    "Visualizar solo las VLANs con hosts asignados.",
                    "Ver un resumen de las VLANs existentes y sus puertos.",
                    "Configurar una VLAN rápidamente.",
                    "Borrar una VLAN del switch."
                ],
                answer: "Ver un resumen de las VLANs existentes y sus puertos."
            },
            {
                question: "¿Qué comando permite guardar la configuración de un switch en la memoria no volátil?",
                options: [
                    "write",
                    "copy running-config startup-config",
                    "save config",
                    "Las opciones a) y b) son correctas."
                ],
                answer: "Las opciones a) y b) son correctas."
            },
            {
                question: "Para eliminar la VLAN 20 de un switch, se utiliza el comando:",
                options: [
                    "delete vlan 20",
                    "no vlan 20",
                    "vlan 20 remove",
                    "clear vlan 20"
                ],
                answer: "no vlan 20"
            },
            {
                question: "¿Qué comando se usa para asignar un nombre a una VLAN?",
                options: [
                    "vlan name",
                    "name [nombre]",
                    "vlan [ID] name [nombre]",
                    "name [ID]"
                ],
                answer: "name [nombre]"
            },
            {
                question: "¿Cuál es el comando para entrar en la configuración de una interfaz específica, por ejemplo, FastEthernet 0/1?",
                options: [
                    "interface fa0/1",
                    "int fastethernet 0/1",
                    "interface fast 0/1",
                    "Las opciones a) y b) son correctas."
                ],
                answer: "Las opciones a) y b) son correctas."
            },
            {
                question: "¿Qué comando se usa para configurar una interfaz como enlace de acceso?",
                options: [
                    "switchport mode access",
                    "switchport mode trunk",
                    "access-port",
                    "switchport access"
                ],
                answer: "switchport mode access"
            },
            {
                question: "Para configurar VTP en modo servidor, ¿qué comando se utiliza?",
                options: [
                    "vtp mode server",
                    "vtp server",
                    "set vtp mode server",
                    "configure vtp server"
                ],
                answer: "vtp mode server"
            },
            {
                question: "¿Qué comando se usa para configurar VTP en modo cliente?",
                options: [
                    "vtp mode client",
                    "vtp client",
                    "set vtp mode client",
                    "configure vtp client"
                ],
                answer: "vtp mode client"
            },
            {
                question: "¿Qué comando se utiliza para establecer el dominio VTP?",
                options: [
                    "vtp domain [nombre]",
                    "set vtp domain [nombre]",
                    "vtp domain name [nombre]",
                    "vtp set domain [nombre]"
                ],
                answer: "vtp domain [nombre]"
            },
            {
                question: "¿Qué comando muestra el estado del VTP?",
                options: [
                    "show vtp status",
                    "display vtp",
                    "show vtp",
                    "show all vtp"
                ],
                answer: "show vtp status"
            },
            {
                question: "El comando 'switchport trunk native vlan XX' se usa para:",
                options: [
                    "Asignar la VLAN nativa a un puerto de acceso.",
                    "Establecer la VLAN nativa para enlaces troncales sin etiquetar.",
                    "Eliminar la VLAN nativa.",
                    "Añadir una VLAN nativa."
                ],
                answer: "Establecer la VLAN nativa para enlaces troncales sin etiquetar."
            },
            {
                question: "Para verificar las nuevas VLANs y sus nombres, el comando es:",
                options: [
                    "show vlan brief",
                    "show running-config",
                    "show interfaces status",
                    "show vlan all"
                ],
                answer: "show vlan brief"
            },
            {
                question: "¿Qué comando se utiliza para visualizar los hosts asignados a la VLAN 1?",
                options: [
                    "show vlan brief",
                    "show hosts vlan 1",
                    "display vlan 1 hosts",
                    "show mac address-table"
                ],
                answer: "show vlan brief"
            },
            {
                question: "¿Qué comando permite configurar una interfaz de un switch como enlace de acceso para una VLAN específica?",
                options: [
                    "switchport mode access",
                    "switchport access vlan",
                    "switchport access vlan [ID]",
                    "switchport link access"
                ],
                answer: "switchport access vlan [ID]"
            },
            {
                question: "¿Qué comando es necesario para guardar los cambios de configuración en la memoria no volátil?",
                options: [
                    "save",
                    "write memory",
                    "copy run start",
                    "Todas las anteriores son correctas."
                ],
                answer: "copy run start"
            },
            {
                question: "El comando 'switchport access vlan 1' permite:",
                options: [
                    "Asignar un puerto a la VLAN 1.",
                    "Asignar el puerto 1 del switch a la VLAN donde estamos situados en la consola del switch.",
                    "Visualizar todos los hosts asignados a la VLAN 1.",
                    "Asignar todos los hosts conectados a cualquier puerto del switch a la VLAN 1."
                ],
                answer: "Asignar un puerto a la VLAN 1."
            },
            {
                question: "¿Qué comando se utiliza para salir del modo de configuración de interfaz?",
                options: [
                    "exit",
                    "end",
                    "quit",
                    "close"
                ],
                answer: "exit"
            },
            {
                question: "El comando 'show interface fa0/1 switchport' se usa para:",
                options: [
                    "Ver el estado del puerto fa0/1 y sus configuraciones de switchport.",
                    "Configurar el puerto fa0/1.",
                    "Borrar la configuración del puerto fa0/1.",
                    "Ver solo la dirección IP del puerto fa0/1."
                ],
                answer: "Ver el estado del puerto fa0/1 y sus configuraciones de switchport."
            },
            {
                question: "Para configurar una contraseña de dominio VTP, el comando es:",
                options: [
                    "vtp password [contraseña]",
                    "set vtp password [contraseña]",
                    "vtp domain password [contraseña]",
                    "password [contraseña]"
                ],
                answer: "vtp password [contraseña]"
            },
            {
                question: "Si queremos configurar un switch como cliente VTP, ¿debe pertenecer al mismo dominio que el servidor?",
                options: [
                    "Sí, es obligatorio.",
                    "No, pueden estar en dominios diferentes.",
                    "Solo si son del mismo fabricante.",
                    "No, el cliente siempre tiene un dominio diferente."
                ],
                answer: "Sí, es obligatorio."
            },
            {
                question: "¿Qué comando se usa para ver un resumen de las interfaces del switch?",
                options: [
                    "show interfaces brief",
                    "show interfaces",
                    "show ip interface brief",
                    "Ambas a) y c) son correctas."
                ],
                answer: "Ambas a) y c) son correctas."
            },
            {
                question: "¿Qué modo de configuración te permite configurar los puertos de un switch?",
                options: [
                    "Modo de configuración global",
                    "Modo de configuración de interfaz",
                    "Modo EXEC de usuario",
                    "Modo EXEC privilegiado"
                ],
                answer: "Modo de configuración de interfaz"
            }
        ];

        const quizContainer = document.getElementById('quiz-container');
        const resultsContainer = document.getElementById('results');
        const correctCountSpan = document.getElementById('correct-count');
        const incorrectCountSpan = document.getElementById('incorrect-count');
        const unansweredCountSpan = document.getElementById('unanswered-count');
        const nextButton = document.getElementById('next-button');
        const prevButton = document.getElementById('prev-button');
        const restartButton = document.getElementById('restart-button');
        const restartFromResultsButton = document.getElementById('restart-from-results-button');

        let correctAnswers = 0;
        let incorrectAnswers = 0;
        let answeredQuestions = new Set();
        let currentQuizState = [];
        let currentQuestionIndex = 0;

        // Función para guardar el estado del test en localStorage
        function saveQuizState() {
            localStorage.setItem('vlanQuizState', JSON.stringify({
                correctAnswers,
                incorrectAnswers,
                answeredQuestions: Array.from(answeredQuestions),
                currentQuizState,
                currentQuestionIndex
            }));
        }

        // Función para cargar el estado del test desde localStorage
        function loadQuizState() {
            const savedState = JSON.parse(localStorage.getItem('vlanQuizState'));
            if (savedState && savedState.currentQuizState) {
                correctAnswers = savedState.correctAnswers;
                incorrectAnswers = savedState.incorrectAnswers;
                answeredQuestions = new Set(savedState.answeredQuestions);
                currentQuizState = savedState.currentQuizState;
                currentQuestionIndex = savedState.currentQuestionIndex;
                if (currentQuestionIndex >= currentQuizState.length) {
                    showResults();
                } else {
                    renderQuestion();
                }
            } else {
                startNewQuiz();
            }
        }

        // Función para empezar un nuevo test
        function startNewQuiz() {
            correctAnswers = 0;
            incorrectAnswers = 0;
            answeredQuestions.clear();
            currentQuizState = [...quizData];
            currentQuestionIndex = 0;
            // Clear all local storage for the quiz
            localStorage.removeItem('vlanQuizState');
            for(let i = 0; i < quizData.length; i++) {
                localStorage.removeItem(`answer-${i}`);
            }
            quizContainer.classList.remove('hidden'); // Mostrar el contenedor del quiz
            renderQuestion();
            resultsContainer.classList.add('hidden');
            document.getElementById('navigation-buttons').classList.remove('hidden');
        }

        // Función para renderizar una pregunta
        function renderQuestion() {
            quizContainer.innerHTML = '';
            if (currentQuestionIndex >= currentQuizState.length) {
                showResults();
                return;
            }

            const q = currentQuizState[currentQuestionIndex];
            const questionElement = document.createElement('div');
            questionElement.className = 'question-card bg-gray-50 p-6 rounded-lg shadow-md mb-6';
            questionElement.innerHTML = `
                <h3 class="text-lg font-semibold mb-4 text-gray-700">Pregunta ${currentQuestionIndex + 1} de ${currentQuizState.length}. ${q.question}</h3>
            `;

            const optionsContainer = document.createElement('div');
            optionsContainer.className = 'space-y-3';
            const optionsToRender = [...q.options];

            optionsToRender.forEach(option => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option px-4 py-3 border-2 border-gray-200 rounded-md cursor-pointer transition-colors duration-200 hover:bg-gray-100';
                optionElement.textContent = option;
                optionElement.dataset.option = option;
                
                if (answeredQuestions.has(currentQuestionIndex)) {
                    const isCorrect = option === q.answer;
                    const isSelected = localStorage.getItem(`answer-${currentQuestionIndex}`) === option;
                    if (isCorrect) {
                        optionElement.classList.add('correct-answer', 'border-green-400');
                    }
                    if (isSelected && !isCorrect) {
                        optionElement.classList.add('incorrect', 'border-red-400');
                    }
                    optionElement.classList.remove('cursor-pointer', 'hover:bg-gray-100');
                } else {
                    optionElement.addEventListener('click', handleOptionClick);
                }
                optionsContainer.appendChild(optionElement);
            });
            
            questionElement.appendChild(optionsContainer);
            quizContainer.appendChild(questionElement);

            // Control de visibilidad de los botones
            prevButton.style.visibility = currentQuestionIndex > 0 ? 'visible' : 'hidden';
            if (currentQuestionIndex >= currentQuizState.length - 1) {
                nextButton.textContent = 'Ver Resultados';
            } else {
                nextButton.textContent = 'Siguiente';
            }
        }

        // Manejador del clic en una opción
        function handleOptionClick(event) {
            const selectedOption = event.target;

            if (answeredQuestions.has(currentQuestionIndex)) {
                return;
            }

            const questionData = currentQuizState[currentQuestionIndex];
            const isCorrect = selectedOption.textContent === questionData.answer;

            answeredQuestions.add(currentQuestionIndex);
            localStorage.setItem(`answer-${currentQuestionIndex}`, selectedOption.textContent);

            if (isCorrect) {
                correctAnswers++;
                selectedOption.classList.add('correct', 'border-green-400');
            } else {
                incorrectAnswers++;
                selectedOption.classList.add('incorrect', 'border-red-400');
                const options = document.querySelectorAll('.option');
                options.forEach(option => {
                    if (option.textContent === questionData.answer) {
                        option.classList.add('correct-answer', 'border-green-400');
                    }
                });
            }

            // Desactivar clics en las opciones de esta pregunta
            const options = document.querySelectorAll('.option');
            options.forEach(option => {
                option.removeEventListener('click', handleOptionClick);
                option.classList.remove('cursor-pointer', 'hover:bg-gray-100');
            });

            saveQuizState();
        }

        // Función para mostrar los resultados
        function showResults() {
            quizContainer.classList.add('hidden');
            document.getElementById('navigation-buttons').classList.add('hidden');
            resultsContainer.classList.remove('hidden');

            // Calcular y mostrar resultados
            correctCountSpan.textContent = correctAnswers;
            incorrectCountSpan.textContent = incorrectAnswers;

            let unansweredCount = 0;
            for(let i = 0; i < currentQuizState.length; i++) {
                if (!answeredQuestions.has(i)) {
                    unansweredCount++;
                }
            }
            unansweredCountSpan.textContent = unansweredCount;
        }

        // Event listener para el botón de siguiente
        nextButton.addEventListener('click', () => {
            currentQuestionIndex++;
            renderQuestion();
        });

        // Event listener para el botón de anterior
        prevButton.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        });

        // Event listener para el botón de reiniciar
        restartButton.addEventListener('click', startNewQuiz);
        restartFromResultsButton.addEventListener('click', startNewQuiz);

        // Cargar el estado del test al cargar la página
        window.addEventListener('load', loadQuizState);

    </script>
</body>
</html>
