<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TEMA 5</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Light gray background */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to the top */
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }
        .container {
            background-color: #ffffff; /* White background for the container */
            padding: 30px;
            border-radius: 15px; /* Rounded corners */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* Soft shadow */
            max-width: 800px;
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .question-card {
            background-color: #f9fafb; /* Lighter background for question cards */
            padding: 25px;
            border-radius: 10px;
            border: 1px solid #e5e7eb; /* Light border */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        .question-text {
            font-size: 1.25rem; /* Larger font size for questions */
            font-weight: 600; /* Semi-bold */
            margin-bottom: 20px;
            color: #1f2937; /* Darker text color */
        }
        .answer-button {
            display: block;
            width: 100%;
            text-align: left;
            padding: 12px 20px;
            margin-bottom: 10px;
            border-radius: 8px;
            background-color: #eff6ff; /* Light blue background */
            color: #1e40af; /* Darker blue text */
            border: 1px solid #bfdbfe; /* Blue border */
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            font-size: 1rem;
            font-weight: 500;
        }
        .answer-button:hover:not(.correct):not(.incorrect):not(.selected) {
            background-color: #dbeafe; /* Lighter blue on hover */
            border-color: #93c5fd;
        }
        .answer-button.selected {
            background-color: #bfdbfe; /* Selected answer */
            border-color: #60a5fa;
            color: #1e40af;
        }
        .answer-button.correct {
            background-color: #d1fae5; /* Green for correct */
            border-color: #34d399;
            color: #065f46;
            font-weight: 600;
        }
        .answer-button.incorrect {
            background-color: #fee2e2; /* Red for incorrect */
            border-color: #f87171;
            color: #991b1b;
            font-weight: 600;
        }
        .feedback {
            margin-top: 10px;
            font-size: 0.95rem;
            font-weight: 500;
            padding: 8px 15px;
            border-radius: 6px;
            display: none; /* Hidden by default */
        }
        .feedback.correct-feedback {
            background-color: #ecfdf5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }
        .feedback.incorrect-feedback {
            background-color: #fef2f2;
            color: #991b1b;
            border: 1px solid #fca5a5;
        }
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center; /* Align items vertically in the center */
            margin-top: 20px;
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
            gap: 10px; /* Space between buttons */
        }
        .nav-button {
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            flex-grow: 1; /* Allow buttons to grow */
            min-width: 120px; /* Minimum width for buttons */
        }
        .nav-button:active {
            transform: translateY(1px);
        }
        .prev-button {
            background-color: #e0e7ff; /* Light indigo */
            color: #3730a3; /* Darker indigo */
            border: 1px solid #a5b4fc;
        }
        .prev-button:hover {
            background-color: #c7d2fe;
        }
        .next-button {
            background-color: #4f46e5; /* Indigo */
            color: #ffffff;
            border: 1px solid #4f46e5;
        }
        .next-button:hover {
            background-color: #4338ca;
        }
        .submit-button {
            background-color: #10b981; /* Green */
            color: #ffffff;
            border: 1px solid #10b981;
        }
        .submit-button:hover {
            background-color: #059669;
        }
        .restart-button-quiz { /* New class for the always-visible restart button */
            background-color: #ef4444; /* Red */
            color: #ffffff;
            border: 1px solid #ef4444;
            /* No margin-top here as it's inside flex container */
            /* width: 100%; Removed as it's now part of flex */
            text-align: center;
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            flex-grow: 1; /* Allow button to grow */
            min-width: 120px; /* Minimum width for button */
        }
        .restart-button-quiz:hover {
            background-color: #dc2626;
        }
        .restart-button-quiz:active {
            transform: translateY(1px);
        }
        /* Styling for the restart button on the results page */
        .results-restart-button {
            background-color: #ef4444; /* Red */
            color: #ffffff;
            border: 1px solid #ef4444;
            margin-top: 20px;
            width: auto; /* Adjust width for results page button */
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .results-restart-button:hover {
            background-color: #dc2626;
        }
        .results-restart-button:active {
            transform: translateY(1px);
        }

        .results-card {
            background-color: #f0f9ff; /* Light blue for results */
            padding: 30px;
            border-radius: 15px;
            border: 1px solid #bfdbfe;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            text-align: center;
            display: none; /* Hidden by default */
        }
        .results-card h2 {
            font-size: 2rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 20px;
        }
        .results-summary p {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: #374151;
        }
        .results-summary .correct-count {
            color: #065f46;
            font-weight: 600;
        }
        .results-summary .incorrect-count {
            color: #991b1b;
            font-weight: 600;
        }
        .results-summary .unanswered-count {
            color: #4b5563;
            font-weight: 600;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="color: #003366; font-family: 'Georgia', serif; font-size: 2rem; text-align: center; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);">TEMA 5</h1>
        <div id="quiz-container">
            <!-- Questions will be loaded here by JavaScript -->
        </div>
        <div class="navigation-buttons">
            <button id="prev-button" class="nav-button prev-button hidden">Anterior</button>
            <button id="restart-button-quiz" class="restart-button-quiz">Reiniciar Test</button> <!-- Always visible restart button -->
            <button id="next-button" class="nav-button next-button">Siguiente</button>
            <button id="submit-button" class="nav-button submit-button hidden">Finalizar Test</button>
        </div>

        <div id="results-container" class="results-card">
            <h2>Resultados del Test</h2>
            <div class="results-summary">
                <p>Respuestas Correctas: <span id="correct-count" class="correct-count">0</span></p>
                <p>Respuestas Incorrectas: <span id="incorrect-count" class="incorrect-count">0</span></p>
                <p>Preguntas Sin Contestar: <span id="unanswered-count" class="unanswered-count">0</span></p>
            </div>
            <button id="results-restart-button" class="results-restart-button mt-6">Reiniciar Test</button>
        </div>
    </div>

    <script>
        // Array de objetos para almacenar las preguntas y respuestas
        const questions = [
            {
                question: "Son órganos superiores de los Ministerios:",
                answers: [
                    "Los Secretarios de Estado.",
                    "Los Subsecretarios.",
                    "Los Secretarios Generales.",
                    "Los Secretarios Generales Técnicos."
                ],
                correctAnswer: "Los Secretarios de Estado."
            },
            {
                question: "Las incompatibilidades de los miembros del Gobierno se regulan por:",
                answers: [
                    "Ley Ordinaria.",
                    "Ley Orgánica.",
                    "Reglamento.",
                    "Real Decreto de Consejo de Ministros."
                ],
                correctAnswer: "Ley Ordinaria."
            },
            {
                question: "Los Secretarios de Estado son cesados por:",
                answers: [
                    "Orden del Ministro del que dependan.",
                    "Acuerdo del Consejo de Ministros.",
                    "Real Decreto-Ley.",
                    "Real Decreto de Consejo de Ministros."
                ],
                correctAnswer: "Real Decreto de Consejo de Ministros."
            },
            {
                question: "Constituye una responsabilidad de los Secretarios de Estado:",
                answers: [
                    "Nombrar y separar a los Directores Generales.",
                    "La ejecución de la acción de Gobierno en un sector de actividad específica de un Departamento .",
                    "Otorgar o proponer las recompensas que procedan fuera de la Secretaría de Estado.",
                    "Celebrar los contratos y convenios del Departamento cuando lo autorice el Ministro del Departamento."
                ],
                correctAnswer: "La ejecución de la acción de Gobierno en un sector de actividad específica de un Departamento ."
            },
            {
                question: "Los Directores Generales de los Departamentos Ministeriales son nombrados y separados:",
                answers: [
                    "Por Acuerdo de Consejo de Ministros.",
                    "Por Real Decreto del Ministro del Departamento.",
                    "Por Real Decreto del Consejo de Ministros.",
                    "Por Orden Ministerial del Ministro del Departamento."
                ],
                correctAnswer: "Por Real Decreto del Consejo de Ministros."
            },
            {
                question: "No son Altos Cargos de la Administración General del Estado:",
                answers: [
                    "Los Secretarios Generales.",
                    "Los Directores Generales.",
                    "Los Subdirectores Generales.",
                    "Los Secretarios de Estado."
                ],
                correctAnswer: "Los Subdirectores Generales."
            },
            {
                question: "Según establece la actual regulación de los altos cargos, no se consideran intereses personales:",
                answers: [
                    "Los intereses familiares incluyendo parientes dentro del cuarto grado de consanguinidad.",
                    "Los intereses familiares incluyendo los de su cónyuge.",
                    "Los intereses familiares incluyendo parientes dentro del cuarto grado de afinidad.",
                    "Los intereses familiares incluyendo a la persona con quien conviva en análoga relación de afectividad que los del cónyuge."
                ],
                correctAnswer: "Los intereses familiares incluyendo parientes dentro del cuarto grado de afinidad"
            },
            {
                question: "¿Qué rango ostentan los Subdelegados del Gobierno?",
                answers: [
                    "El mismo que el Delegado del Gobierno cuando lo sustituye.",
                    "Director General.",
                    "Subdirector General.",
                    "Consejero Técnico."
                ],
                correctAnswer: "Subdirector General."
            },
            {
                question: "Los órganos de la Administración del Estado se modifican y suprimen por:",
                answers: [
                    "Real Decreto del Consejo de Ministro de acuerdo con la Ley.",
                    "Los Reglamentos.",
                    "Los Decretos-leyes.",
                    "Las Órdenes ministeriales."
                ],
                correctAnswer: "Real Decreto del Consejo de Ministro de acuerdo con la Ley."
            },
            {
                question: "¿Quién puede modificar la relación de puestos de trabajo de un Ministerio?",
                answers: [
                    "El Consejo de Ministros.",
                    "El Presidente del Gobierno.",
                    "El Ministro de Hacienda y Función Pública.",
                    "El Ministro del Departamento afectado."
                ],
                correctAnswer: "El Ministro del Departamento afectado."
            },
            {
                question: "La suspensión firme de funciones impuesta en virtud de sanción disciplinaria no podrá exceder de:",
                answers: [
                    "Doce meses.",
                    "Un año.",
                    "Seis años.",
                    "Dos años"
                ],
                correctAnswer: "Seis años."
            },
            {
                question: "La reserva de puesto de trabajo de la funcionaria víctima de violencia podrá prorrogarse por un periodo máximo de:",
                answers: [
                    "Veinticuatro meses.",
                    "Dieciocho meses.",
                    "Doce meses.",
                    "Seis meses."
                ],
                correctAnswer: "Dieciocho meses."
            },
            {
                question: "Las funcionarias víctimas de violencia de género, para hacer efectiva su protección o su derecho a la asistencia social integral, tendrán derecho a solicitar la situación de excedencia:",
                answers: [
                    "Durante los ocho primeros meses tendrán derecho a reserva del puesto de trabajo.",
                    "Durante los seis primeros meses tendrán derecho a percibir las retribuciones íntegras.",
                    "La b) es correcta pero no podrán percibir complementos asociados al rendimiento.",
                    "La b) es correcta pero el derecho solo alcanza a los dos primeros meses."
                ],
                correctAnswer: "La b) es correcta pero el derecho solo alcanza a los dos primeros meses."
            },
            {
                question: "Los funcionarios en excedencia por cuidado de un familiar:",
                answers: [
                    "Podrán participar en los cursos de formación que convoque la Administración pasados dos años en este tipo de excedencia.",
                    "No podrán participar en cursos de formación.",
                    "Podrán participar en estos cursos sin ningún tipo de limitación.",
                    "Tendrán prioridad para realizar cursos de formación una vez que haya terminado la excedencia."
                ],
                correctAnswer: "Podrán participar en estos cursos sin ningún tipo de limitación."
            },
            {
                question: "El tiempo de permanencia en el supuesto de excedencia por cuidado de un hijo:",
                answers: [
                    "Lleva aparejada la reserva del puesto de trabajo durante un plazo de un año.",
                    "Lleva aparejada la reserva del puesto de trabajo durante un plazo de dos años.",
                    "Lleva aparejada la reserva del puesto de trabajo durante un plazo de tres años.",
                    "No lleva aparejada la reserva del puesto de trabajo."
                ],
                correctAnswer: "Lleva aparejada la reserva del puesto de trabajo durante un plazo de dos años."
            },
            {
                question: "La suspensión de funciones:",
                answers: [
                    "No podrá exceder de tres años cuando tenga su origen en una sanción disciplinaria.",
                    "No podrá acordarse con carácter provisional con ocasión de la tramitación de un procedimiento judicial hasta que el mísmo concluya con sentencia firme.",
                    "El funcionario declarado suspendido de funciones podrá prestar servicios en otra Administración Pública.",
                    "Determinará la pérdida del puesto de trabajo cuando exceda de seis meses."
                ],
                correctAnswer: "Determinará la pérdida del puesto de trabajo cuando exceda de seis meses."
            },
            {
                question: "La declaración del funcionario en excedencia por cuidado de familiares, cuando el familiar no sea el hijo, requiere:",
                answers: [
                    "Que se encuentre a su cargo.",
                    "Que el parentesco sea hasta segundo grado de consanguinidad o cuarto grado de afinidad.",
                    "Que no perciba ningún tipo de pensión.",
                    "Que si desempeña actividad retribuida, ésta no exceda del salario mínimo interprofesional."
                ],
                correctAnswer: "Que se encuentre a su cargo."
            },
            {
                question: "Los funcionarios de carrera tendrán derecho a un período de excedencia para atender el cuidado de cada hijo:",
                answers: [
                    "No superior a cinco años cuando el hijo lo sea por naturaleza.",
                    "No superior a tres años cuando el hijo lo sea por adopción.",
                    "No superior a un año cuando el hijo lo sea por preadopción.",
                    "No superior a tres años en cualquiera de las situaciones anteriores."
                ],
                correctAnswer: "No superior a tres años en cualquiera de las situaciones anteriores."
            },
            {
                question: "Los funcionarios de carrera podrán obtener la excedencia voluntaria por interés particular cuando hayan prestado servicios efectivos durante un periodo mínimo:",
                answers: [
                    "De tres años en la misma Administración Pública ó cinco en distintas Administraciones Públicas.",
                    "De cinco años en cualquiera de las Administraciones Públicas.",
                    "La b) es correcta aunque las Leyes de Función Pública podrán establecer una duración menor.",
                    "De cinco años en la Administración General del Estado ó tres en otras Administraciones."
                ],
                correctAnswer: "La b) es correcta aunque las Leyes de Función Pública podrán establecer una duración menor."
            },
            {
                question: "En relación con la excedencia voluntaria por interés particular:",
                answers: [
                    "Los que se encuentren en esta excedencia no devengarán retribuciones pero les será computable el tiempo que permanezcan en esta situación a efectos de derechos del régimen de Seguridad Social.",
                    "Podrá declararse subordinada a las necesidades del servicio incluso cuando se le instruya al funcionario expediente disciplinario.",
                    "En las leyes de la Función Pública que se dicten en desarrollo del Estatuto Básico podrá establecerse un periodo mínimo de permanencia en la misma .",
                    "La denegación por razones de necesidades del servicio deberá realizarse, siempre que sea posible, de forma motivada."
                ],
                correctAnswer: "En las leyes de la Función Pública que se dicten en desarrollo del Estatuto Básico podrá establecerse un periodo mínimo de permanencia en la misma ."
            },
            {
                question: "Según el artículo 16.3 d) del TREBEP la promoción interna horizontal consiste en:",
                answers: [
                    "El acceso a cuerpos o escalas del mismo Subgrupo profesional.",
                    "El ascenso en la estructura de puestos de trabajo.",
                    "En la progresión de grado, categoría, escalón u otros conceptos análogos.",
                    "El acceso a cuerpos o escalas del mismo Grupo profesional."
                ],
                correctAnswer: "El acceso a cuerpos o escalas del mismo Subgrupo profesional."
            },
            {
                question: "Los empleados públicos tienen derechos individuales que se ejercen de forma colectiva, excepto:",
                answers: [
                    "La libertad sindical.",
                    "La participación en la determinación del horario de trabajo.",
                    "El ejercicio de la huelga.",
                    "El planteamiento de conflictos colectivos."
                ],
                correctAnswer: "La participación en la determinación del horario de trabajo."
            },
            {
                question: "La carrera profesional la define, el artículo 16.2 del TREBEP, como el conjunto ordenado de oportunidades de ascenso y expectativas de progreso profesional conforme a los principios de:",
                answers: [
                    "Igualdad, mérito y capacidad.",
                    "Esfuerzo, mérito y capacidad.",
                    "Igualdad y capacidad.",
                    "Mérito y capacidad."
                ],
                correctAnswer: "Igualdad, mérito y capacidad."
            },
            {
                question: "¿Quién preside la Mesa General de Negociación de las Administraciones Públicas, según el artículo 36 del TREBEP?",
                answers: [
                    "La Administración General del Estado.",
                    "La Federación Española de Municipios y Provincias en función de las materias a negociar.",
                    "El representante de la Administración Autonómica por razón de la materia a tratar.",
                    "Es una Presidencia rotatoria entre todas las Administraciones participantes."
                ],
                correctAnswer: "La Administración General del Estado."
            },
            {
                question: "Entre los principios generales del Derecho a la negociación colectiva, representación y participación institucional que dispone el artículo 31.6 del TREBEP, se determina la legitimación para la interposición de recursos en vía administrativa y jurisdiccional, contra las resoluciones de los órganos de selección. ¿Quién ostenta esa legitimación?",
                answers: [
                    "La Mesa General de Negociación.",
                    "Las Administraciones Públicas aunque no hayan participado en las elecciones sindicales.",
                    "Las Organizaciones Sindicales, más representativas en el ámbito de la Función Pública.",
                    "Cualquier Organización Sindical que haya obtenido el 5 por ciento o más de los representantes en las elecciones para Delegados."
                ],
                correctAnswer: "Las Organizaciones Sindicales, más representativas en el ámbito de la Función Pública."
            },
            {
                question: "¿Quién ejerce sólo funciones expresamente calificadas de confianza o asesoramiento especial?",
                answers: [
                    "Los funcionarios de carrera.",
                    "El personal laboral fijo.",
                    "El personal eventual.",
                    "El personal funcionario de carrera que desempeñe puestos de trabajo cuyo sistema de provisión sea el de libre designación."
                ],
                correctAnswer: "El personal eventual."
            },
            {
                question: "¿Quién será competente para nombrar funcionario de carrera a un aspirante que haya superado las pruebas selectivas de acceso al Cuerpo de Abogados del Estado, Cuerpo adscrito al Ministerio de Justicia?",
                answers: [
                    "El Ministro de Hacienda y Función Pública.",
                    "El Secretario de Estado de Función Pública.",
                    "El Ministro de Justicia.",
                    "El Secretario de Estado de Justicia."
                ],
                correctAnswer: "El Secretario de Estado de Función Pública."
            },
            {
                question: "De acuerdo con el artículo 60.1 del TREBEP, los órganos de selección de los procesos selectivos para el acceso al empleo público:",
                answers: [
                    "Deben estar constituidos por un número par de miembros no inferior a cuatro.",
                    "Serán colegiados y su composición deberá ajustarse a los principios de imparcialidad y profesionalidad de sus miembros.",
                    "Estar presididos por personal de designación política.",
                    "Contar con algún miembro que actúe en representación de las organizaciones sindicales."
                ],
                correctAnswer: "Serán colegiados y su composición deberá ajustarse a los principios de imparcialidad y profesionalidad de sus miembros."
            },
            {
                question: "Los nombramientos de los funcionarios de carrera de la Administración General del Estado, deben publicarse necesariamente:",
                answers: [
                    "En los tablones de anuncios de las Delegaciones y Subdelegaciones del Gobierno.",
                    "En los lugares donde se hayan celebrado las pruebas del proceso selectivo.",
                    "En el Diario Oficial de la Unión Europea.",
                    "En el Boletín Oficial del Estado."
                ],
                correctAnswer: "En el Boletín Oficial del Estado."
            },
            {
                question: "La determinación, en el ámbito de la Administración General del Estado, de los Cuerpos, Escalas, plazas o empleos a los que podrán acceder los nacionales de los demás Estados miembros de la Unión Europea le corresponde a:",
                answers: [
                    "El Ministerio de Hacienda y Función Pública.",
                    "El Consejo Superior de la Función Pública.",
                    "El Gobierno.",
                    "Conjuntamente al Ministerio de Hacienda y Función Pública y de Asuntos Económicos y Transformación Digital, previo informe del Departamento al que se encuentre adscrito el Cuerpo o Escala."
                ],
                correctAnswer: "El Gobierno."
            },
            {
                question: "Los procesos selectivos tendrán, según dispone el artículo 61.1 del TREBEP:",
                answers: [
                    "Carácter abierto y garantizarán la libre concurrencia.",
                    "Carácter universal salvo que una ley diga lo contrario.",
                    "Garantizarán la libre concurrencia dentro de los límites que marque el Gobierno.",
                    "Carácter abierto y solo garantizarán el principio de gualda de oportunidades entre sexos."
                ],
                correctAnswer: "Carácter abierto y garantizarán la libre concurrencia."
            },
            {
                question: "¿En qué momento se adquiere la condición de funcionario?",
                answers: [
                    "Con el juramento o promesa del cargo.",
                    "Con la toma de posesión dentro del plazo que se establezca.",
                    "Con el nombramiento de funcionario en prácticas.",
                    "Con la publicación en un Diario Oficial del nombramiento."
                ],
                correctAnswer: "Con la toma de posesión dentro del plazo que se establezca."
            },
            {
                question: "En el supuesto de que el Estado transfiera competencias propias a una Comunidad Autónoma sobre la base del artículo 150.2 de la Constitución:",
                answers: [
                    "Se reserva la última decisión en el ejercicio de dichas competencias.",
                    "Las pierde cara al futuro.",
                    "Puede establecer mecanismos de control.",
                    "Debe hacerlo a través de Ley ordinaria de las Cortes Generales."
                ],
                correctAnswer: "Puede establecer mecanismos de control."
            },
            {
                question: "¿A quién corresponden las materias no atribuidas al Estado por la Constitución?",
                answers: [
                    "Al Estado siempre.",
                    "A la Comunidad Autónoma siempre.",
                    "A la Comunidad Autónoma, si así lo establece su Estatuto.",
                    "Al Consejo de Estado."
                ],
                correctAnswer: "A la Comunidad Autónoma, si así lo establece su Estatuto."
            },
            {
                question: "Para que las Comunidades Autónomas puedan ampliar sucesivamente sus competencias dentro del marco establecido en el artículo 149 de la Constitución, ¿qué será necesario?",
                answers: [
                    "La reforma de sus Estatutos.",
                    "Que transcurran dos años.",
                    "Que transcurran tres años.",
                    "Las respuestas a) y c) son correctas."
                ],
                correctAnswer: "La reforma de sus Estatutos."
            },
            {
                question: "Los Estatutos de Autonomía deberán contener:",
                answers: [
                    "Las competencias que se dejan al Estado y las que asume la Comunidad Autónoma.",
                    "Las competencias que, en función de la Constitución, asume cada Comunidad Autónoma.",
                    "El desarrollo de la Administración Autonómica",
                    "La división provincial y órganos de Gobierno."
                ],
                correctAnswer: "Las competencias que, en función de la Constitución, asume cada Comunidad Autónoma."
            },
            {
                question: "¿Las Cortes Generales pueden autorizar un Estatuto de Autonomía para territorios que no estén integrados en la organización provincial?",
                answers: [
                    "En cualquier caso.",
                    "Por motivos de interés nacional.",
                    "Cuando así lo soliciten las Corporaciones Locales interesadas.",
                    "Si así lo solicitan con 500.000 firmas a través de la iniciativa popular."
                ],
                correctAnswer: "Por motivos de interés nacional."
            },
            {
                question: ". ¿En qué casos se admite la federación de Comunidades Autónomas?",
                answers: [
                    "En ningún caso.",
                    "En cualquier caso.",
                    "Cuando se aprueba por Ley Orgánica.",
                    "Cuando se aprueba por Ley Ordinaria."
                ],
                correctAnswer: "En ningún caso."
            },
            {
                question: "La asunción de competencias y de mayor autonomía por las Comunidades Autónomas es, como regla general:",
                answers: [
                    "Regresiva.",
                    "Progresiva",
                    "Automática",
                    "Inmediata"
                ],
                correctAnswer: "Progresiva"
            },
            {
                question: "En virtud de una Ley Marco según el artículo 150.1 de la Constitución, se habilita a las Comunidades Autónomas para:",
                answers: [
                    "Dictar normas legislativas en la materia de que se trate",
                    "Promulgar sólo normas reglamentarias en dicha materia.",
                    "Ejercer, por delegación competencias del Estado",
                    "Todo lo anterior."
                ],
                correctAnswer: "Dictar normas legislativas en la materia de que se trate"
            },
            {
                question: "¿Qué competencias del artículo 151 de la Constitución asumen las Comunidades Autónomas como propias?",
                answers: [
                    "Todas",
                    "Las negociadas con el Gobierno Central en el proceso autonómico.",
                    "Las negociadas con el Gobierno Central tras el proceso autonómico.",
                    "Ninguna."
                ],
                correctAnswer: "Ninguna."
            },
            {
                question: ". ¿Necesitan las Comunidades Autónomas autorización de las Cortes Generales para celebrar convenios?",
                answers: [
                    "Si, en cualquier caso.",
                    "No, nunca.",
                    "Sí, excepto cuando se trate de la celebración de convenios para la gestión y prestación de servicios propios de los mismos.",
                    "No, salvo cuando se trate de la celebración de convenios para la gestión y prestación de servicios propios de las mismas"
                ],
                correctAnswer: "Sí, excepto cuando se trate de la celebración de convenios para la gestión y prestación de servicios propios de los mismos."
            },
            {
                question: ". Los recursos de las Comunidades Autónomas están constituidos por:",
                answers: [
                    "Sus propios impuestos, tasas y contribuciones especiales.",
                    "El producto de operaciones de crédito.",
                    "Transferencias de un Fondo de Compensación Interterritorial y otras asignaciones con cargo a los Presupuestos Generales del Estado.",
                    "Todas las respuestas con correctas."
                ],
                correctAnswer: "Todas las respuestas con correctas."
            },
            {
                question: "El Estatuto de una Comunidad Autónoma debe contener:",
                answers: [
                    "La delimitación del territorio de la Comunidad Autónoma.",
                    "La denominación, organización y sede de las instituciones autónomas propias.",
                    "La denominación de la Comunidad que mejor corresponde a su identidad histórica.",
                    "Todas las respuestas son ciertas."
                ],
                correctAnswer: "Todas las respuestas son ciertas."
            },
            {
                question: "¿Quién elabora el proyecto de Estatuto de cada Comunidad Autónoma?",
                answers: [
                    "Las Cortes Generales.",
                    "El Gobierno.",
                    "La Asamblea Legislativa.",
                    "Todos los anteriores reunidos."
                ],
                correctAnswer: "La Asamblea Legislativa."
            },
            {
                question: ". Las competencias que pueden ser asumidas por las Comunidades Autónomas, se encuentran recogidas en la Constitución en su artículo:",
                answers: [
                    "146.",
                    "147.",
                    "148.",
                    "149."
                ],
                correctAnswer: "148."
            },
            {
                question: "Las Comunidades Autónomas podrán asumir competencias en materia de Sanidad e Higiene:",
                answers: [
                    "Propias.",
                    "Transferidas del Estado.",
                    "Delegadas del Estado.",
                    "De ningún tipo ya que la Sanidad es competencia del Estado."
                ],
                correctAnswer: "Propias."
            },
            {
                question: "La entidad local determinada por la agrupación de municipios y división territorial para el cumplimiento de las actividades del Estado es según establece el artículo 141.1 de la Constitución Española:",
                answers: [
                    "La Comarca.",
                    "La Provincia.",
                    "La Isla.",
                    "El Municipio."
                ],
                correctAnswer: "La Provincia."
            },
            {
                question: "Según el artículo 140 de la Constitución Española, los Municipios gozarán de:",
                answers: [
                    "Personalidad jurídica delegada.",
                    "Personalidad jurídica adecuada.",
                    "Personalidad jurídica propia.",
                    "Personalidad jurídica plena."
                ],
                correctAnswer: "Personalidad jurídica plena."
            },
            {
                question: "La Administración Local, como Administración Pública, actúa de acuerdo con los principios constitucionales que recoge:",
                answers: [
                    "El artículo 61.1 de la Ley Reguladora de las Bases de Régimen Local.",
                    "El artículo 3 de la Carta Europea de la Autonomía Local",
                    "El artículo 103.1 de la Constitución Española.",
                    "En el artículo 8 de la Ley de Medidas para la Modernización del Gobierno Local."
                ],
                correctAnswer: "El artículo 103.1 de la Constitución Española."
            }
        ];

        let currentQuestionIndex = 0;
        // Array para almacenar las respuestas del usuario. Cada elemento será el índice de la respuesta seleccionada.
        let userAnswers = [];
        // Array para almacenar el estado de corrección de cada pregunta (null: no contestada, true: correcta, false: incorrecta)
        let questionStatus = [];

        const quizContainer = document.getElementById('quiz-container');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const submitButton = document.getElementById('submit-button');
        const restartQuizButton = document.getElementById('restart-button-quiz'); // Renamed for clarity
        const resultsContainer = document.getElementById('results-container');
        const resultsRestartButton = document.getElementById('results-restart-button');
        const correctCountSpan = document.getElementById('correct-count');
        const incorrectCountSpan = document.getElementById('incorrect-count');
        const unansweredCountSpan = document.getElementById('unanswered-count');

        // Función para cargar el estado del test desde LocalStorage
        function loadQuizState() {
            try {
                const savedIndex = localStorage.getItem('currentQuestionIndex');
                const savedAnswers = localStorage.getItem('userAnswers');
                const savedStatus = localStorage.getItem('questionStatus');

                if (savedIndex !== null) {
                    currentQuestionIndex = parseInt(savedIndex, 10);
                }
                if (savedAnswers !== null) {
                    userAnswers = JSON.parse(savedAnswers);
                } else {
                    // Inicializar userAnswers si no hay nada guardado
                    userAnswers = new Array(questions.length).fill(null);
                }
                if (savedStatus !== null) {
                    questionStatus = JSON.parse(savedStatus);
                } else {
                    // Inicializar questionStatus si no hay nada guardado
                    questionStatus = new Array(questions.length).fill(null);
                }

                // Asegurarse de que los arrays tengan el tamaño correcto si se añaden/quitan preguntas
                if (userAnswers.length !== questions.length) {
                    userAnswers = new Array(questions.length).fill(null);
                    localStorage.removeItem('userAnswers');
                }
                if (questionStatus.length !== questions.length) {
                    questionStatus = new Array(questions.length).fill(null);
                    localStorage.removeItem('questionStatus');
                }

            } catch (e) {
                console.error("Error al cargar el estado del quiz desde LocalStorage:", e);
                // Si hay un error, reiniciar el estado
                resetQuiz();
            }
        }

        // Función para guardar el estado del test en LocalStorage
        function saveQuizState() {
            try {
                localStorage.setItem('currentQuestionIndex', currentQuestionIndex);
                localStorage.setItem('userAnswers', JSON.stringify(userAnswers));
                localStorage.setItem('questionStatus', JSON.stringify(questionStatus));
            } catch (e) {
                console.error("Error al guardar el estado del quiz en LocalStorage:", e);
            }
        }

        // Función para mostrar una pregunta
        function displayQuestion() {
            const questionData = questions[currentQuestionIndex];
            let answersHtml = '';

            questionData.answers.forEach((answer, index) => {
                const isSelected = userAnswers[currentQuestionIndex] === index;
                let buttonClass = 'answer-button';
                let feedbackHtml = '';

                // Si la pregunta ya ha sido contestada (status no es null)
                if (questionStatus[currentQuestionIndex] !== null) {
                    const isCorrectAnswer = answer === questionData.correctAnswer;
                    const isUserSelected = userAnswers[currentQuestionIndex] === index;

                    if (isUserSelected) {
                        buttonClass += isCorrectAnswer ? ' correct' : ' incorrect';
                        feedbackHtml = `<div class="feedback ${isCorrectAnswer ? 'correct-feedback' : 'incorrect-feedback'}" style="display: block;">
                                            ${isCorrectAnswer ? '¡Correcto!' : 'Incorrecto.'}
                                        </div>`;
                    } else if (isCorrectAnswer) {
                        // Mostrar la respuesta correcta si la pregunta ya fue contestada y el usuario no la seleccionó
                        buttonClass += ' correct';
                    }
                } else if (isSelected) {
                    buttonClass += ' selected';
                }

                answersHtml += `
                    <div>
                        <button class="${buttonClass}" data-index="${index}" ${questionStatus[currentQuestionIndex] !== null ? 'disabled' : ''}>
                            ${answer}
                        </button>
                        ${feedbackHtml}
                    </div>
                `;
            });

            quizContainer.innerHTML = `
                <div class="question-card">
                    <p class="question-text">${currentQuestionIndex + 1}. ${questionData.question}</p>
                    <div class="answers-container">
                        ${answersHtml}
                    </div>
                </div>
            `;

            // Añadir event listeners a los botones de respuesta
            document.querySelectorAll('.answer-button').forEach(button => {
                button.addEventListener('click', handleAnswerClick);
            });

            updateNavigationButtons();
        }

        // Manejador de clic en una respuesta
        function handleAnswerClick(event) {
            const selectedAnswerIndex = parseInt(event.target.dataset.index, 10);
            const questionData = questions[currentQuestionIndex];
            const isCorrect = questionData.answers[selectedAnswerIndex] === questionData.correctAnswer;

            // Guardar la respuesta del usuario y el estado de la pregunta
            userAnswers[currentQuestionIndex] = selectedAnswerIndex;
            questionStatus[currentQuestionIndex] = isCorrect;
            saveQuizState(); // Guardar el estado después de cada respuesta

            // Deshabilitar todos los botones de respuesta para esta pregunta
            document.querySelectorAll('.answer-button').forEach(button => {
                button.disabled = true;
                button.classList.remove('selected'); // Quitar clase 'selected' de todos
            });

            // Actualizar clases para mostrar si es correcta o incorrecta
            event.target.classList.add(isCorrect ? 'correct' : 'incorrect');

            // Mostrar feedback
            const feedbackDiv = event.target.nextElementSibling;
            if (feedbackDiv) {
                feedbackDiv.style.display = 'block';
            }

            // Si la respuesta seleccionada es incorrecta, marcar la correcta también
            if (!isCorrect) {
                const correctButton = Array.from(document.querySelectorAll('.answer-button')).find(btn =>
                    questionData.answers[parseInt(btn.dataset.index, 10)] === questionData.correctAnswer
                );
                if (correctButton) {
                    correctButton.classList.add('correct');
                }
            }
        }

        // Función para actualizar la visibilidad de los botones de navegación
        function updateNavigationButtons() {
            prevButton.classList.toggle('hidden', currentQuestionIndex === 0);
            nextButton.classList.toggle('hidden', currentQuestionIndex === questions.length - 1);
            submitButton.classList.toggle('hidden', currentQuestionIndex !== questions.length - 1);
            // restartQuizButton is now always visible, so no 'hidden' class toggle here
            quizContainer.classList.remove('hidden');
            resultsContainer.classList.add('hidden');
            resultsContainer.style.display = 'none'; // Asegurarse de que el contenedor de resultados esté oculto
        }

        // Función para mostrar los resultados finales del test
        function showResults() {
            let correct = 0;
            let incorrect = 0;
            let unanswered = 0;

            // Contar las respuestas correctas, incorrectas y sin contestar
            questions.forEach((q, index) => {
                if (questionStatus[index] === true) {
                    correct++;
                } else if (questionStatus[index] === false) {
                    incorrect++;
                } else {
                    unanswered++;
                }
            });

            // Actualizar los contadores en la interfaz de usuario
            correctCountSpan.textContent = correct;
            incorrectCountSpan.textContent = incorrect;
            unansweredCountSpan.textContent = unanswered;

            // Ocultar el contenedor del quiz y los botones de navegación
            quizContainer.classList.add('hidden');
            prevButton.classList.add('hidden');
            nextButton.classList.add('hidden');
            submitButton.classList.add('hidden');
            restartQuizButton.classList.add('hidden'); // Ocultar el botón de reinicio del quiz

            // Mostrar el contenedor de resultados y asegurarse de que sea visible
            resultsContainer.classList.remove('hidden');
            resultsContainer.style.display = 'flex'; // Establecer display a flex para que se muestre correctamente
        }

        // Función para reiniciar el test
        function resetQuiz() {
            currentQuestionIndex = 0;
            userAnswers = new Array(questions.length).fill(null);
            questionStatus = new Array(questions.length).fill(null);
            localStorage.removeItem('currentQuestionIndex');
            localStorage.removeItem('userAnswers');
            localStorage.removeItem('questionStatus');
            displayQuestion();
            updateNavigationButtons();
            quizContainer.classList.remove('hidden');
            resultsContainer.classList.add('hidden');
            resultsContainer.style.display = 'none'; // Asegurarse de que el contenedor de resultados esté oculto
            restartQuizButton.classList.remove('hidden'); // Mostrar el botón de reinicio del quiz cuando se vuelve a empezar
        }

        // Event Listeners para los botones de navegación
        prevButton.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
                saveQuizState();
            }
        });

        nextButton.addEventListener('click', () => {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveQuizState();
            }
        });

        submitButton.addEventListener('click', showResults);
        restartQuizButton.addEventListener('click', resetQuiz); // Event listener for the always-visible restart button
        resultsRestartButton.addEventListener('click', resetQuiz);

        // Cargar el estado del quiz e iniciar la visualización
        window.onload = () => {
            loadQuizState();
            displayQuestion();
        };
    </script>
</body>
</html>

