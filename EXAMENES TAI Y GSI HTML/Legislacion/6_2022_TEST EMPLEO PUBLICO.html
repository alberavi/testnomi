<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TEMA 6 - Cuestionario Empleo Público</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }
        .container {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .question-card {
            background-color: #f9fafb;
            padding: 25px;
            border-radius: 10px;
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
        }
        .question-card.answered {
            border-color: #d1d5db;
        }
        .question-text {
            font-size: 1.15rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #374151;
        }
        .options-container label {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 10px;
            background-color: #ffffff;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1rem;
            color: #4b5563;
        }
        .options-container label:hover {
            background-color: #f3f4f6;
            border-color: #9ca3af;
        }
        .options-container input[type="radio"] {
            margin-right: 15px;
            transform: scale(1.2);
            accent-color: #2563eb;
        }
        .options-container label.correct {
            background-color: #d1fae5; /* green-100 */
            border-color: #34d399; /* green-400 */
            color: #065f46; /* green-800 */
            font-weight: 500;
        }
        .options-container label.incorrect {
            background-color: #fee2e2; /* red-100 */
            border-color: #ef4444; /* red-500 */
            color: #991b1b; /* red-800 */
            font-weight: 500;
        }
        .options-container label.selected-correct {
            background-color: #a7f3d0; /* green-200 */
            border-color: #10b981; /* green-600 */
            color: #065f46; /* green-800 */
            font-weight: 600;
        }
        .options-container label.selected-incorrect {
            background-color: #fecaca; /* red-200 */
            border-color: #dc2626; /* red-600 */
            color: #991b1b; /* red-800 */
            font-weight: 600;
        }
        .feedback {
            margin-top: 10px;
            font-weight: 600;
            text-align: right;
            padding-right: 10px;
        }
        .feedback.correct {
            color: #10b981; /* green-600 */
        }
        .feedback.incorrect {
            color: #ef4444; /* red-500 */
        }
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .nav-button {
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .nav-button:active {
            transform: translateY(1px);
        }
        .nav-button.primary {
            background-color: #2563eb; /* blue-600 */
            color: #ffffff;
            border: none;
        }
        .nav-button.primary:hover {
            background-color: #1d4ed8; /* blue-700 */
        }
        .nav-button.secondary {
            background-color: #e0e7ff; /* indigo-100 */
            color: #4f46e5; /* indigo-600 */
            border: 1px solid #a5b4fc; /* indigo-300 */
        }
        .nav-button.secondary:hover {
            background-color: #c7d2fe; /* indigo-200 */
        }
        .reset-button {
            background-color: #fef2f2; /* red-50 */
            color: #dc2626; /* red-600 */
            border: 1px solid #fca5a5; /* red-300 */
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
            align-self: flex-end; /* Align to the right */
        }
        .reset-button:hover {
            background-color: #fee2e2; /* red-100 */
        }
        .reset-button:active {
            transform: translateY(1px);
        }
        .results-summary {
            background-color: #ecfdf5; /* green-50 */
            padding: 25px;
            border-radius: 10px;
            border: 1px solid #a7f3d0; /* green-200 */
            color: #065f46; /* green-800 */
            font-size: 1.1rem;
            font-weight: 500;
            margin-top: 20px;
        }
        .results-summary h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #047857; /* green-700 */
        }
        .results-summary p {
            margin-bottom: 8px;
        }
        .hidden {
            display: none;
        }
        .progress-bar-container {
            width: 100%;
            background-color: #e0e7ff;
            border-radius: 5px;
            height: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background-color: #2563eb;
            width: 0%;
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="color: #003366; font-family: 'Georgia', serif; font-size: 2rem; text-align: center; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);">TEMA 6</h1>
        <div class="progress-bar-container">
            <div id="progressBar" class="progress-bar"></div>
        </div>
        <div id="quizContainer"></div>
        <div class="navigation-buttons">
            <button id="prevButton" class="nav-button secondary hidden">Anterior</button>
            <button id="nextButton" class="nav-button primary">Siguiente</button>
        </div>
        <button id="resetButton" class="reset-button">Reiniciar Test</button>
        <div id="resultsSummary" class="results-summary hidden"></div>
    </div>

    <script>
        // Definición de las preguntas, opciones y respuestas correctas
        const questions = [
            {
                question: "Las incompatibilidades de los miembros del Gobierno se regulan por:",
                options: ["Ley Ordinaria.", "Ley Orgánica.", "Reglamento.", "Real Decreto de Consejo de Ministros."],
                correctAnswer: "Ley Ordinaria."
            },
            {
                question: "La suspensión firme de funciones impuesta en virtud de sanción disciplinaria no podrá exceder de:",
                options: ["Doce meses.", "Un año.", "Seis años.", "Dos años"],
                correctAnswer: "Seis años."
            },
            {
                question: "La reserva de puesto de trabajo de la funcionaria víctima de violencia podrá prorrogarse por un periodo máximo de:",
                options: ["Veinticuatro meses.", "Dieciocho meses.", "Doce meses.", "Seis meses."],
                correctAnswer: "Dieciocho meses."
            },
            {
                question: "Las funcionarias víctimas de violencia de género, para hacer efectiva su protección o su derecho a la asistencia social integral, tendrán derecho a solicitar la situación de excedencia:",
                options: ["Durante los ocho primeros meses tendrán derecho a reserva del puesto de trabajo.", "Durante los seis primeros meses tendrán derecho a percibir las retribuciones íntegras.", "La b) es correcta pero no podrán percibir complementos asociados al rendimiento.", "La b) es correcta pero el derecho solo alcanza a los dos primeros meses."],
                correctAnswer: "Durante los seis primeros meses tendrán derecho a percibir las retribuciones íntegras."
            },
            {
                question: "Los funcionarios en excedencia por cuidado de un familiar:",
                options: ["Podrán participar en los cursos de formación que convoque la Administración pasados dos años en este tipo de excedencia.", "No podrán participar en cursos de formación.", "Podrán participar en estos cursos sin ningún tipo de limitación.", "Tendrán prioridad para realizar cursos de formación una vez que haya terminado la excedencia."],
                correctAnswer: "Tendrán prioridad para realizar cursos de formación una vez que haya terminado la excedencia."
            },
            {
                question: "El tiempo de permanencia en el supuesto de excedencia por cuidado de un hijo:",
                options: ["Lleva aparejada la reserva del puesto de trabajo durante un plazo de un año.", "Lleva aparejada la reserva del puesto de trabajo durante un plazo de dos años.", "Lleva aparejada la reserva del puesto de trabajo durante un plazo de tres años.", "No lleva aparejada la reserva del puesto de trabajo."],
                correctAnswer: "Lleva aparejada la reserva del puesto de trabajo durante un plazo de un año."
            },
            {
                question: "La suspensión de funciones:",
                options: ["No podrá exceder de tres años cuando tenga su origen en una sanción disciplinaria.", "No podrá acordarse con carácter provisional con ocasión de la tramitación de un procedimiento judicial hasta que el mísmo concluya con sentencia firme.", "El funcionario declarado suspendido de funciones podrá prestar servicios en otra Administración Pública.", "Determinará la pérdida del puesto de trabajo cuando exceda de seis meses."],
                correctAnswer: "No podrá exceder de tres años cuando tenga su origen en una sanción disciplinaria."
            },
            {
                question: "La declaración del funcionario en excedencia por cuidado de familiares, cuando el familiar no sea el hijo, requiere:",
                options: ["Que se encuentre a su cargo.", "Que el parentesco sea hasta segundo grado de consanguinidad o cuarto grado de afinidad.", "Que no perciba ningún tipo de pensión.", "Que si desempeña actividad retribuida, ésta no exceda del salario mínimo interprofesional."],
                correctAnswer: "Que se encuentre a su cargo."
            },
            {
                question: "Los funcionarios de carrera tendrán derecho a un período de excedencia para atender el cuidado de cada hijo:",
                options: ["No superior a cinco años cuando el hijo lo sea por naturaleza.", "No superior a tres años cuando el hijo lo sea por adopción.", "No superior a un año cuando el hijo lo sea por preadopción.", "No superior a tres años en cualquiera de las situaciones anteriores."],
                correctAnswer: "No superior a tres años en cualquiera de las situaciones anteriores."
            },
            {
                question: "Los funcionarios de carrera podrán obtener la excedencia voluntaria por interés particular cuando hayan prestado servicios efectivos durante un periodo mínimo:",
                options: ["De tres años en la misma Administración Pública ó cinco en distintas Administraciones Públicas.", "De cinco años en cualquiera de las Administraciones Públicas.", "La b) es correcta aunque las Leyes de Función Pública podrán establecer una duración menor.", "De cinco años en la Administración General del Estado ó tres en otras Administraciones."],
                correctAnswer: "De cinco años en cualquiera de las Administraciones Públicas."
            },
            {
                question: "En relación con la excedencia voluntaria por interés particular:",
                options: ["Los que se encuentren en esta excedencia no devengarán retribuciones pero les será computable el tiempo que permanezcan en esta situación a efectos de derechos del régimen de Seguridad Social.", "Podrá declararse subordinada a las necesidades del servicio incluso cuando se le instruya al funcionario expediente disciplinario.", "En las leyes de la Función Pública que se dicten en desarrollo del Estatuto Básico podrá establecerse un periodo mínimo de permanencia en la misma.", "La denegación por razones de necesidades del servicio deberá realizarse, siempre que sea posible, de forma motivada."],
                correctAnswer: "La denegación por razones de necesidades del servicio deberá realizarse, siempre que sea posible, de forma motivada."
            },
            {
                question: "Según el artículo 16.3 d) del TREBEP la promoción interna horizontal consiste en:",
                options: ["El acceso a cuerpos o escalas del mismo Subgrupo profesional.", "El ascenso en la estructura de puestos de trabajo.", "En la progresión de grado, categoría, escalón u otros conceptos análogos.", "El acceso a cuerpos o escalas del mismo Grupo profesional."],
                correctAnswer: "El acceso a cuerpos o escalas del mismo Subgrupo profesional."
            },
            {
                question: "Los empleados públicos tienen derechos individuales que se ejercen de forma colectiva, excepto:",
                options: ["La libertad sindical.", "La participación en la determinación del horario de trabajo.", "El ejercicio de la huelga.", "El planteamiento de conflictos colectivos."],
                correctAnswer: "La participación en la determinación del horario de trabajo."
            },
            {
                question: "La carrera profesional la define, el artículo 16.2 del TREBEP, como el conjunto ordenado de oportunidades de ascenso y expectativas de progreso profesional conforme a los principios de:",
                options: ["Igualdad, mérito y capacidad.", "Esfuerzo, mérito y capacidad.", "Igualdad y capacidad.", "Mérito y capacidad."],
                correctAnswer: "Igualdad, mérito y capacidad."
            },
            {
                question: "¿Quién preside la Mesa General de Negociación de las Administraciones Públicas, según el artículo 36 del TREBEP?",
                options: ["La Administración General del Estado.", "La Federación Española de Municipios y Provincias en función de las materias a negociar.", "El representante de la Administración Autonómica por razón de la materia a tratar.", "Es una Presidencia rotatoria entre todas las Administraciones participantes."],
                correctAnswer: "La Administración General del Estado."
            },
            {
                question: "Entre los principios generales del Derecho a la negociación colectiva, representación y participación institucional que dispone el artículo 31.6 del TREBEP, se determina la legitimación para la interposición de recursos en vía administrativa y jurisdiccional, contra las resoluciones de los órganos de selección. ¿Quién ostenta esa legitimación?",
                options: ["La Mesa General de Negociación.", "Las Administraciones Públicas aunque no hayan participado en las elecciones sindicales.", "Las Organizaciones Sindicales, más representativas en el ámbito de la Función Pública.", "Cualquier Organización Sindical que haya obtenido el 5 por ciento o más de los representantes en las elecciones para Delegados."],
                correctAnswer: "Las Organizaciones Sindicales, más representativas en el ámbito de la Función Pública."
            },
            {
                question: "¿Quién ejerce sólo funciones expresamente calificadas de confianza o asesoramiento especial?",
                options: ["Los funcionarios de carrera.", "El personal laboral fijo.", "El personal eventual.", "El personal funcionario de carrera que desempeñe puestos de trabajo cuyo sistema de provisión sea el de libre designación."],
                correctAnswer: "El personal eventual."
            },
            {
                question: "¿Quién será competente para nombrar funcionario de carrera a un aspirante que haya superado las pruebas selectivas de acceso al Cuerpo de Abogados del Estado, Cuerpo adscrito al Ministerio de Justicia?",
                options: ["El Ministro de Hacienda y Función Pública.", "El Secretario de Estado de Función Pública.", "El Ministro de Justicia.", "El Secretario de Estado de Justicia."],
                correctAnswer: "El Ministro de Justicia."
            },
            {
                question: "De acuerdo con el artículo 60.1 del TREBEP, los órganos de selección de los procesos selectivos para el acceso al empleo público:",
                options: ["Deben estar constituidos por un número par de miembros no inferior a cuatro.", "Serán colegiados y su composición deberá ajustarse a los principios de imparcialidad y profesionalidad de sus miembros.", "Estar presididos por personal de designación política.", "Contar con algún miembro que actúe en representación de las organizaciones sindicales."],
                correctAnswer: "Serán colegiados y su composición deberá ajustarse a los principios de imparcialidad y profesionalidad de sus miembros."
            },
            {
                question: "Los nombramientos de los funcionarios de carrera de la Administración General del Estado, deben publicarse necesariamente:",
                options: ["En los tablones de anuncios de las Delegaciones y Subdelegaciones del Gobierno.", "En los lugares donde se hayan celebrado las pruebas del proceso selectivo.", "En el Diario Oficial de la Unión Europea.", "En el Boletín Oficial del Estado."],
                correctAnswer: "En el Boletín Oficial del Estado."
            },
            {
                question: "La determinación, en el ámbito de la Administración General del Estado, de los Cuerpos, Escalas, plazas o empleos a los que podrán acceder los nacionales de los demás Estados miembros de la Unión Europea le corresponde a:",
                options: ["El Ministerio de Hacienda y Función Pública.", "El Consejo Superior de la Función Pública.", "El Gobierno.", "Conjuntamente al Ministerio de Hacienda y Función Pública y de Asuntos Económicos y Transformación Digital, previo informe del Departamento al que se encuentre adscrito el Cuerpo o Escala."],
                correctAnswer: "El Gobierno."
            },
            {
                question: "Los procesos selectivos tendrán, según dispone el artículo 61.1 del TREBEP:",
                options: ["Carácter abierto y garantizarán la libre concurrencia.", "Carácter universal salvo que una ley diga lo contrario.", "Garantizarán la libre concurrencia dentro de los límites que marque el Gobierno.", "Carácter abierto y solo garantizarán el principio de gualda de oportunidades entre sexos."],
                correctAnswer: "Carácter abierto y garantizarán la libre concurrencia."
            },
            {
                question: "¿En qué momento se adquiere la condición de funcionario?",
                options: ["Con el juramento o promesa del cargo.", "Con la toma de posesión dentro del plazo que se establezca.", "Con el nombramiento de funcionario en prácticas.", "Con la publicación en un Diario Oficial del nombramiento."],
                correctAnswer: "Con la toma de posesión dentro del plazo que se establezca."
            }
        ];

        // Inicialización de variables
        let currentQuestionIndex = 0;
        let userAnswers = []; // Almacena las respuestas del usuario
        let quizCompleted = false;

        const quizContainer = document.getElementById('quizContainer');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const resetButton = document.getElementById('resetButton');
        const resultsSummary = document.getElementById('resultsSummary');
        const progressBar = document.getElementById('progressBar');

        // Función para cargar el estado del test desde localStorage
        function loadQuizState() {
            const savedState = localStorage.getItem('quizState');
            if (savedState) {
                const state = JSON.parse(savedState);
                currentQuestionIndex = state.currentQuestionIndex;
                userAnswers = state.userAnswers;
                quizCompleted = state.quizCompleted;
            } else {
                // Inicializar userAnswers si no hay estado guardado
                userAnswers = new Array(questions.length).fill(null);
            }
        }

        // Función para guardar el estado del test en localStorage
        function saveQuizState() {
            const state = {
                currentQuestionIndex: currentQuestionIndex,
                userAnswers: userAnswers,
                quizCompleted: quizCompleted
            };
            localStorage.setItem('quizState', JSON.stringify(state));
        }

        // Función para actualizar la barra de progreso
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Función para mostrar una pregunta
        function displayQuestion() {
            quizContainer.innerHTML = ''; // Limpiar contenedor
            resultsSummary.classList.add('hidden'); // Ocultar resumen de resultados

            // Si el test está completado, mostrar resultados y ocultar botones de navegación
            if (quizCompleted) {
                showResults();
                return;
            }

            const questionData = questions[currentQuestionIndex];
            const questionCard = document.createElement('div');
            questionCard.className = 'question-card';

            const questionText = document.createElement('p');
            questionText.className = 'question-text';
            questionText.textContent = `${currentQuestionIndex + 1}. ${questionData.question}`;
            questionCard.appendChild(questionText);

            const optionsContainer = document.createElement('div');
            optionsContainer.className = 'options-container';

            questionData.options.forEach((option, index) => {
                const label = document.createElement('label');
                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = `question-${currentQuestionIndex}`;
                radio.value = option;
                radio.disabled = quizCompleted; // Deshabilitar si el test está completado

                label.appendChild(radio);
                label.appendChild(document.createTextNode(option));
                optionsContainer.appendChild(label);

                // Marcar la opción seleccionada si ya ha sido respondida
                if (userAnswers[currentQuestionIndex] === option) {
                    radio.checked = true;
                    // Aplicar estilos de correcto/incorrecto si ya se ha respondido
                    if (option === questionData.correctAnswer) {
                        label.classList.add('selected-correct');
                    } else {
                        label.classList.add('selected-incorrect');
                    }
                }

                // Añadir evento de cambio para verificar la respuesta
                radio.addEventListener('change', () => {
                    if (!quizCompleted) {
                        userAnswers[currentQuestionIndex] = option; // Guardar la respuesta del usuario
                        checkAnswer(label, option, questionData.correctAnswer);
                        saveQuizState(); // Guardar el estado después de cada respuesta
                    }
                });
            });

            questionCard.appendChild(optionsContainer);
            quizContainer.appendChild(questionCard);

            // Actualizar visibilidad y texto de botones de navegación
            prevButton.classList.toggle('hidden', currentQuestionIndex === 0);
            nextButton.classList.remove('hidden'); // Siempre mostrar el botón Siguiente/Finalizar
            if (currentQuestionIndex === questions.length - 1) {
                nextButton.textContent = 'Finalizar Test';
            } else {
                nextButton.textContent = 'Siguiente';
            }
            
            // Si la pregunta ya fue contestada, deshabilitar radios y mostrar estilos correctos/incorrectos
            if (userAnswers[currentQuestionIndex] !== null) {
                const radios = questionCard.querySelectorAll('input[type="radio"]');
                radios.forEach(radio => {
                    radio.disabled = true;
                    const label = radio.parentElement;
                    if (radio.value === questions[currentQuestionIndex].correctAnswer) {
                        label.classList.add('correct');
                    } else if (radio.checked) {
                        label.classList.add('incorrect');
                    }
                });
            }

            updateProgressBar();
        }

        // Función para verificar la respuesta y aplicar estilos
        function checkAnswer(selectedLabel, selectedOption, correctAnswer) {
            const optionsContainer = selectedLabel.closest('.options-container');
            const labels = optionsContainer.querySelectorAll('label');

            labels.forEach(label => {
                label.classList.remove('selected-correct', 'selected-incorrect', 'correct', 'incorrect');
                const radio = label.querySelector('input[type="radio"]');
                radio.disabled = true; // Deshabilitar todos los radios una vez respondida
            });

            if (selectedOption === correctAnswer) {
                selectedLabel.classList.add('selected-correct');
            } else {
                selectedLabel.classList.add('selected-incorrect');
                // Mostrar la respuesta correcta si la seleccionada es incorrecta
                labels.forEach(label => {
                    if (label.textContent.trim() === correctAnswer) {
                        label.classList.add('correct');
                    }
                });
            }
        }

        // Función para mostrar los resultados finales
        function showResults() {
            quizContainer.innerHTML = '';
            prevButton.classList.add('hidden');
            nextButton.classList.add('hidden');
            resultsSummary.classList.remove('hidden');
            quizCompleted = true;
            saveQuizState(); // Guardar el estado de completado

            let correctCount = 0;
            let incorrectCount = 0;
            let unansweredCount = 0;

            userAnswers.forEach((answer, index) => {
                if (answer === null) {
                    unansweredCount++;
                } else if (answer === questions[index].correctAnswer) {
                    correctCount++;
                } else {
                    incorrectCount++;
                }
            });

            resultsSummary.innerHTML = `
                <h2 class="text-center">Resultados del Test</h2>
                <p><strong>Respuestas Correctas:</strong> <span class="text-green-600">${correctCount}</span></p>
                <p><strong>Respuestas Incorrectas:</strong> <span class="text-red-600">${incorrectCount}</span></p>
                <p><strong>Preguntas Sin Contestar:</strong> <span class="text-gray-600">${unansweredCount}</span></p>
                <p class="text-center mt-4">¡Test completado!</p>
            `;
            updateProgressBar(); // Asegurar que la barra de progreso esté al 100%
        }

        // Event Listeners para los botones de navegación
        nextButton.addEventListener('click', () => {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveQuizState();
            } else if (currentQuestionIndex === questions.length - 1 && !quizCompleted) {
                showResults();
            }
        });

        prevButton.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
                saveQuizState();
            }
        });

        // Event Listener para el botón de reinicio
        resetButton.addEventListener('click', () => {
            localStorage.removeItem('quizState'); // Borrar el estado guardado
            currentQuestionIndex = 0;
            userAnswers = new Array(questions.length).fill(null);
            quizCompleted = false;
            displayQuestion();
            updateProgressBar();
        });

        // Cargar el estado y mostrar la primera pregunta al cargar la página
        loadQuizState();
        displayQuestion();
    </script>
</body>
</html>

