<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Interactivo</title>
    <!-- Carga de Tailwind CSS para estilos modernos y responsivos -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Importación de la fuente Inter desde Google Fonts para una mejor legibilidad */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Color de fondo suave para una estética agradable */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Asegura que el cuerpo ocupe al menos toda la altura de la ventana */
            padding: 20px; /* Espaciado interno general */
            box-sizing: border-box; /* Incluye padding y border en el tamaño total del elemento */
        }
        .quiz-container {
            background-color: #ffffff; /* Fondo blanco para el contenedor principal del quiz */
            border-radius: 15px; /* Bordes redondeados para un aspecto moderno */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* Sombra sutil para profundidad */
            padding: 30px; /* Espaciado interno del contenedor */
            max-width: 800px; /* Ancho máximo del contenedor */
            width: 100%; /* Ocupa todo el ancho disponible hasta el max-width */
            display: flex;
            flex-direction: column; /* Organiza los elementos en columna */
            gap: 20px; /* Espacio entre los elementos hijos */
        }
        .question-section {
            display: none; /* Oculta todas las secciones de preguntas por defecto */
        }
        .question-section.active {
            display: block; /* Muestra la sección de pregunta activa */
        }
        .option-label {
            display: flex;
            align-items: center; /* Alinea verticalmente el texto y el radio button */
            padding: 12px 15px;
            border: 1px solid #e2e8f0; /* Borde suave para las opciones */
            border-radius: 10px; /* Bordes redondeados para las opciones */
            margin-bottom: 10px; /* Espacio entre opciones */
            cursor: pointer; /* Indica que es un elemento interactivo */
            transition: all 0.2s ease-in-out; /* Transición suave para efectos hover */
        }
        .option-label:hover {
            background-color: #f7fafc; /* Color de fondo al pasar el ratón */
            border-color: #cbd5e0; /* Color de borde al pasar el ratón */
        }
        .option-label input[type="radio"] {
            margin-right: 15px; /* Espacio entre el radio button y el texto */
            transform: scale(1.2); /* Aumenta el tamaño del radio button para mejor visibilidad */
        }
        /* Estilos para opciones correctas */
        .option-label.correct {
            background-color: #d4edda; /* Verde claro */
            border-color: #28a745; /* Verde oscuro */
            color: #155724; /* Texto verde oscuro */
        }
        /* Estilos para opciones incorrectas */
        .option-label.incorrect {
            background-color: #f8d7da; /* Rojo claro */
            border-color: #dc3545; /* Rojo oscuro */
            color: #721c24; /* Texto rojo oscuro */
        }
        .feedback-message {
            margin-top: 10px;
            padding: 10px;
            border-radius: 8px;
            font-weight: 500;
            display: none; /* Oculto por defecto */
        }
        .feedback-message.correct-feedback {
            background-color: #e6ffed;
            color: #1a6437;
            border: 1px solid #a8e6b9;
        }
        .feedback-message.incorrect-feedback {
            background-color: #ffe6e6;
            color: #8c1a1a;
            border: 1px solid #e6a8a8;
        }
        .results-section {
            display: none; /* Oculto por defecto */
            text-align: center;
            padding: 20px;
            border: 2px dashed #cbd5e0; /* Borde punteado para la sección de resultados */
            border-radius: 10px;
            margin-top: 20px;
        }
        .results-section.active {
            display: block;
        }
        .progress-bar-container {
            width: 100%;
            background-color: #e2e8f0;
            border-radius: 10px;
            height: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background-color: #4299e1; /* Azul */
            width: 0%;
            border-radius: 10px;
            transition: width 0.3s ease-in-out; /* Transición suave para el progreso */
        }
        /* Estilos para el modal de retroalimentación */
        .modal {
            display: none; /* Oculto por defecto */
            position: fixed; /* Se mantiene en la misma posición al hacer scroll */
            z-index: 1000; /* Se superpone a otros elementos */
            left: 0;
            top: 0;
            width: 100%; /* Ancho completo */
            height: 100%; /* Altura completa */
            overflow: auto; /* Permite scroll si el contenido es muy grande */
            background-color: rgba(0,0,0,0.4); /* Fondo semi-transparente */
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            width: 90%;
            max-width: 500px;
            text-align: center;
            position: relative;
        }
        .close-button {
            position: absolute;
            top: 15px;
            right: 25px;
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="quiz-container">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">Test de TAI 2014 Interna</h1>

        <!-- Barra de progreso del test -->
        <div class="progress-bar-container">
            <div id="progressBar" class="progress-bar"></div>
        </div>

        <!-- Botón de Reiniciar Test (visible siempre) -->
        <button id="restartTestButton" class="bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out w-full sm:w-auto self-end mb-4">
            Reiniciar Test
        </button>

        <!-- Sección donde se cargarán las preguntas dinámicamente -->
        <div id="quizQuestions">
            <!-- Las preguntas se cargarán aquí dinámicamente mediante JavaScript -->
        </div>

        <!-- Controles de Navegación del test -->
        <div class="flex justify-between mt-6">
            <button id="prevButton" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out">
                Anterior
            </button>
            <button id="nextButton" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out">
                Siguiente
            </button>
            <button id="submitButton" class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out hidden">
                Finalizar Test
            </button>
        </div>

        <!-- Sección de Resultados del test -->
        <div id="resultsSection" class="results-section">
            <h2 class="text-2xl font-bold text-gray-700 mb-4">Resultados del Test</h2>
            <p class="text-lg text-gray-600 mb-2">Correctas: <span id="correctCount" class="font-semibold text-green-600">0</span></p>
            <p class="text-lg text-gray-600 mb-2">Incorrectas: <span id="incorrectCount" class="font-semibold text-red-600">0</span></p>
            <p class="text-lg text-gray-600 mb-4">Sin contestar: <span id="unansweredCount" class="font-semibold text-yellow-600">0</span></p>
            <button id="reviewAnswersButton" class="bg-purple-500 hover:bg-purple-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out mt-4">
                Revisar Respuestas
            </button>
        </div>
    </div>

    <!-- Modal para mostrar retroalimentación al usuario -->
    <div id="feedbackModal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="closeModalButton">&times;</span>
            <p id="modalMessage" class="text-xl font-semibold mb-4"></p>
            <p id="correctAnswerInfo" class="text-md text-gray-700"></p>
            <button id="modalOkButton" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out mt-4">
                OK
            </button>
        </div>
    </div>

    <script>
        // Array de objetos de preguntas, opciones y la respuesta correcta para cada una.
        // Los datos han sido extraídos de los ficheros proporcionados ("Examen202014.pdf" y "Plantilla_definitiva202014.pdf").
        const questions = [
            {
                question: "1. La ley 34/2002, de servicios de la sociedad de la información y comercio electrónico, en su artículo 45 trata la prescripción. Señale la respuesta correcta respecto a las infracciones:",
                options: [
                    "a) Las muy graves prescribirán a los tres años, las graves a los dos años y las leves al año.",
                    "b) Las muy graves prescribirán a los cinco años, las graves a los dos años y las leves a los seis meses.",
                    "c) Las muy graves prescribirán a los tres años, las graves a los dos años y las leves a los seis meses.",
                    "d) Las muy graves prescribirán a los cinco años, las graves a los tres años y las leves al año."
                ],
                correctAnswer: "c"
            },
            {
                question: "2. En lo referente a los certificados de identidad pública contenidos en el Documento Nacional de Identidad (DNIe), señale la sentencia FALSA:",
                options: [
                    "a) Son emitidos como certificados reconocidos.",
                    "b) Vinculan una serie de datos personales del ciudadano a unas determinadas claves.",
                    "c) Garantizan la autenticidad, integridad y no repudio.",
                    "d) Pueden ser renovados por declaración de que el ciudadano no tiene capacidad de firma (pródigo)."
                ],
                correctAnswer: "d"
            },
            {
                question: "3. Según el Real Decreto 869/2013, que modifica el RD 1553/2005, ¿cuál de los siguientes periodos de validez del DNI electrónico es correcto?",
                options: [
                    "a) Diez años, cuando el titular haya cumplido los treinta y no haya alcanzado los sesenta.",
                    "b) Permanente cuando el titular haya cumplido los sesenta años.",
                    "c) Dos años cuando el solicitante no haya cumplido los cinco años de edad.",
                    "d) Diez años, cuando el titular no haya cumplido los treinta al momento de la expedición o renovación."
                ],
                correctAnswer: "c"
            },
            {
                question: "4. ¿Cuál de las siguientes claves NO está contemplada entre los datos criptográficos que almacena el DNI electrónico?",
                options: [
                    "a) Clave RSA privada de autenticación (Digital Signature).",
                    "b) Clave RSA pública de autenticación (Digital Signature).",
                    "c) Clave RSA privada de no repudio (ContentCommitment).",
                    "d) Clave RSA privada de firma (ContentCommitment)."
                ],
                correctAnswer: "c"
            },
            {
                question: "5. Según el Real Decreto 1720/2007 en su artículo 24, para el ejercicio de los derechos de acceso, rectificación, cancelación y oposición, deberá concederse al interesado un medio:",
                options: [
                    "a) sencillo y motivado.",
                    "b) sencillo y gratuito.",
                    "c) motivado y previo pago.",
                    "d) informado y exclusivo."
                ],
                correctAnswer: "b"
            },
            {
                question: "6. Según la Ley Orgánica 15/1999, ¿pueden las Fuerzas y Cuerpos de seguridad recoger y tratar datos de carácter personal sin consentimiento de los afectados?",
                options: [
                    "a) No, porque así lo prohíbe expresamente la Ley Orgánica de Protección de Datos de Carácter Personal.",
                    "b) Sí, siempre que sea para fines exclusivamente judiciales.",
                    "c) Sí, siempre que resulte necesario para la prevención de un peligro real para la seguridad pública o para la represión de infracciones penales.",
                    "d) No, deben contar en cualquier caso con el consentimiento de los afectados."
                ],
                correctAnswer: "c"
            },
            {
                question: "7. La Ley Orgánica 15/1999 NO atribuye como una de las funciones de la Agencia Española de Protección de Datos:",
                options: [
                    "a) Informar, con carácter preceptivo, los proyectos de disposiciones generales que desarrollen esta Ley.",
                    "b) Recabar de los encargados del tratamiento cuanta ayuda e información estime necesaria para el desempeño de sus funciones.",
                    "c) Atender las peticiones y reclamaciones formuladas por las personas afectadas.",
                    "d) Velar por la publicidad de la existencia de los ficheros de datos con carácter personal, a cuyo efecto publicará periódicamente una relación de dichos ficheros con la información adicional que el Director de la Agencia determine."
                ],
                correctAnswer: "b"
            },
            {
                question: "8. Las medidas de seguridad según indica el Esquema Nacional de Seguridad, se dividen en tres grupos, señale la opción correcta:",
                options: [
                    "a) Marco organizacional [org], marco operativo [op] y medidas de protección [mp].",
                    "b) Marco organizativo [org], marco operacional [op] y medidas de protección [mp].",
                    "c) Marco orgánico [org], marco operacional [op] y marco de protección [mp].",
                    "d) Marco orgánico [org], marco operativo [op] y medidas de protección [mp]."
                ],
                correctAnswer: "b"
            },
            {
                question: "9. Según el Real Decreto 4/2010, Esquema Nacional de Interoperabilidad, se define nodo de interoperabilidad como un organismo que presta servicios de interconexión...",
                options: [
                    "a) técnica, organizativa y semántica entre sistemas de información para un conjunto de Administraciones Públicas bajo las condiciones que éstas fijen.",
                    "b) técnica, organizativa y jurídica entre sistemas de información para un conjunto de Administraciones Públicas bajo las condiciones que éstas fijen.",
                    "c) técnica, organizativa y semántica entre sistemas de información de organizaciones tanto públicas como privadas.",
                    "d) técnica, organizativa y jurídica entre sistemas de información para un conjunto de usuarios u organizaciones privadas."
                ],
                correctAnswer: "b"
            },
            {
                question: "10. Según el artículo 3 del Real Decreto 1671/2009, las sedes electrónicas se crearán mediante Orden del Ministro correspondiente o resolución del titular del Organismo Público, que deberá publicarse en el BOE. Entre el contenido mínimo que debe tener, NO incluye:",
                options: [
                    "a) Identificación de la dirección electrónica de referencia de la sede.",
                    "b) Identificación del máximo responsable, así como del órgano u órganos encargados del tratamiento de los datos de carácter personal gestionados por dicha sede y de los servicios puestos a disposición de los ciudadanos en la misma.",
                    "c) Identificación de los canales de acceso a los servicios disponibles en la sede, con expresión, en su caso, de los teléfonos y oficinas a través de los cuales también puede accederse a los mismos.",
                    "d) Medios disponibles para la formulación de sugerencias y quejas."
                ],
                correctAnswer: "b"
            },
            {
                question: "11. La forma de acceso a la memoria principal de un ordenador es:",
                options: [
                    "a) Acceso secuencial.",
                    "b) Acceso aleatorio.",
                    "c) Acceso predefinido.",
                    "d) Acceso programado."
                ],
                correctAnswer: "b"
            },
            {
                question: "12. El tipo de escáner que se utiliza para hacer copias digitales de libros o documentos que, por ser antiguos o muy valiosos, no se les quiere deteriorar durante el proceso, se le conoce con el nombre de:",
                options: [
                    "a) plano.",
                    "b) tambor.",
                    "c) rodillo.",
                    "d) cenital."
                ],
                correctAnswer: "d"
            },
            {
                question: "13. ¿Qué número en sistema octal corresponde al decimal 53?",
                options: [
                    "a) 65",
                    "b) 54",
                    "c) 55",
                    "d) 64"
                ],
                correctAnswer: "a"
            },
            {
                question: "14. En relación a la estructura física de un disco duro, ¿qué es un sector?",
                options: [
                    "a) Conjunto de varias pistas.",
                    "b) Cada una de las divisiones de una pista.",
                    "c) Cada uno de los círculos concéntricos del disco.",
                    "d) Cada una de las caras del disco."
                ],
                correctAnswer: "b"
            },
            {
                question: "15. Respecto a la estructura lógica de un disco duro y sus características, ¿qué se entiende por latencia media?",
                options: [
                    "a) Revoluciones por minuto de los platos.",
                    "b) Tiempo medio que tarda la aguja en situarse en la pista y el sector deseado.",
                    "c) Velocidad a la que puede transferir la información a la computadora una vez la aguja está situada en la pista y sector correctos.",
                    "d) Tiempo medio que tarda la aguja en situarse en el sector deseado."
                ],
                correctAnswer: "d"
            },
            {
                question: "16. ¿Cuál de las siguientes capacidades puede contener una mayor cantidad de información?",
                options: [
                    "a) 100.000.000 bits.",
                    "b) 1 Gigabyte.",
                    "c) 1042 Megabytes.",
                    "d) 200.000 Kbytes."
                ],
                correctAnswer: "c"
            },
            {
                question: "17. Indicar qué característica se puede asociar al algoritmo de la burbuja:",
                options: [
                    "a) Algoritmo de búsqueda de complejidad cuadrática.",
                    "b) Algoritmo de ordenación de complejidad lineal.",
                    "c) Algoritmo de ordenación de complejidad cuadrática.",
                    "d) Algoritmo de búsqueda de complejidad logarítmica."
                ],
                correctAnswer: "c"
            },
            {
                question: "18. De los siguientes sistemas RAID, ¿cuál NO se considera redundante?",
                options: [
                    "a) RAID 0.",
                    "b) RAID 1.",
                    "c) RAID 2.",
                    "d) RAID 1+0."
                ],
                correctAnswer: "a"
            },
            {
                question: "19. Señale la técnica de compresión con pérdida:",
                options: [
                    "a) Portable Network Graphics (PNG).",
                    "b) Lempel-Ziv-Welch (LZW).",
                    "c) Joint Photographic Experts Group (JPEG).",
                    "d) Free Lossless Audio Codec (FLAC)."
                ],
                correctAnswer: "c"
            },
            {
                question: "20. El formato de archivo electrónico para Sistemas de Información Geográfica denominado Shapefile (SHP) es un:",
                options: [
                    "a) Fichero que contiene formas geométricas (puntos, líneas o polígonos).",
                    "b) Fichero que contiene una base de datos referenciados espacialmente.",
                    "c) Conjunto de ficheros que contienen formas geométricas junto con una base de datos (dBASE) referenciados espacialmente.",
                    "d) Conjunto de ficheros utilizado para representar datos referenciados espacialmente. Está desaconsejado ya que ha quedado obsoleto debido al uso de bases de datos dBASE."
                ],
                correctAnswer: "c"
            },
            {
                question: "21. Señale qué orden se debe usar para cambiar las propiedades de un fichero y conseguir que éste tenga los siguientes permisos en UNIX: para el propietario lectura, ejecución y escritura; para el grupo lectura y ejecución; para el resto de usuarios lectura.",
                options: [
                    "a) chmod 745",
                    "b) chmod 742",
                    "c) chmod 753",
                    "d) chmod 754"
                ],
                correctAnswer: "d"
            },
            {
                question: "22. Señale la sentencia correcta referida a la clave del registro de Windows 7 \"HKEY_LOCAL_MACHINE\":",
                options: [
                    "a) Contiene una lista de extensiones de distintos tipos de archivos y programa para abrirlos por defecto en una máquina.",
                    "b) Engloba las configuraciones de software, hardware, etc. de todas las cuentas de usuario en una máquina.",
                    "c) Alberga los datos sobre perfiles de usuario distintos que haya en local en una máquina con Windows.",
                    "d) Incluye todas las configuraciones del usuario activo de Windows en ese momento."
                ],
                correctAnswer: "b"
            },
            {
                question: "23. ¿Cuál de las siguientes NO es una versión del sistema operativo Android?",
                options: [
                    "a) Cupcake.",
                    "b) Ice cream Sandwich.",
                    "c) Donut.",
                    "d) Sinclair."
                ],
                correctAnswer: "d"
            },
            {
                question: "24. ¿Cuál es el comando utilizado en sistemas Microsoft que permite conectarse a una carpeta compartida de red y asignar una letra de unidad a la propia conexión?",
                options: [
                    "a) use net",
                    "b) net use",
                    "c) net",
                    "d) net map"
                ],
                correctAnswer: "b"
            },
            {
                question: "25. ¿Cómo se denomina la interfaz de usuario en Windows 8?",
                options: [
                    "a) Aero UI.",
                    "b) Tren UI.",
                    "c) Metro UI.",
                    "d) Evo UI."
                ],
                correctAnswer: "c"
            },
            // BLOQUE III (Preguntas adicionales del examen)
            {
                question: "26. En la elaboración de un Diagrama de Flujo de Datos, ¿cuál de las siguientes afirmaciones es FALSA?",
                options: [
                    "a) Un proceso debe poder generar sus flujos de salida a partir de los flujos de entrada.",
                    "b) Las relaciones existentes entre dos entidades externas no se representan.",
                    "c) El \"balanceo del diagrama\" debe ser validado en cada descomposición.",
                    "d) Un flujo de datos entre dos procesos es posible cuando la información es asíncrona."
                ],
                correctAnswer: "d"
            },
            {
                question: "27. Según las 12 reglas de Codd para un sistema gestor de bases de datos (SGBD), señale cuál es la definición de la regla de no subversión:",
                options: [
                    "a) Toda la información en la base de datos es representada unidireccionalmente, por valores en posiciones de las columnas dentro de filas de tablas.",
                    "b) Todas las vistas que son teóricamente actualizables deben ser actualizables por el SGBD.",
                    "c) Ningún lenguaje de bajo nivel puede ser usado para violar las restricciones de integridad expresadas en el lenguaje de alto nivel, como SQL.",
                    "d) Los cambios al nivel lógico (tablas, columnas, filas, etc.) no deben requerir un cambio en los programas de aplicación."
                ],
                correctAnswer: "c"
            },
            {
                question: "28. Una relación (una tabla) se compone de los campos o atributos A, B, C y D. Sólo existe una clave candidata, y es la clave compuesta (A, B). Además, se cumple que (A, B) determina funcionalmente a C, y C determina funcionalmente a D. Indique la respuesta correcta:",
                options: [
                    "a) La tabla no cumple ninguna forma normal.",
                    "b) La tabla está en 1FN, pero no en 2FN, ni en 3FN.",
                    "c) La tabla está en 1FN y en 2FN, pero no en 3FN.",
                    "d) La tabla está en 1FN, en 2FN y en 3FN."
                ],
                correctAnswer: "c"
            },
            {
                question: "29. En álgebra relacional la operación que, a partir de dos relaciones del mismo tipo, obtiene una nueva relación formada por la tuplas que pertenecen a las dos relaciones de partida, se llama:",
                options: [
                    "a) Unión.",
                    "b) Intersección.",
                    "c) Diferencia.",
                    "d) Producto cartesiano."
                ],
                correctAnswer: "b"
            },
            {
                question: "30. Indique cuál de los siguientes es un lenguaje orientado a objetos puro:",
                options: [
                    "a) Smalltalk",
                    "b) C",
                    "c) Cobol",
                    "d) C++"
                ],
                correctAnswer: "a"
            },
            {
                question: "31. Cuando se habla de cohesión en los módulos de un determinado programa, señale su definición y cuál es el valor deseado:",
                options: [
                    "a) Grado de interdependencia entre los distintos módulos de un programa. Debe ser alto.",
                    "b) Relación funcional entre los distintos elementos que componen un módulo. Debe ser alto.",
                    "c) Grado de interdependencia entre los distintos módulos de un programa. Debe ser bajo.",
                    "d) Relación funcional entre los distintos elementos que componen un módulo. Debe ser bajo."
                ],
                correctAnswer: "b"
            },
            {
                question: "32. Indique la sentencia correcta en relación al acoplamiento de marca:",
                options: [
                    "a) Los módulos están ligados a componentes externos (dispositivos E/S, protocolos de comunicaciones, etc.). ",
                    "b) Cuando uno o varios de los parámetros de comunicación entre módulos son de control. ",
                    "c) Varios módulos hacen referencia a un área común de datos, los módulos asociados a esa área pueden modificar los valores de los elementos de datos o estructuras de datos que se incluyen en dicha área. ",
                    "d) La comunicación entre módulos es a través de estructuras de datos. "
                ],
                correctAnswer: "d"
            },
            {
                question: "33. ¿Cuál de las siguientes afirmaciones sobre la programación orientada a objetos es FALSA?",
                options: [
                    "a) La herencia permite que una clase herede propiedades y métodos de otra clase.",
                    "b) El polimorfismo permite que objetos de diferentes clases respondan al mismo mensaje de diferentes maneras.",
                    "c) El encapsulamiento se refiere a la ocultación de los detalles internos de un objeto.",
                    "d) La abstracción es la capacidad de un objeto para tomar muchas formas."
                ],
                correctAnswer: "d"
            },
            {
                question: "34. En el contexto de las bases de datos, ¿qué es una clave foránea (Foreign Key)?",
                options: [
                    "a) Un atributo que identifica de forma única una fila en una tabla.",
                    "b) Un atributo que establece una relación entre dos tablas.",
                    "c) Un atributo que no puede contener valores nulos.",
                    "d) Un atributo que se utiliza para ordenar los registros en una tabla."
                ],
                correctAnswer: "c"
            },
            //desde aqui corregir
            {
                question: "35. ¿Qué tipo de prueba de software se enfoca en la validación de los requisitos del usuario?",
                options: [
                    "a) Pruebas unitarias.",
                    "b) Pruebas de integración.",
                    "c) Pruebas de sistema.",
                    "d) Pruebas de aceptación."
                ],
                correctAnswer: "c"
            },
            // Nuevas preguntas añadidas (anteriormente 26-43) las anteriores raras
            {
                question: "36. En SQL-92, para especificar una condición que debe cumplir un grupo de agregación, usamos:",
                options: [
                    "a) GROUP BY",
                    "b) COUNT",
                    "c) SELECT",
                    "d) HAVING"
                ],
                correctAnswer: "d"
            },
            {
                question: "37. La sentencia SQL-92 que nos permite generar una vista de una tabla es:",
                options: [
                    "a) DEFINE VIEW",
                    "b) DROP VIEW",
                    "c) CREATE VIEW",
                    "d) NEW VIEW"
                ],
                correctAnswer: "c"
            },
            {
                question: "38. Señale la opción INCORRECTA con respecto de las restricciones de integridad (CONSTRAINTS) en SQL2:",
                options: [
                    "a) Pueden definirse en la creación de la tabla.",
                    "b) Pueden definirse después de que la tabla haya sido creada.",
                    "c) Se definen mediante la sentencia CREATE RESTRICTION.",
                    "d) FOREIGN KEY y NOT NULL son dos tipos de restricciones."
                ],
                correctAnswer: "c"
            },
            {
                question: "39. Según el estándar ANSI SQL 92, cuál es el tamaño por defecto de un tipo de datos VARCHAR:",
                options: [
                    "a) 255 caracteres.",
                    "b) 255 bits.",
                    "c) 1 carácter.",
                    "d) VARCHAR siempre debe especificar un tamaño entre paréntesis."
                ],
                correctAnswer: "c"
            },
            {
                question: "40. En el contexto de la notación UML 2.4.1, indique cuál de los siguientes diagramas NO se incluye en este lenguaje de modelado:",
                options: [
                    "a) Diagrama de colaboración.",
                    "b) Diagrama de secuencia.",
                    "c) Diagrama de actuación.",
                    "d) Diagrama de despliegue."
                ],
                correctAnswer: "c"
            },
            {
                question: "41. ¿Qué patrón de diseño permite que clases con interfaces incompatibles se comuniquen?",
                options: [
                    "a) Bridge.",
                    "b) Adapter.",
                    "c) Facade.",
                    "d) Interface."
                ],
                correctAnswer: "b"
            },
            {
                question: "42. Cuál de los siguientes es un patrón de diseño que representa y externaliza el estado interno de un objeto sin violar la encapsulación, de forma que éste puede volver a dicho estado más tarde:",
                options: [
                    "a) Flyweight.",
                    "b) Memento.",
                    "c) Observer.",
                    "d) State."
                ],
                correctAnswer: "b"
            },
            {
                question: "43. En cuanto a la Java API for XML Processing (JAXP):",
                options: [
                    "a) Permite procesar documentos XML tanto a través del modelo SAX, DOM y XSLT.",
                    "b) Trabaja únicamente con el modelo DOM y SAX.",
                    "c) No existe tal librería en el lenguaje Java.",
                    "d) No tiene una implementación propia para el parser y obligatoriamente debe utilizar el parser del modelo DOM."
                ],
                correctAnswer: "a"
            },
            {
                question: "44. Indique la afirmación correcta respecto al modificador native de Java:",
                options: [
                    "a) Se puede aplicar a clases, métodos y variables.",
                    "b) Se emplea únicamente con métodos.",
                    "c) Se emplea únicamente con variables.",
                    "d) Se emplea en clases y métodos."
                ],
                correctAnswer: "b"
            },
            {
                question: "45. En el contexto de un modelo de distribución de la arquitectura cliente/servidor indique la afirmación FALSA:",
                options: [
                    "a) Las peticiones que dirigen los clientes a los servidores pueden iniciarse en modo síncrono o asíncrono.",
                    "b) En el modelo cliente/servidor es relevante la ubicación de un proceso con respecto del otro.",
                    "c) El middleware permite la interoperabilidad de las aplicaciones distribuidas.",
                    "d) El modelo cliente/servidor facilita la escalabilidad tanto vertical como horizontal del sistema."
                ],
                correctAnswer: "b"
            },
            {
                question: "46. En JavaScript, ¿cómo se escribe una sentencia condicional para comprobar que la variable \"x\" es distinta de 2?",
                options: [
                    "a) if x <> 2",
                    "b) if (x != 2)",
                    "c) ix <> 2",
                    "d) if x != 2"
                ],
                correctAnswer: "b"
            },
            {
                question: "47. En HTML5 cuál es la forma correcta de escribir la etiqueta que permite referenciar mapas de imagen en el cliente:",
                options: [
                    "a) <map src=\"imagen.jpg\" alt=\"Mi imagen con mapa seleccionable\"/>",
                    "b) <map src=\"imagen.jpg\" alt=\"Mi imagen con mapa seleccionable\" area=\"#Mapa\"/>",
                    "c) <img src=\"imagen.jpg\" alt=\"Mi imagen con mapa seleccionable\" map=\"#Mapa\" />",
                    "d) <img src=\"imagen.jpg\" alt=\"Mi imagen con mapa seleccionable\" usemap=\"#Mapa\" />"
                ],
                correctAnswer: "d"
            },
            {
                question: "48. En HTML5, ¿cuál es la forma correcta de representar acrónimos, siglas o abreviaturas?",
                options: [
                    "a) <acronym title=\"Administración General del Estado\">AGE</acronym>",
                    "b) <abbr title=\"Administración General del Estado\">AGE</abbr>, ya que <acronym> se ha declarado obsoleto.",
                    "c) Con el tag <acronym> o con el tag <abbr>, son equivalentes.",
                    "d) <span title=\"Administración General del Estado\">AGE</span>"
                ],
                correctAnswer: "b"
            },
            {
                question: "49. En el lenguaje Xpath, utilizado en XSL, ¿qué obtenemos al aplicar la ruta de ubicación @name?",
                options: [
                    "a) La selección del nodo denominado \"name\".",
                    "b) La selección del atributo \"name\" del nodo actual.",
                    "c) La selección del nodo padre relativo al nodo \"name\".",
                    "d) La selección del atributo \"name\" del nodo padre al nodo actual."
                ],
                correctAnswer: "b"
            },
            {
                question: "50. ¿Cuál de las siguientes herramientas es un lector de pantallas para las personas invidentes?",
                options: [
                    "a) Jaws.",
                    "b) Lynx.",
                    "c) Hera.",
                    "d) Web Accessibility Toolbar."
                ],
                correctAnswer: "a"
            },
            {
                question: "51. En el contexto de la accesibilidad de los contenidos web, señale la respuesta FALSA:",
                options: [
                    "a) La norma UNE 139803:2012 anula y sustituye la UNE 139803:2004.",
                    "b) La norma que establece los requisitos de accesibilidad para los contenidos web es la UNE 139803:2012.",
                    "c) La norma UNE 139803:2012 no es aplicable al software utilizado para acceder a los contenidos web.",
                    "d) La UNE 139803:2012 se basa en las Pautas de Accesibilidad para el Contenido Web (WCAG) en su versión 1.0."
                ],
                correctAnswer: "d"
            },
            {
                question: "52. En el contexto de la accesibilidad web, en la recomendación WCAG 2.0 se hace referencia a cuatro principios generales que engloban aspectos generales aplicables a todos los contenidos. ¿Cuáles son esos principios?",
                options: [
                    "a) Perceptible, operable, comprensible y robusto.",
                    "b) Perceptible, abstraible, comprensible y operable.",
                    "c) Perceptible, robusto, inferible y operable.",
                    "d) Perceptible, inferible, comprensible y operable."
                ],
                correctAnswer: "a"
            },
            {
                question: "53. Un licornio es una tecnología de apoyo (ayuda técnica) empleada por:",
                options: [
                    "a) Los usuarios ciegos.",
                    "b) Los usuarios con discapacidad motriz.",
                    "c) Los usuarios sordos.",
                    "d) No es una tecnología de apoyo (ayuda técnica)."
                ],
                correctAnswer: "b"
            },
            // Nuevas preguntas añadidas (continuación de la numeración)
            {
                question: "54. En un sistema operativo UNIX, ¿qué hace la siguiente cadena de comandos? $ scp paco@almendro.admin.org:/etc/hosts paco@abedul.admin.org:/etc/hosts",
                options: [
                    "a) El usuario paco está realizando una copia del fichero host del servidor abedul en el servidor almendro.",
                    "b) El usuario paco está realizando una copia del fichero host del servidor almendro en el servidor abedul.",
                    "c) El usuario paco está configurando un nuevo dominio en el servidor almendro correspondiente al servidor abedul.",
                    "d) El usuario paco está configurando un nuevo dominio en el servidor almendro con los datos de dominio guardados en el servidor abedul."
                ],
                correctAnswer: "b"
            },
            {
                question: "55. Indique cuál de los siguientes comandos UNIX muestra el % del uso de CPU:",
                options: [
                    "a) tar",
                    "b) crontab",
                    "c) iostat",
                    "d) netstat"
                ],
                correctAnswer: "c"
            },
            {
                question: "56. De los siguientes comandos/<combinación de teclas>, indique cuál permite salir del editor Vi salvando los cambios del fichero que se está editando:",
                options: [
                    "a) <Esc> ZZ",
                    "b) q!",
                    "c) <Ctrl + x>",
                    "d) <Supr + x>"
                ],
                correctAnswer: "a"
            },
            {
                question: "57. Cuando una transacción devuelve un conjunto de filas que satisfacen una condición de búsqueda pero alguna de esas filas no existía cuando se inició la transacción, estamos hablando de:",
                options: [
                    "a) Lectura no repetible.",
                    "b) Lectura fantasma.",
                    "c) Lectura sucia.",
                    "d) Lectura arbitraria."
                ],
                correctAnswer: "b"
            },
            {
                question: "58. En el sistema de gestión de base de datos Oracle, indique cuál de las siguientes afirmaciones es FALSA en relación al comando EXPLAIN PLAN:",
                options: [
                    "a) Permite determinar si en la ejecución de una consulta SELECT se utiliza un índice.",
                    "b) Permite determinar el rendimiento del comando INSERT.",
                    "c) Permite determinar el rendimiento del comando DROP TABLE.",
                    "d) Permite determinar el rendimiento de una consulta DELETE."
                ],
                correctAnswer: "c"
            },
            {
                question: "59. Indique el puerto que utiliza el protocolo Post Office Protocol - version 3:",
                options: [
                    "a) 143",
                    "b) 110",
                    "c) 220",
                    "d) 109"
                ],
                correctAnswer: "b"
            },
            {
                question: "60. Cómo se denomina la extensión de SMTP, estandarizada en la RFC 2645, que permite que el correo electrónico sea transmitido a receptores que se conectan de forma intermitente después de que hayan sido autenticados:",
                options: [
                    "a) SMTP Service Extension for Secure SMTP.",
                    "b) Message Submission for Mail (MSM).",
                    "c) SMTP Service Extension for Authentication.",
                    "d) On-Demand Mail Relay (ODMR)."
                ],
                correctAnswer: "d"
            },
            {
                question: "61. SNMP es un protocolo de gestión de dispositivos de red significa:",
                options: [
                    "a) Standard Network Manipulation Protocol.",
                    "b) Simple Network Manipulation Protocol.",
                    "c) Standard Network Management Protocol.",
                    "d) Simple Network Management Protocol."
                ],
                correctAnswer: "d"
            },
            {
                question: "62. ¿Cuál de las siguientes es una herramienta de monitorización de red?",
                options: [
                    "a) Xen.",
                    "b) OpenView.",
                    "c) OpenVZ.",
                    "d) VirtualBox."
                ],
                correctAnswer: "b"
            },
            {
                question: "63. El protocolo de gestión de red SNMP:",
                options: [
                    "a) Sólo permite monitorizar dispositivos (leer estado), pero no gestionarlos (modificar su estado).",
                    "b) Un TRAP SNMP es una comunicación asíncrona por la que un agente SNMP notifica a la estación de gestión de un evento significativo.",
                    "c) Incorpora en su versión 1 el encriptado de la información, para proteger la información de gestión que es crítica.",
                    "d) Utiliza únicamente como protocolo de transporte TCP."
                ],
                correctAnswer: "b"
            },
            {
                question: "64. Señale en qué versión del protocolo de gestión de redes SNMP se añade por primera vez la instrucción GetBulk:",
                options: [
                    "a) SNMP v0.",
                    "b) SNMP v1.",
                    "c) SNMP v2.",
                    "d) SNMP v3."
                ],
                correctAnswer: "c"
            },
            {
                question: "65. Queremos utilizar RSA para asegurar la confidencialidad entre 4 personas. ¿Cuántas claves necesita conocer cada usuario?",
                options: [
                    "a) 2.",
                    "b) 4.",
                    "c) 6.",
                    "d) 8."
                ],
                correctAnswer: "b"
            },
            {
                question: "66. ¿En qué algoritmo se basa el estándar AES (Advanced Encryption Standard)?",
                options: [
                    "a) TDES (Triple Data Encryption Standard).",
                    "b) Rijndael.",
                    "c) Blowfish.",
                    "d) IDEA (International Data Encryption Algorithm) ."
                ],
                correctAnswer: "b"
            },
            {
                question: "67. ¿Cuál de los siguientes problemas afecta a los medios de transmisión de señales?",
                options: [
                    "a) Reverberación.",
                    "b) Ruido blanco.",
                    "c) Afonía.",
                    "d) Ninguno de los anteriores es un problema para los medios de transmisión."
                ],
                correctAnswer: "b"
            },
            {
                question: "68. Señale cuál de las siguientes NO es una codificación en banda base:",
                options: [
                    "a) Manchester.",
                    "b) NRZ.",
                    "c) Nyquist.",
                    "d) AMI bipolar."
                ],
                correctAnswer: "c"
            },
            {
                question: "69. De los siguientes modos de comunicación ¿cuál se corresponde con la comunicación Anycast?",
                options: [
                    "a) Un emisor y un receptor.",
                    "b) Un emisor y N receptores.",
                    "c) Un emisor y todos receptores.",
                    "d) Un emisor y un receptor en un grupo de posibles receptores."
                ],
                correctAnswer: "d"
            },
            {
                question: "70. Indique cuál de las siguientes afirmaciones es FALSA respecto al estándar 802.11n:",
                options: [
                    "a) Utiliza las bandas de uso común.",
                    "b) La velocidad máxima de transmisión es 54 Mbps.",
                    "c) Permite utilizar múltiples antenas para transmitir y recibir simultáneamente.",
                    "d) Las redes con estándar 802.11n son susceptibles de ser interferidas por redes 802.11a/b/g."
                ],
                correctAnswer: "b"
            },
            {
                question: "71. Señalar la afirmación cierta sobre la cabecera de un paquete IPv6:",
                options: [
                    "a) Es igual que la cabecera de IPv4 por motivos de compatibilidad.",
                    "b) La cabecera tiene un tamaño fijo, no admite extensiones.",
                    "c) Las direcciones IPv6 tienen 128 bits.",
                    "d) El campo Hop Limit indica el número de segundos que transcurrirán antes de descartar el paquete."
                ],
                correctAnswer: "c"
            },
            {
                question: "72. Señale a qué se corresponde la siguiente definición \"técnica de desarrollo web para crear aplicaciones que se ejecutan en el cliente, mientras se mantiene la comunicación asíncrona con el servidor en segundo plano\":",
                options: [
                    "a) AJAX.",
                    "b) HTML.",
                    "c) XHTML.",
                    "d) Servlets."
                ],
                correctAnswer: "a"
            },
            {
                question: "73. En relación con el protocolo HTTP, ¿cuál es el código STATUS asociado al Error: \"Service unavailable\"?",
                options: [
                    "a) 501",
                    "b) 502",
                    "c) 503",
                    "d) 504"
                ],
                correctAnswer: "c"
            },
            {
                question: "74. El estándar IEEE 802.4 (Token Bus) tiene:",
                options: [
                    "a) Topología lógica en anillo y topología física en bus.",
                    "b) Topología lógica en bus y topología física en anillo.",
                    "c) Topología lógica y física en anillo.",
                    "d) Topología lógica y física en bus."
                ],
                correctAnswer: "a"
            },
            {
                question: "75. Con respecto a los ataques a las redes de comunicaciones, ¿cuál de las siguientes afirmaciones es cierta?",
                options: [
                    "a) Los ataques causados cuando se copia una cantidad de datos sobre un área que no es lo suficientemente grande para contenerlos son llamados hoax.",
                    "b) Para evitar puertas traseras o back doors hay que tener los antivirus y parches actualizados.",
                    "c) Los ataques mediante sniffing se basan en la suplantación de identidad.",
                    "d) Ninguna de las anteriores es cierta."
                ],
                correctAnswer: "d"
            },
            {
                question: "76. Cuál de los siguientes algoritmos de cifrado NO es un algoritmo de cifrado simétrico:",
                options: [
                    "a) RSA",
                    "b) DES",
                    "c) TDES",
                    "d) IDEA"
                ],
                correctAnswer: "a"
            },
            {
                question: "77. Un ataque de \"phishing\" consiste en un ataque:",
                options: [
                    "a) De fuerza bruta para adivinar la contraseña de acceso a un sistema.",
                    "b)En el que se suplanta la identidad de una entidad de confianza para solicitar a la víctima datos personales que le permitan realizar un fraude.",
                    "c)De acoso a una persona realizada en redes sociales o Internet utilizando información personal.",
                    "d) De denegación de servicio realizado desde una botnet (red de ordenadores zombies)."
                ],
                correctAnswer: "b"
            },
            {
                question: "78. Según el RFC 4026, una VPN (Virtual Private Network), ¿en qué capas del modelo de referencia OSI se puede establecer?",
                options: [
                    "a) Capa 1 y capa 2.",
                    "b) Capa 2 y capa 3",
                    "c) Capa 3 y capa 4.",
                    "d) Capa 5 y capa 6."
                ],
                correctAnswer: "b"
            },
            // Preguntas de reserva
            {
                question: "79. En Linux/Unix ¿qué señal, de las definidas en el <signal.h>, provoca la finalización ordenada de un proceso?",
                options: [
                    "a) SIGTERM",
                    "b) SIGKILL",
                    "c) SIGILL",
                    "d) SIGTTOU"
                ],
                correctAnswer: "a"
            },
            {
                question: "80. La capacidad nativa de la tecnología LTO (Linear Tape-Open) Ultrium es, por cada generación:",
                options: [
                    "a) LTO-3: 200 GB, LTO-4: 400 GB, LTO-5: 800 GB, LTO-6: 1,5 TB.",
                    "b) LTO-3: 400 GB, LTO-4: 800 GB, LTO-5: 1,5 TB, LTO-6: 2,5 TB.",
                    "c) LTO-3: 100 GB, LTO-4: 200 GB, LTO-5: 400 GB, LTO-6: 800 GB.",
                    "d) LTO-3: 1600 GB, LTO-4: 3200 GB, LTO-5: 6400 GB, LTO-6: 12800 GB."
                ],
                correctAnswer: "b"
            },
            {
                question: "81. Las unidades de información que maneja el nivel de presentación del modelo OSI se denominan:",
                options: [
                    "a) Celdas.",
                    "b) Tramas.",
                    "c) Paquetes.",
                    "d) Ninguna es correcta."
                ],
                correctAnswer: "d"
            },
            // INICIO DE LAS NUEVAS PREGUNTAS (CASO PRÁCTICO - BLOQUE IV)
            {
                question: "82. Con el objetivo de facilitar la gestión se ha optado por utilizar un direccionamiento privado /16 de manera que la facultad 1 tendrá la dirección de red 10.1.0.0 y consecutivamente el resto hasta la facultad 9, que tendrá la 10.9.0.0. ¿Cuál es el número de hosts que se conseguirían por subred?",
                options: [
                    "a) 2^16",
                    "b) (2^16) - 1",
                    "c) (2^16) - 2",
                    "d) (2^16) - 3"
                ],
                correctAnswer: "c"
            },
            {
                question: "83. El nuevo proyecto de cableado ya ha resuelto el problema de las distancias entre facultades, pero respecto a la velocidad, ¿qué categoría sería necesario como mínimo para alcanzar 1 Gbps como se especifica en el proyecto?",
                options: [
                    "a) Categoría 7",
                    "b) Categoría 6",
                    "c) Categoría 5",
                    "d) Categoría 6+"
                ],
                correctAnswer: "b"
            },
            {
                question: "84. El proyecto incluye la implantación de una red wifi que permita conectarse a los alumnos. Se ha decidido que la configuración remota de los clientes es algo imprescindible y por tanto la red ha de soportar:",
                options: [
                    "a) 802.11r",
                    "b) 802.11p",
                    "c) 802.11j",
                    "d) 802.11v"
                ],
                correctAnswer: "d"
            },
            {
                question: "85. De cara a obtener el mayor throughput y la mayor cobertura posibles, ¿cuál de los siguientes protocolos utilizaría para la red wifi?",
                options: [
                    "a) 802.11g",
                    "b) 802.11n",
                    "c) 802.11m",
                    "d) 802.11n+"
                ],
                correctAnswer: "b"
            },
            {
                question: "86. Para la conexión remota de los docentes, se va a habilitar el uso de VPN. ¿Cuál de los siguientes protocolos NO proporciona seguridad en las redes VPN?",
                options: [
                    "a) PPTP",
                    "b) MGCP",
                    "c) L2TP",
                    "d) TLS"
                ],
                correctAnswer: "b"
            },
            {
                question: "87. El nuevo CPD ha de cumplir la reciente norma TIA-942-A la cual establece 4 áreas o sistemas a tener en cuenta en el diseño del CPD. ¿Cuál NO es una de estas áreas/sistemas?",
                options: [
                    "a) Medioambiental.",
                    "b) Eléctrico.",
                    "c) Mecánico.",
                    "d) Telecomunicaciones."
                ],
                correctAnswer: "a"
            },
            {
                question: "88. El nuevo CPD está orientado hacía el concepto de Green CPD y, por lo tanto, las unidades CRAC han de ser muy eficientes. ¿A qué unidades nos estamos refiriendo?",
                options: [
                    "a) Los sistemas eléctricos.",
                    "b) El suelo técnico.",
                    "c) Los sistemas de refrigeración.",
                    "d) Los sistemas de alimentación ininterrumpida."
                ],
                correctAnswer: "c"
            },
            {
                question: "89. Otro aspecto fundamental a cubrir es el de la seguridad, y para ello se está planteando la compra de equipos específicos. ¿Cuál de los siguientes elementos NO es un elemento de seguridad informática?",
                options: [
                    "a) Firewall",
                    "b) IPS",
                    "c) IDS",
                    "d) PDU"
                ],
                correctAnswer: "d"
            },
            {
                question: "90. ¿Qué puerto de entre los siguientes está asignado por IANA para el Simple Mail Transfer Protocol (SMTP)?",
                options: [
                    "a) 43",
                    "b) 25",
                    "c) 69",
                    "d) 21"
                ],
                correctAnswer: "b"
            },
            {
                question: "91. Se crearán 2 zonas diferenciadas, una dedicada a los alumnos y otra al personal, cada una con un servidor DNS diferente, por tanto en las máquinas clonadas de la plantilla RedHat 6 habrá que modificar el fichero que contiene los DNS. ¿De qué fichero estamos hablando?",
                options: [
                    "a) /etc/serverdns.conf",
                    "b) /etc/sysconfig/resolv.conf",
                    "c) /etc/resolv.conf",
                    "d) /etc/sysconfig/serverdns.conf"
                ],
                correctAnswer: "c"
            },
            {
                question: "92. La nueva infraestructura requerirá configurar rutas en los diferentes servidores. ¿Cuál de los siguientes comandos tendrá que usarse en las máquinas clonadas para mostrar la tabla de rutas?",
                options: [
                    "a) netstat -nr",
                    "b) ifconfig -a",
                    "c) ifconfig -nr",
                    "d) netstat -routes"
                ],
                correctAnswer: "a"
            },
            {
                question: "93. Por último se desea cubrir el backup de los sistemas más importantes y para ello se están barajando varias alternativas, ¿Cuál de las siguientes opciones NO es un software de backup?",
                options: [
                    "a) Data Protector.",
                    "b) Backup Exec.",
                    "c) Bacula.",
                    "d) Copy and safe."
                ],
                correctAnswer: "d"
            },
            // INICIO DE LAS NUEVAS PREGUNTAS (Preguntas de reserva)
            {
                question: "94. Para la monitorización de la infraestructura se ha decidido contar con una herramienta de software libre y, Nagios ha sido la elegida. Además del protocolo SNMP, ¿con qué otro método permite Nagios realizar la monitorización?",
                options: [
                    "a) NRPE.",
                    "b) Scumm.",
                    "c) PWM.",
                    "d) IRQ."
                ],
                correctAnswer: "a"
            },
            {
                question: "95. La nueva infraestructura tendrá una parte virtualizada y, en ocasiones, se usará una máquina virtual con RedHat 6 como plantilla que se clonará múltiples veces lo que supone tener que modificar ficheros de configuración. ¿Cuál de las siguientes sentencias del comando sed (Stream EDitor) es la correcta para cambiar el nombre \"plantilla\" por el de \"servidor1\" en un fichero?",
                options: [
                    "a) sed -i /etc/sysconfig/network 's/plantilla/servidor1/g'",
                    "b) sed -i 's#plantilla/servidor1/g' /etc/sysconfig/network",
                    "c) sed -i 's/plantilla#servidor1/g' /etc/sysconfig/network",
                    "d) sed -i 's/plantilla/servidor1/g' /etc/sysconfig/network"
                ],
                correctAnswer: "d"
            },
            {
                question: "96. Durante la instalación de Nagios se requiere hacer algunas pruebas, una de ellas consiste en recuperar manualmente la rama system de la MIB (Management Information Base) de una de las máquinas desplegadas. La IP de la máquina es la 10.1.1.25, la comunidad SNMP es \"universidad\" y la versión del protocolo es la 2c. ¿Qué comando habría que utilizar?",
                options: [
                    "a) snmptalk –v 2c –c universidad 10.1.1.25 MIB::system",
                    "b) snmpwalk –v 2c –c universidad 10.1.1.25 system",
                    "c) snmplook –v 2c –c universidad -ip 10.1.1.25 system",
                    "d) snmptalk –v 2c –c universidad 10.1.1.25 system"
                ],
                correctAnswer: "b"
            }
        ];

        // Variables de estado del quiz
        let currentQuestionIndex = 0; // Índice de la pregunta actual
        let userAnswers = []; // Almacena las respuestas del usuario
        let quizCompleted = false; // Indica si el test ha sido finalizado

        // Referencias a elementos del DOM
        const quizQuestionsContainer = document.getElementById('quizQuestions');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const submitButton = document.getElementById('submitButton');
        const resultsSection = document.getElementById('resultsSection');
        const correctCountSpan = document.getElementById('correctCount');
        const incorrectCountSpan = document.getElementById('incorrectCount');
        const unansweredCountSpan = document.getElementById('unansweredCount');
        const reviewAnswersButton = document.getElementById('reviewAnswersButton');
        const restartTestButton = document.getElementById('restartTestButton');
        const progressBar = document.getElementById('progressBar');
        const feedbackModal = document.getElementById('feedbackModal');
        const modalMessage = document.getElementById('modalMessage');
        const correctAnswerInfo = document.getElementById('correctAnswerInfo');
        const closeModalButton = document.getElementById('closeModalButton');
        const modalOkButton = document.getElementById('modalOkButton');

        /**
         * Inicializa el estado del quiz cargando las respuestas guardadas en LocalStorage
         * o inicializándolas si no existen.
         */
        function initializeQuizState() {
            const savedAnswers = localStorage.getItem('userAnswers');
            if (savedAnswers) {
                userAnswers = JSON.parse(savedAnswers);
                // Asegurarse de que userAnswers tenga el tamaño correcto si se añaden/quitan preguntas
                while (userAnswers.length < questions.length) {
                    userAnswers.push(null);
                }
                while (userAnswers.length > questions.length) {
                    userAnswers.pop();
                }
            } else {
                userAnswers = new Array(questions.length).fill(null);
            }
            // Si el quiz fue completado previamente, cargamos ese estado
            quizCompleted = localStorage.getItem('quizCompleted') === 'true';
            if (quizCompleted) {
                showResults();
            } else {
                renderQuestion(currentQuestionIndex);
            }
            updateProgressBar();
            updateNavigationButtons(); // Ensure buttons are correctly updated on init
        }

        /**
         * Guarda el estado actual de las respuestas del usuario y el estado de completado del quiz
         * en LocalStorage.
         */
        function saveQuizState() {
            localStorage.setItem('userAnswers', JSON.stringify(userAnswers));
            localStorage.setItem('quizCompleted', quizCompleted);
        }

        /**
         * Renderiza una pregunta específica en el DOM.
         * @param {number} index - El índice de la pregunta a renderizar.
         */
        function renderQuestion(index) {
            // Oculta la sección de resultados si está activa
            resultsSection.classList.remove('active');
            // Muestra el contenedor de preguntas y los botones de navegación
            quizQuestionsContainer.style.display = 'block';
            
            // Limpia el contenido anterior del contenedor de preguntas
            quizQuestionsContainer.innerHTML = '';

            if (index < 0 || index >= questions.length) {
                console.error("Índice de pregunta fuera de rango:", index);
                return;
            }

            const questionData = questions[index];

            // Crea el elemento div para la pregunta actual
            const questionDiv = document.createElement('div');
            questionDiv.classList.add('question-section', 'active');
            questionDiv.innerHTML = `
                <p class="text-xl font-semibold text-gray-800 mb-4">${questionData.question}</p>
                <div class="options-container">
                    ${questionData.options.map((option, i) => `
                        <label class="option-label">
                            <input type="radio" name="question${index}" value="${option.charAt(0)}" data-option-value="${option.charAt(0)}" ${userAnswers[index] === option.charAt(0) ? 'checked' : ''} ${quizCompleted ? 'disabled' : ''}>
                            <span class="text-gray-700">${option}</span>
                        </label>
                    `).join('')}
                </div>
                <div id="feedback-${index}" class="feedback-message"></div>
            `;
            quizQuestionsContainer.appendChild(questionDiv);

            // Añade event listeners a los radio buttons para guardar la respuesta y mostrar feedback
            questionDiv.querySelectorAll(`input[name="question${index}"]`).forEach(radio => {
                radio.addEventListener('change', (event) => {
                    if (!quizCompleted) { // Solo permite cambiar la respuesta si el quiz no ha terminado
                        userAnswers[index] = event.target.value;
                        saveQuizState(); // Guarda el estado después de cada cambio
                        updateProgressBar(); // Actualiza la barra de progreso
                        showFeedback(index, event.target.value); // Muestra retroalimentación inmediatamente
                    }
                });
            });

            // Si el quiz ya está completado, muestra las clases de correcto/incorrecto y el feedback
            if (quizCompleted) {
                highlightAnswers(index);
            }

            updateNavigationButtons(); // Actualiza el estado de los botones de navegación
        }

        /**
         * Muestra retroalimentación al usuario sobre su respuesta (correcta/incorrecta)
         * y resalta las opciones.
         * @param {number} questionIndex - El índice de la pregunta.
         * @param {string} selectedOptionValue - El valor de la opción seleccionada por el usuario.
         */
        function showFeedback(questionIndex, selectedOptionValue) {
            const questionData = questions[questionIndex];
            const feedbackDiv = document.getElementById(`feedback-${questionIndex}`);
            const optionsLabels = quizQuestionsContainer.querySelectorAll(`.question-section.active .option-label`);

            // Limpia clases de feedback anteriores
            optionsLabels.forEach(label => {
                label.classList.remove('correct', 'incorrect');
            });
            feedbackDiv.classList.remove('correct-feedback', 'incorrect-feedback');
            feedbackDiv.style.display = 'none';

            let isCorrect = (selectedOptionValue === questionData.correctAnswer);

            // Resalta la opción seleccionada
            optionsLabels.forEach(label => {
                const radio = label.querySelector('input[type="radio"]');
                if (radio && radio.value === selectedOptionValue) {
                    if (isCorrect) {
                        label.classList.add('correct');
                    } else {
                        label.classList.add('incorrect');
                    }
                }
            });

            // Muestra el modal de retroalimentación
            if (isCorrect) {
                modalMessage.textContent = "¡Respuesta Correcta!";
                modalMessage.className = "text-xl font-semibold mb-4 text-green-700";
                correctAnswerInfo.textContent = ""; // No se necesita mostrar la respuesta correcta si ya acertó
            } else {
                modalMessage.textContent = "Respuesta Incorrecta.";
                modalMessage.className = "text-xl font-semibold mb-4 text-red-700";
                const correctOptionText = questionData.options.find(opt => opt.charAt(0) === questionData.correctAnswer);
                correctAnswerInfo.textContent = `La respuesta correcta era: ${correctOptionText}`;
            }
            feedbackModal.style.display = 'flex'; // Muestra el modal
        }

        /**
         * Resalta las respuestas correctas e incorrectas después de finalizar el test o al revisar.
         * @param {number} questionIndex - El índice de la pregunta a resaltar.
         */
        function highlightAnswers(questionIndex) {
            const questionData = questions[questionIndex];
            const optionsLabels = quizQuestionsContainer.querySelectorAll(`.question-section.active .option-label`);
            const userAnswer = userAnswers[questionIndex];
            const feedbackDiv = document.getElementById(`feedback-${questionIndex}`);

            // Limpia clases de feedback anteriores
            optionsLabels.forEach(label => {
                label.classList.remove('correct', 'incorrect');
            });
            feedbackDiv.classList.remove('correct-feedback', 'incorrect-feedback');
            feedbackDiv.style.display = 'none'; // Oculta el feedback en el cuerpo de la pregunta

            optionsLabels.forEach(label => {
                const radio = label.querySelector('input[type="radio"]');
                if (radio) {
                    // Si la opción es la correcta, la marcamos en verde
                    if (radio.value === questionData.correctAnswer) {
                        label.classList.add('correct');
                    }
                    // Si el usuario seleccionó esta opción y es incorrecta, la marcamos en rojo
                    if (radio.value === userAnswer && radio.value !== questionData.correctAnswer) {
                        label.classList.add('incorrect');
                    }
                    // Deshabilita los radio buttons si el quiz está completado
                    radio.disabled = true;
                }
            });
        }


        /**
         * Actualiza el estado de los botones de navegación (Anterior, Siguiente, Finalizar).
         */
        function updateNavigationButtons() {
            prevButton.disabled = currentQuestionIndex === 0;
            
            // If quiz is completed, disable next and submit buttons
            if (quizCompleted) {
                nextButton.disabled = true;
                submitButton.style.display = 'none';
                prevButton.style.display = 'none'; // Hide prev button as well in results view
                quizQuestionsContainer.style.display = 'none'; // Ensure questions are hidden
            } else {
                nextButton.disabled = currentQuestionIndex === questions.length - 1;
                prevButton.style.display = 'inline-block'; // Show prev button
                quizQuestionsContainer.style.display = 'block'; // Ensure questions are visible

                if (currentQuestionIndex === questions.length - 1) {
                    submitButton.style.display = 'inline-block';
                    nextButton.style.display = 'none';
                } else {
                    submitButton.style.display = 'none';
                    nextButton.style.display = 'inline-block';
                }
            }
        }

        /**
         * Actualiza la barra de progreso basándose en el número de preguntas contestadas.
         */
        function updateProgressBar() {
            const answeredQuestions = userAnswers.filter(answer => answer !== null).length;
            const progress = (answeredQuestions / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        /**
         * Muestra la sección de resultados y calcula las estadísticas.
         */
        function showResults() {
            quizQuestionsContainer.style.display = 'none'; // Oculta las preguntas
            prevButton.style.display = 'none'; // Oculta los botones de navegación
            nextButton.style.display = 'none';
            submitButton.style.display = 'none';
            resultsSection.classList.add('active'); // Muestra la sección de resultados

            let correct = 0;
            let incorrect = 0;
            let unanswered = 0;

            for (let i = 0; i < questions.length; i++) {
                const userAnswer = userAnswers[i];
                if (userAnswer === null) {
                    unanswered++;
                } else if (userAnswer === questions[i].correctAnswer) {
                    correct++;
                } else {
                    incorrect++;
                }
            }

            correctCountSpan.textContent = correct;
            incorrectCountSpan.textContent = incorrect;
            unansweredCountSpan.textContent = unanswered;

            quizCompleted = true; // Marca el quiz como completado
            saveQuizState(); // Guarda el estado de completado
            updateNavigationButtons(); // Actualiza los botones (deshabilitarlos)
        }

        /**
         * Reinicia el test, borrando el estado de LocalStorage y volviendo a la primera pregunta.
         */
        function restartTest() {
            localStorage.removeItem('userAnswers');
            localStorage.removeItem('quizCompleted');
            currentQuestionIndex = 0;
            userAnswers = new Array(questions.length).fill(null);
            quizCompleted = false;
            resultsSection.classList.remove('active'); // Oculta la sección de resultados
            
            // Ensure questions container is visible before rendering
            quizQuestionsContainer.style.display = 'block'; 
            renderQuestion(currentQuestionIndex); // Renderiza la primera pregunta
            updateProgressBar(); // Reinicia la barra de progreso
            updateNavigationButtons(); // Restaura los botones de navegación
            
            // Restore default modalOkButton behavior after restart
            modalOkButton.textContent = "OK";
            modalOkButton.onclick = () => {
                feedbackModal.style.display = 'none';
            };
        }

        // --- Event Listeners ---

        // Botón Anterior
        prevButton.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion(currentQuestionIndex);
            }
        });

        // Botón Siguiente
        nextButton.addEventListener('click', () => {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                renderQuestion(currentQuestionIndex);
            }
        });

        // Botón Finalizar Test
        submitButton.addEventListener('click', () => {
            showResults();
        });

        // Botón Reiniciar Test
        restartTestButton.addEventListener('click', () => {
            // Muestra un modal de confirmación antes de reiniciar
            modalMessage.textContent = "¿Estás seguro de que quieres reiniciar el test? Se perderán todas tus respuestas.";
            modalMessage.className = "text-xl font-semibold mb-4 text-gray-800";
            correctAnswerInfo.textContent = "";
            modalOkButton.textContent = "Sí, Reiniciar";
            // Cambia el comportamiento del botón OK para reiniciar el test
            modalOkButton.onclick = () => {
                feedbackModal.style.display = 'none';
                restartTest();
            };
            feedbackModal.style.display = 'flex';
        });

        // Botón Revisar Respuestas (en la sección de resultados)
        reviewAnswersButton.addEventListener('click', () => {
            currentQuestionIndex = 0; // Vuelve a la primera pregunta para la revisión
            renderQuestion(currentQuestionIndex);
            // Asegúrate de que los botones de navegación vuelvan a aparecer para la revisión
            prevButton.style.display = 'inline-block';
            nextButton.style.display = 'inline-block';
            submitButton.style.display = 'none'; // No se puede finalizar de nuevo
            updateNavigationButtons(); // Actualiza el estado de los botones
        });

        // Cierra el modal de retroalimentación
        closeModalButton.addEventListener('click', () => {
            feedbackModal.style.display = 'none';
            // Restore default modalOkButton behavior if it was changed for restart
            modalOkButton.textContent = "OK";
            modalOkButton.onclick = () => {
                feedbackModal.style.display = 'none';
            };
        });

        // Cierra el modal de retroalimentación al hacer clic en OK (comportamiento por defecto)
        // This listener is now redundant as modalOkButton.onclick is dynamically set.
        // Keeping it for clarity but its behavior is overridden by restartTestButton's logic.
        /* modalOkButton.addEventListener('click', () => {
            feedbackModal.style.display = 'none';
            // Restaura el comportamiento original del botón OK si se cambió para reiniciar
            modalOkButton.textContent = "OK";
            modalOkButton.onclick = () => {
                feedbackModal.style.display = 'none';
            };
        }); */

        // Cierra el modal si se hace clic fuera de él
        window.addEventListener('click', (event) => {
            if (event.target === feedbackModal) {
                feedbackModal.style.display = 'none';
                // Restaura el comportamiento original del botón OK si se cambió para reiniciar
                modalOkButton.textContent = "OK";
                modalOkButton.onclick = () => {
                    feedbackModal.style.display = 'none';
                };
            }
        });

        // Inicializa el quiz cuando la página se carga completamente
        document.addEventListener('DOMContentLoaded', initializeQuizState);
    </script>
</body>
</html>
